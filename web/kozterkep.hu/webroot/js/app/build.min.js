var Basefunctions={init:function(){}};function _c(what,type){if(typeof type!="undefined"&&type==1){console.error(what)}else{console.log(what)}}
function _arr(input_array,defaults){var input_array=typeof input_array=='undefined'?[]:input_array;$.each(defaults,function(key,value){if(typeof input_array[key]=='undefined'){input_array[key]=value}});return input_array}
function _contains(string,needles,exact){exact=typeof exact=='undefined'?!1:exact;if(needles.length>0){$(needles).each(function(key,needle){if((exact&&string==needle)||(!exact&&string.indexOf(needle)>-1)){return!0}})}else if(string.indexOf(needle)>-1){return!0}
return!1}
function _text(key){var s='';if(typeof $sDB.texts[key]!='undefined'){s=$sDB.texts[key]}
return s}
function _redirect(path,flash){var flash_params='',separator='';if(typeof flash==='object'){flash_params='flash='+encodeURI('["'+flash[0]+'","'+flash[1]+'"]')}
if(!path){path=window.location.pathname}else if(path.substring(0,$app.path.length)!=$app.path){path=$app.path+path}
if(flash_params!=''){separator=path.indexOf('?')>-1?'&':'?'}
window.location=path+separator+flash_params}
function _delay(callback,ms){var timer=0;return function(){var context=this,args=arguments;clearTimeout(timer);timer=setTimeout(function(){callback.apply(context,args)},ms||0)}};$sDB={"texts":{"kommunikacios_hiba":"<strong>V\u00e1ratlan kommunik\u00e1ci\u00f3s hiba.<\/strong> Amennyiben a hiba tart\u00f3san fenn\u00e1ll, k\u00e9rj\u00fck, jelezd az \u00fczemgazd\u00e1nak!","varatlan_hiba":"<strong>V\u00e1ratlan hiba t\u00f6rt\u00e9nt a folyamat sor\u00e1n.<\/strong> Amennyiben a hiba tart\u00f3san fenn\u00e1ll, k\u00e9rj\u00fck, jelezd az \u00fczemgazd\u00e1nak!","mentes_hiba":"<strong>Hiba t\u00f6rt\u00e9nt a ment\u00e9s sor\u00e1n.<\/strong> Amennyiben a hiba az oldal friss\u00edt\u00e9se ut\u00e1n is tart\u00f3san fenn\u00e1ll, k\u00e9rj\u00fck, jelezd az \u00fczemgazd\u00e1nak!","torles_hiba":"<strong>Hiba t\u00f6rt\u00e9nt a t\u00f6rl\u00e9s sor\u00e1n.<\/strong> Amennyiben a hiba az oldal friss\u00edt\u00e9se ut\u00e1n is tart\u00f3san fenn\u00e1ll, k\u00e9rj\u00fck, jelezd az \u00fczemgazd\u00e1nak!","sikeres_masolas":"A k\u00e9rt m\u00e1sol\u00e1s sikeresen lefutott.","sikeres_athelyezes":"A k\u00e9rt \u00e1thelyez\u00e9s sikeresen lefutott.","sikeres_torles":"A k\u00e9rt t\u00f6rl\u00e9s sikeresen lefutott.","sikeres_mentes":"Sikeresen mentett\u00fck az \u0171rlap adatait.","hibas_url":"<strong>Hib\u00e1s webc\u00edm, vagy URL azonos\u00edt\u00f3.<\/strong> A link hib\u00e1s, elavult, vagy jogosults\u00e1gi okokb\u00f3l nem el\u00e9rhet\u0151.","jogosultsagi_hiba":"<strong>Jogosults\u00e1gi hiba.<\/strong> A v\u00e9grehajtani k\u00edv\u00e1nt m\u0171velethez nem megfelel\u0151 a jogosults\u00e1god, vagy m\u00e1s egyedi hiba t\u00f6rt\u00e9nt. Amennyiben a hiba tart\u00f3san fenn\u00e1ll, k\u00e9rj\u00fck, jelezd az \u00fczemgazd\u00e1nak!","nem_publikus_mulap":"<strong>A m\u0171lap nem el\u00e9rhet\u0151.<\/strong> A m\u0171lap st\u00e1tusza jelenleg nem publikus.","nem_publikus_mulap_tagoknak":"<strong>A m\u0171lap st\u00e1tusza: {status}.<\/strong> Csak a publikus, a k\u00f6zt\u00e9rre k\u00fcld\u00f6tt \u00e9s a visszak\u00fcld\u00f6tt lapokat \u00e9rheted el. Amennyiben szerkeszt\u00e9s alatti lapot nyitn\u00e1l meg, k\u00e9rd meg a m\u0171lap l\u00e9trehoz\u00f3j\u00e1t, hogy h\u00edvjon meg szerkeszt\u00e9sre.","nem_szerkesztheto_mulap":"<strong>A m\u0171lap st\u00e1tusza: {status}.<\/strong> Csak a publikus \u00e9s a k\u00f6zt\u00e9rre k\u00fcld\u00f6tt m\u0171lapokat nyithatod meg szerkeszt\u00e9sre.","jelentkezz_be":"<strong>Bel\u00e9p\u00e9s sz\u00fcks\u00e9ges.<\/strong> A k\u00e9rt oldal megtekint\u00e9s\u00e9hez be kell jelentkezned.","gyorskuldes":"Ctrl + Enter megnyom\u00e1s\u00e1ra is lefut a k\u00fcld\u00e9s.","szoveg_formazas":"El\u00e9rhet\u0151 form\u00e1z\u00e1s: <strong>*f\u00e9lk\u00f6v\u00e9r*<\/strong>.","nincs_talalat":"Nincs tal\u00e1lat a megadott felt\u00e9telekkel.","nem_mentett_modositasok":"Nem mentett m\u00f3dos\u00edt\u00e1sokat \u00e9szlelt\u00fcnk. Biztosan elhagyod ezt az oldalt?","torolt_tag_neve":"<span title=\"A tag t\u00f6r\u00f6lte mag\u00e1t kor\u00e1bban, \u00edgy m\u00e1r nem tudunk semmit r\u00f3la.\" data-toggle=\"tooltip\">T\u00f6r\u00f6lt tag<\/span>","foszerk_ikon":"<span class=\"far fa-glasses-alt mr-2\" title=\"Ez a funkci\u00f3 csak f\u0151szerkeszt\u0151knek, tan\u00e1csad\u00f3knak \u00e9s adminoknak \u00e9rhet\u0151 el\" data-toggle=\"title\"><\/span>","nincs_elem":"Nincs ilyen elem..."},"user_roles":{"665":"f\u0151szerkeszt\u0151 \u00e9s alkat\u00f3t\u00e1bor kezel\u0151","585":"f\u0151szerkeszt\u0151 \u00e9s telep\u00fcl\u00e9st\u00e1r kezel\u0151","99":"f\u0151szerkeszt\u0151i tan\u00e1csad\u00f3","148":"akkor \u00e9s most & Facebook-felel\u0151s","772":"gy\u0171jtem\u00e9ny kezel\u0151","1":"\u00fczemgazda"},"cookie_descriptions":{"KT-latogato":"Az ebben t\u00e1rolt adattal azonos\u00edt t\u00e9ged a K\u00f6zt\u00e9rk\u00e9p saj\u00e1t nyilv\u00e1nos webstatisztik\u00e1ja.","KT-belepvetarto":"Ha bejelentkezel \u00e9s pip\u00e1lod, hogy jegyezze meg a bel\u00e9p\u00e9sedet a b\u00f6ng\u00e9sz\u0151, akkor ennek seg\u00edts\u00e9g\u00e9vel tudjuk, hogy te vagy te.","KT-munkamenet":"Ez azonos\u00edtja az aktu\u00e1lis munkamenetedet, ami seg\u00edt abban, hogyha egyik oldalr\u00f3l a m\u00e1sikra kattintasz, vagy \u00e9pp egy \u0171rlapot mentesz, akkor is tudja a szerver, hogy te vagy az, aki az el\u0151bb megnyomta a gombot."},"limits":{"artpieces":{"weekly_max":5,"top_photo_min":8,"top_photo_max":24},"photos":{"min_size":1000,"archive_min_size":400,"min_count":5,"min_count_na":1,"max_upload_total":50},"descriptions":{"min_hun":225,"min_eng":100},"edits":{"inactive_after_months":6,"wait_days":5},"headitors":{"superb_revote":"-4 years"},"games":{"hug_container_distance":1500,"hug_distance":50,"hug_days":14},"posts":{"intro_max_length":350,"text_min_length":100}},"photo_quality":70,"photo_sizes":{"1":1200,"2":800,"3":500,"4":500,"5":250,"6":150,"7":75,"8":16},"artpiece_conditions":{"1":["Megl\u00e9v\u0151",1,1,1,"success","check"],"2":["Elpusztult",2,0,0,"warning","empty-set"],"3":["Tudsz r\u00f3la?",3,0,0,"warning","question-square"],"4":["Vesz\u00e9lyben",4,1,1,"danger","exclamation-square"],"10":["\u00c1thelyezve innen",5,0,0,"info","truck-loading"],"5":["Lebontott",6,0,0,"info","arrow-to-bottom"],"6":["\u00c1tmenetileg nincs a hely\u00e9n",7,1,0,"warning","retweet-alt"],"7":["Ellopt\u00e1k, elt\u0171nt",8,1,0,"danger","user-secret"],"8":["Megrong\u00e1l\u00f3dott",9,0,1,"danger","monument fa-rotate-90"],"9":["Megrong\u00e1lt\u00e1k",10,1,1,"danger","user-ninja"]},"artpiece_statuses":{"1":["Szerkeszt\u00e9s alatt","warning"],"2":["K\u00f6zt\u00e9rre k\u00fcldve","success"],"3":["Visszak\u00fcld\u00f6tt","danger"],"4":["Visszavett","secondary"],"5":["Publikus","primary"],"6":["Elvetett","danger"]},"edit_statuses":{"1":["Szerkeszt\u00e9s alatt"],"2":["V\u00e1rakoz\u00f3"],"3":["\u00dajranyitott"],"4":["Visszavont"],"5":["Beemelt"],"6":["Elvetett"],"7":["Szerkeszt\u00e9ssel fel\u00fcl\u00edrt"]},"hidden_edit_fields":["id","hug_id","artpiece_id","prev_data","status_id","user_id","manage_user_id","receiver_user_id","created","modified","approved","edit_type_id","before_shared"],"artpiece_fields":{"id":"AZ","status_id":"St\u00e1tusz","user_id":"Tag","created":"L\u00e9trehoz\u00e1s","modified":"M\u00f3dos\u00edt\u00e1s","approved":"Elfogad\u00e1s","address":"Utca, hsz.","photo_id":"Bor\u00edt\u00f3 AZ","photo_slug":"Bor\u00edt\u00f3 k\u00e9p","place_description":"Hely le\u00edr\u00e1sa","title":"C\u00edm","title_alternatives":"Alternat\u00edv, helyi c\u00edm","title_en":"Angol c\u00edm","text":"Le\u00edr\u00e1s","text_en":"Angol le\u00edr\u00e1s","source":"Forr\u00e1s","links":"Linkek","parameters":"Param\u00e9terek","descriptions":"Le\u00edr\u00e1sok","unveil_date":"Avat\u00e1si d\u00e1tum","place_id":"Telep\u00fcl\u00e9s","country_id":"Orsz\u00e1g","county_id":"Megye","district_id":"Ker\u00fclet","lat":"Lat.","lon":"Lon.","lng":"Lon.","manage_user_id":"Kezel\u0151","artpiece_condition_id":"\u00c1llapot","artpiece_location_id":"Elhelyezked\u00e9s","not_public_type_id":"K\u00f6z\u00f6ss\u00e9gi t\u00e9r t\u00edpusa","hun_related":"Magyar vonatkoz\u00e1s\u00fa","not_artistic":"Nincs m\u0171v\u00e9szi elem","dates":"D\u00e1tumok","photolist":"Fot\u00f3k adatai","photos":"Fot\u00f3 sorrend v\u00e1ltoz\u00e1sa","top_photo_count":"Kiemelt k\u00e9pek sz\u00e1ma","original_unveil_date":"Eredeti avat\u00e1si d\u00e1tum","original_unveil_date_unknown":"Eredeti avat\u00e1si d\u00e1tum ismeretlen","temporary":"\u00c1tmeneti fel\u00e1ll\u00edt\u00e1s","dismantling_date":"Elbont\u00e1s id\u0151pontja","anniversary":"\u00c9vfordul\u00f3s","local_importance":"Helyi jelent\u0151s\u00e9g","national_heritage":"Nyilv\u00e1ntartott m\u0171eml\u00e9k","copy":"M\u00e1solat","reconstruction":"Rekonstrukci\u00f3","connected_artpieces":"Kapcsol\u00f3d\u00f3 m\u0171lapok","connected_sets":"Kapcsolt gy\u0171jtem\u00e9nyek"},"photo_fields":{"rank":"Sorsz\u00e1m","top":"Kiemelt","text":"Le\u00edr\u00e1s","source":"Forr\u00e1s","other":"Adal\u00e9k","other_place":"Nem a helysz\u00ednr\u0151l","joy":"\u00c9lm\u00e9nyk\u00e9p","artist":"Alkot\u00f3 a k\u00e9pen","artist_id":"Alkot\u00f3 a k\u00e9pen","sign_artist_id":"Alkot\u00f3","unveil":"Avat\u00e1st l\u00e1tunk","sign":"Szign\u00f3 a k\u00e9pen","archive":"Arch\u00edv fot\u00f3","cover":"Bor\u00edt\u00f3k\u00e9p","year":"\u00c9vsz\u00e1m","license_type_id":"K\u00e9p felhaszn\u00e1lhat\u00f3s\u00e1ga"},"parameter_groups":{"1":["T\u00edpus","list-alt"],"2":["St\u00edlus","pencil-ruler"],"3":["\u00c1br\u00e1zolt form\u00e1k","dice-d4"],"4":["Anyag","cube"],"5":["Vall\u00e1si kapcsol\u00f3d\u00e1s","place-of-worship"],"6":["T\u00f6rt\u00e9nelmi kapcsol\u00f3d\u00e1s","monument"],"7":["M\u0171eml\u00e9k jelleg","landmark"]},"artist_professions":{"1":["Szobr\u00e1sz",1,1],"2":["K\u0151farag\u00f3",1,1],"3":["\u00c9p\u00edt\u00e9sz",1,0],"4":["Tervez\u0151",1,1],"5":["Kivitelez\u0151",1,0],"6":["Fest\u0151m\u0171v\u00e9sz",1,1],"7":["C\u00edmerfest\u0151",0,1],"8":["Keramikus",1,1],"9":["K\u00e9pz\u0151m\u0171v\u00e9sz",1,1],"10":["Grafikus",0,1],"11":["D\u00edsz\u00edt\u0151szobr\u00e1sz",0,1],"12":["Bronzm\u0171v\u00e9sz",0,1],"13":["Mozaikk\u00e9sz\u00edt\u0151",1,1],"14":["\u00d6tv\u00f6sm\u0171v\u00e9sz",1,1],"15":["Iparm\u0171v\u00e9sz",1,1],"16":["\u00dcvegm\u0171v\u00e9sz",1,1],"17":["D\u00edszm\u0171kov\u00e1cs",1,1],"18":["Fafarag\u00f3",1,1],"19":["Aranym\u0171ves",0,1],"20":["Textilm\u0171v\u00e9sz",1,1],"21":["N\u00e9pm\u0171v\u00e9sz",0,1],"22":["Egy\u00e9b",0,1],"23":["Bronz\u00f6nt\u0151",1,1],"24":["\u00c9p\u00edt\u00e9sz",0,1],"25":["Restaur\u00e1tor",1,1],"26":["Porcel\u00e1nm\u0171v\u00e9sz",0,1]},"before_names":{"1":"ifj.","2":"id.","3":"Dr.","4":"Prof.","5":"DLA","6":"legifj."},"not_public_types":{"1":["Templombels\u0151","place-of-worship"],"2":["Temet\u0151, s\u00edrkert","tombstone-alt"],"3":["M\u00fazeum ter\u00fclete","university"],"4":["Oktat\u00e1si int\u00e9zm\u00e9ny ter\u00fclete","school"],"5":["Egy\u00e9b int\u00e9zm\u00e9ny ter\u00fclete","building"],"6":["Egy\u00e9b kert, park vagy udvar","trees"]},"artpiece_type_groups":{"1":"\u00c1tfog\u00f3 besorol\u00e1sok","2":"Alapvet\u0151 t\u00edpusok","3":"Mur\u00e1lia t\u00edpusok","4":"V\u00edzzel kapcsolatos t\u00edpusok","5":"Egy\u00e9b t\u00edpusok"},"artpiece_form_groups":{"1":"","2":"Alakos (figur\u00e1lis)"},"artpiece_connection_types":["Kapcsol\u00f3d\u00f3","P\u00e9ld\u00e1ny","El\u0151zm\u00e9ny","Ut\u00f3d"],"artpiece_flagtypes":{"1":["Publik\u00e1l\u00e1s"],"2":["Kit\u00fcntet\u00e9s"],"3":["Duplik\u00e1ci\u00f3"],"4":["\u00c1tad\u00e1s"],"5":["Nyitott k\u00e9rd\u00e9s"],"6":["Sz\u00e9tszedhet\u0151"],"7":["Fot\u00f3\u00e9hes"],"8":["Elvekbe \u00fctk\u00f6z\u0151"]},"forum_topics":{"6":["F\u0151szerkSzoba",1,"glasses-alt"],"4":["Besz\u00e9lj\u00fck meg",0,"comments"],"16":["Felt\u00f6lt\u00e9si \u00f6tletek",0,"lightbulb"],"9":["Sajt\u00f3figyel\u0151 \u00e9s aj\u00e1nl\u00f3",0,"newspaper"],"7":["Tudsz r\u00f3la? Keress\u00fck!",0,"question"],"8":["P\u00f3l\u00f3k \u00e9s rendel\u00e9s",0,"tshirt"]},"month_names":{"1":"Janu\u00e1r","2":"Febru\u00e1r","3":"M\u00e1rcius","4":"\u00c1prilis","5":"M\u00e1jus","6":"J\u00fanius","7":"J\u00falius","8":"Augusztus","9":"Szeptember","10":"Okt\u00f3ber","11":"November","12":"December"},"day_names":{"1":"H\u00e9tf\u0151","2":"Kedd","3":"Szerda","4":"Cs\u00fct\u00f6rt\u00f6k","5":"P\u00e9ntek","6":"Szombat","7":"Vas\u00e1rnap"},"date_types":{"unveil":"Avat\u00e1s","erection":"Fel\u00e1ll\u00edt\u00e1s","created":"K\u00e9sz\u00edt\u00e9s","dismantle":"Elbont\u00e1s"},"numbers":{"1":"egy","2":"kett\u0151","3":"h\u00e1rom","4":"n\u00e9gy","5":"\u00f6t","6":"hat","7":"h\u00e9t","8":"nyolc","9":"kilenc","10":"t\u00edz","11":"tizenegy","12":"tizenkett\u0151","13":"tizenh\u00e1rom","14":"tizenn\u00e9gy","15":"tizen\u00f6t","16":"tizenhat","17":"tizenh\u00e9t","18":"tizennyolc","19":"tizenkilenc","20":"h\u00fasz"},"set_types":{"1":"K\u00f6z\u00f6s","2":"Tagi","3":"M\u00falt Kincse"},"post_categories":{"1":["G\u00e9ph\u00e1z",1,"gephaz"],"2":["Alkot\u00f3k",0,"alkotok"],"3":["Helyek",0,"helyek"],"4":["M\u0171lapok",0,"mulapok"],"5":["Aj\u00e1nl\u00f3",0,"ajanlo"],"6":["Interj\u00fa",0,"interju"],"7":["Kutat\u00e1s",0,"kutatas"],"8":["Szubjekt\u00edv",0,"szubjektiv"],"9":["P\u00e1ly\u00e1zat",0,"palyazat"],"10":["Heti sz\u00fcret",1,"heti-szuret"],"11":["Seg\u00e9dlet",1,"segedlet"]},"user_scores":{"settings":{"min_points":1,"max_points":5,"headitor_points":10},"values":{"artpiece":15,"photo":1,"description":4,"edit":3}},"artpiece_vote_types":{"publish":[1,"Publik\u00e1l\u00e1s",0,15],"publish_pause":[2,"Publik\u00e1l\u00e1s sz\u00fcneteltet\u00e9se",1,!1],"praise":[3,"Sz\u00e9p m\u0171lap!",0,!1],"superb":[4,"P\u00e9ld\u00e1s m\u0171lap!",1,2],"question":[5,"Nyitott k\u00e9rd\u00e9s",1,!1],"edit_accept":[6,"Szerkeszt\u00e9s elfogad\u00e1s",0,10]},"event_types":{"1":["K\u00f6zt\u00e9rre k\u00fcld\u00e9s","artpiece",0,1],"2":["K\u00f6zt\u00e9rr\u0151l visszav\u00e9tel","artpiece",0,1],"3":["Visszak\u00fcld\u00e9s","artpiece",0,1],"4":["Saj\u00e1t publik\u00e1l\u00e1s","artpiece",1,1],"5":["K\u00f6z\u00f6ss\u00e9gi publik\u00e1l\u00e1s","artpiece",1,1],"6":["Fot\u00f3 felt\u00f6lt\u00e9s","artpiece",1,0],"7":["\u00c9rint\u00e9s","artpiece",1,0],"8":["T\u00e9rkapszula felt\u00f6r\u00e9se","artpiece",1,0],"9":["P\u00e9ld\u00e1s m\u0171lap megszavaz\u00e1sa","artpiece",1,1],"10":["Sz\u00e9p munka! jel\u00f6l\u00e9s","artpiece",1,0],"11":["M\u0171lap \u00e1tad\u00e1sa","artpiece",1,1],"12":["Szerkeszt\u00e9s j\u00f3v\u00e1hagy\u00e1s","edit",1,1],"13":["Szerkeszt\u00e9s megszavaz\u00e1sa","edit",1,1],"14":["Szerkeszt\u00e9s elutas\u00edt\u00e1sa","edit",0,1],"15":["Szerkeszt\u00e9s visszavon\u00e1sa","edit",0,1],"16":["Szerkeszt\u00e9s \u00fajranyit\u00e1sa","edit",0,1],"17":["Szerkeszt\u00e9s vissza\u00e1ll\u00edt\u00e1sa","edit",0,1],"18":["\u00daj tag regisztr\u00e1ci\u00f3ja","user",1,1],"19":["Tag saj\u00e1t publik\u00e1l\u00f3v\u00e1 v\u00e1lt","user",1,1],"20":["Heti kiemelt szerkeszt\u0151","user",1,1],"21":["Tag m\u00e9rf\u00f6ldk\u0151","user",1,1],"22":["\u00daj blogbejegyz\u00e9s","post",1,0],"23":["G\u00e9ph\u00e1z blogbejegyz\u00e9s","post",1,1],"24":["\u00daj k\u00f6nyv a k\u00f6nyvt\u00e9ren","book",1,0],"25":["\u00daj mappa publik\u00e1l\u00e1sa","folder",1,0],"26":["\u00daj napt\u00e1resem\u00e9ny","calendar",1,0],"27":["K\u00f6zt\u00e9rG\u00e9p mondja","robot",1,1],"28":["Fot\u00f3 felt\u00f6lt\u00e9s","artist",1,0],"29":["Visszanyit\u00e1s","artpiece",0,1]},"notification_types":{"artpieces":["M\u0171lapok","Saj\u00e1t m\u0171lapjaidhoz \u00e9rkez\u0151 hozz\u00e1sz\u00f3l\u00e1sok, szerkeszt\u00e9sek, fot\u00f3k, dics\u00e9retek, st\u00e1tuszv\u00e1ltoz\u00e1sok \u00e9s egy\u00e9b esem\u00e9nyek, valamint m\u0171lap szerkeszt\u00e9si megh\u00edv\u00e1sok."],"edits":["Szerkeszt\u00e9s","Saj\u00e1t szerkeszt\u00e9seddel kapcsolatos hozz\u00e1sz\u00f3l\u00e1sok \u00e9s esem\u00e9nyek."],"comments":["V\u00e1laszok","Hozz\u00e1sz\u00f3l\u00e1saidra adott v\u00e1laszok b\u00e1rhol."],"things":["Saj\u00e1t dolgaim","Saj\u00e1t mapp\u00e1idat, gy\u0171jtem\u00e9nyeidet, k\u00f6nyveidet, posztjaidat \u00e9rint\u0151 esem\u00e9nyek."],"games":["J\u00e1t\u00e9k","Saj\u00e1t m\u0171lapjaid \u00e9rint\u00e9se, t\u00e9rkapszula felt\u00f6r\u00e9se \u00e9s m\u00e1s j\u00e1t\u00e9kos \u00e9rtes\u00edt\u00e9sek."],"others":["Egy\u00e9b","Figyelt f\u00f3rumok hozz\u00e1sz\u00f3l\u00e1sai \u00e9s egy\u00e9b t\u00e9ged \u00e9rint\u0151 \u00e9rtes\u00edt\u00e9sek."]},"model_parameters":{"artpieces":["m\u0171lap","m\u0171lapok","\/"],"artpiece_edits":["szerkeszt\u00e9s","szerkeszt\u00e9sek"],"artists":["alkot\u00f3","alkot\u00f3k","\/alkotok\/megtekintes\/"],"places":["hely","helyek","\/helyek\/megtekintes\/"],"users":["profil","profilok","\/kozosseg\/profil\/"],"folders":["mappa","mapp\u00e1k","\/mappak\/megtekintes\/"],"books":["k\u00f6nyv","k\u00f6nyvek","\/digitar\/konyv\/"],"posts":["blogposzt","blogposztok","\/blogok\/megtekintes\/"],"pages":["oldal","oldalak","\/oldal\/"],"forum_topics":["f\u00f3rum t\u00e9ma","f\u00f3rum t\u00e9m\u00e1k","\/kozter\/forum-tema\/"],"sets":["gy\u0171jtemeny","gy\u0171jtem\u00e9nyek","\/gyujtemenyek\/megtekintes\/"]},"license_types":{"1":"Nevezd meg! 4.0 Nemzetk\u00f6zi","2":"Nevezd meg! - \u00cdgy add tov\u00e1bb! 4.0 Nemzetk\u00f6zi","3":"Nevezd meg! - Ne v\u00e1ltoztasd! 4.0 Nemzetk\u00f6zi","4":"Nevezd meg! - Ne add el! 4.0 Nemzetk\u00f6zi","5":"Nevezd meg! - Ne add el! - \u00cdgy add tov\u00e1bb! 4.0 Nemzetk\u00f6zi","6":"Nevezd meg! - Ne add el! - Ne v\u00e1ltoztasd! 4.0 Nemzetk\u00f6zi","7":"Nincs enged\u00e9ly"},"license_transmissions":{"1":{"parents":[2,3,4,5,6,7],"children":[]},"2":{"parents":[5,7],"children":[1]},"3":{"parents":[6,7],"children":[1]},"4":{"parents":[5,6,7],"children":[1]},"5":{"parents":[7],"children":[1,2,4]},"6":{"parents":[7],"children":[1,3,4]},"7":{"parents":[],"children":[1,2,3,4,5,6]}},"license_infos":{"1":[["fab fa-creative-commons","fab fa-creative-commons-by"],"https:\/\/creativecommons.org\/licenses\/by\/4.0\/deed.hu"],"2":[["fab fa-creative-commons","fab fa-creative-commons-by","fab fa-creative-commons-sa"],"https:\/\/creativecommons.org\/licenses\/by-sa\/4.0\/deed.hu"],"3":[["fab fa-creative-commons","fab fa-creative-commons-by","fab fa-creative-commons-nd"],"https:\/\/creativecommons.org\/licenses\/by-nd\/4.0\/deed.hu"],"4":[["fab fa-creative-commons","fab fa-creative-commons-by","fab fa-nc"],"https:\/\/creativecommons.org\/licenses\/by-nc\/4.0\/deed.hu"],"5":[["fab fa-creative-commons","fab fa-creative-commons-by","fab fa-nc","creative-commons-sa"],"https:\/\/creativecommons.org\/licenses\/by-nc-sa\/4.0\/deed.hu"],"6":[["fab fa-creative-commons","fab fa-creative-commons-by","fab fa-nc","creative-commons-nd"],"https:\/\/creativecommons.org\/licenses\/by-nc-nd\/4.0\/deed.hu"],"7":[["fas fa-ban"],""]},"similar_excludes":[" a "," az "," \u00e9s ","egy ","k\u00e9t "," and "," or "," the "," in ","-h\u00e1z"," for "," to "," is "," at "," with ","I.","II.","III.","V.","VI.","VIII.","IX.","X.","gr\u00f3f","Gr\u00f3f","eml\u00e9km\u0171ve","-eml\u00e9km\u0171","domborm\u0171","-eml\u00e9kt\u00e1bla","szent","-szobor"," szobor"," szobra","egykori"],"districts":{"1":["I. ker\u00fclet",25],"2":["II. ker\u00fclet",90],"3":["III. ker\u00fclet",131],"4":["IV. ker\u00fclet",101],"5":["V. ker\u00fclet",26],"6":["VI. ker\u00fclet",38],"7":["VII. ker\u00fclet",53],"8":["VIII. ker\u00fclet",76],"9":["IX. ker\u00fclet",59],"10":["X. ker\u00fclet",78],"11":["XI. ker\u00fclet",146],"12":["XII. ker\u00fclet",58],"13":["XIII. ker\u00fclet",120],"14":["XIV. ker\u00fclet",124],"15":["XV. ker\u00fclet",80],"16":["XVI. ker\u00fclet",74],"17":["XVII. ker\u00fclet",88],"18":["XVIII. ker\u00fclet",102],"19":["XIX. ker\u00fclet",60],"20":["XX. ker\u00fclet",66],"21":["XXI. ker\u00fclet",76],"22":["XXII. ker\u00fclet",55],"23":["XXIII. ker\u00fclet",23],"24":["Margitsziget",0]},"counties":{"1":["Budapest",1756],"2":["Pest megye",1234],"3":["Gy\u0151r-Moson-Sopron megye",455],"4":["Vas megye",253],"5":["Zala megye",275],"6":["Veszpr\u00e9m megye",344],"7":["Kom\u00e1rom-Esztergom megye",297],"8":["Fej\u00e9r megye",418],"9":["N\u00f3gr\u00e1d megye",193],"10":["Heves megye",299],"11":["Borsod-Aba\u00faj-Zempl\u00e9n megye",660],"12":["J\u00e1sz-Nagykun-Szolnok megye",376],"13":["Szabolcs-Szatm\u00e1r-Bereg megye",563],"14":["Hajd\u00fa-Bihar megye",534],"15":["Somogy megye",309],"16":["Tolna megye",223],"17":["Baranya megye",363],"18":["B\u00e1cs-Kiskun megye",511],"19":["Csongr\u00e1d megye",404],"20":["B\u00e9k\u00e9s megye",347]},"countries":{"1":["Afghanistan","Afghanistan","af",0],"2":["Aland Islands","Aland Islands","ax",1],"3":["Albania","Alb\u00e1nia","al",0],"4":["Algeria","Algeria","dz",1],"5":["American Samoa","American Samoa","as",1],"6":["Andorra","Andorra","ad",0],"7":["Angola","Angola","ao",1],"8":["Anguilla","Anguilla","ai",1],"9":["Antarctica","Antarctica","aq",1],"10":["Antigua And Barbuda","Antigua And Barbuda","ag",1],"11":["Argentina","Argentina","ar",1],"12":["Armenia","Armenia","am",1],"13":["Aruba","Aruba","aw",1],"14":["Australia","Australia","au",1],"15":["Austria","Ausztria","at",1],"16":["Azerbaijan","Azerbaijan","az",1],"17":["Bahamas","Bahamas","bs",1],"18":["Bahrain","Bahrain","bh",0],"19":["Bangladesh","Bangladesh","bd",1],"20":["Barbados","Barbados","bb",1],"21":["Belarus","Belarus","by",0],"22":["Belgium","Belgium","be",0],"23":["Belize","Belize","bz",1],"24":["Benin","Benin","bj",1],"25":["Bermuda","Bermuda","bm",1],"26":["Bhutan","Bhutan","bt",1],"27":["Bolivia, Plurinational State Of","Bolivia, Plurinational State Of","bo",1],"28":["Bonaire, Sint Eustatius And Saba","Bonaire, Sint Eustatius And Saba","bq",1],"29":["Bosnia And Herzegovina","Bosznia-hercegovina","ba",0],"30":["Botswana","Botswana","bw",1],"31":["Bouvet Island","Bouvet Island","bv",1],"32":["Brazil","Brazil","br",1],"33":["British Indian Ocean Territory","British Indian Ocean Territory","io",1],"34":["Brunei Darussalam","Brunei Darussalam","bn",1],"35":["Bulgaria","Bulg\u00e1ria","bg",0],"36":["Burkina Faso","Burkina Faso","bf",0],"37":["Burundi","Burundi","bi",1],"38":["Cambodia","Cambodia","kh",0],"39":["Cameroon","Cameroon","cm",0],"40":["Canada","Kanada","ca",1],"41":["Cape Verde","Cape Verde","cv",1],"42":["Cayman Islands","Cayman Islands","ky",1],"43":["Central African Republic","Central African Republic","cf",1],"44":["Chad","Chad","td",1],"45":["Chile","Chile","cl",1],"46":["China","K\u00edna","cn",1],"47":["Christmas Island","Christmas Island","cx",1],"48":["Cocos (keeling) Islands","Cocos (keeling) Islands","cc",1],"49":["Colombia","Colombia","co",1],"50":["Comoros","Comoros","km",1],"51":["Congo","Congo","cg",1],"52":["Congo, The Democratic Republic Of The","Congo, The Democratic Republic Of The","cd",0],"53":["Cook Islands","Cook Islands","ck",1],"54":["Costa Rica","Costa Rica","cr",0],"55":["Cote D'ivoire","Cote D'ivoire","ci",1],"56":["Croatia","Horv\u00e1torsz\u00e1g","hr",1],"57":["Cuba","Cuba","cu",1],"58":["Curazao","Curazao","cw",1],"59":["Cyprus","Cyprus","cy",1],"60":["Czech Republic","Cseh K\u00f6zt\u00e1rsas\u00e1g","cz",1],"61":["Denmark","D\u00e1nia","dk",1],"62":["Djibouti","Djibouti","dj",1],"63":["Dominica","Dominica","dm",1],"64":["Dominican Republic","Dominican Republic","do",1],"65":["Ecuador","Ecuador","ec",1],"66":["Egypt","Egyiptom","eg",1],"67":["El Salvador","El Salvador","sv",1],"68":["Equatorial Guinea","Equatorial Guinea","gq",1],"69":["Eritrea","Eritrea","er",1],"70":["Estonia","\u00c9sztorsz\u00e1g","ee",0],"71":["Ethiopia","Ethiopia","et",0],"72":["Falkland Islands (malvinas)","Falkland Islands (malvinas)","fk",1],"73":["Faroe Islands","Faroe Islands","fo",1],"74":["Fiji","Fiji","fj",1],"75":["Finland","Finnorsz\u00e1g","fi",1],"76":["France","Franciaorsz\u00e1g","fr",0],"77":["French Guiana","French Guiana","gf",1],"78":["French Polynesia","French Polynesia","pf",1],"79":["French Southern Territories","French Southern Territories","tf",1],"80":["Gabon","Gabon","ga",1],"81":["Gambia","Gambia","gm",0],"82":["Georgia","Georgia","ge",0],"83":["Germany","N\u00e9metorsz\u00e1g","de",1],"84":["Ghana","Ghana","gh",1],"85":["Gibraltar","Gibraltar","gi",1],"86":["Greece","G\u00f6r\u00f6gorsz\u00e1g","gr",0],"87":["Greenland","Greenland","gl",1],"88":["Grenada","Grenada","gd",1],"89":["Guadeloupe","Guadeloupe","gp",1],"90":["Guam","Guam","gu",1],"91":["Guatemala","Guatemala","gt",1],"92":["Guernsey","Guernsey","gg",1],"93":["Guinea","Guinea","gn",1],"94":["Guinea-bissau","Guinea-bissau","gw",1],"95":["Guyana","Guyana","gy",1],"96":["Haiti","Haiti","ht",1],"97":["Heard Island And Mcdonald Islands","Heard Island And Mcdonald Islands","hm",1],"98":["Holy See (vatican City State)","Holy See (vatican City State)","va",0],"99":["Honduras","Honduras","hn",1],"100":["Hong Kong","Hong Kong","hk",1],"101":["Hungary","Magyarorsz\u00e1g","hu",1],"102":["Iceland","Izland","is",0],"103":["India","India","in",1],"104":["Indonesia","Indonesia","id",0],"105":["Iran, Islamic Republic Of","Ir\u00e1n","ir",0],"106":["Iraq","Irak","iq",0],"107":["Ireland","\u00cdrorsz\u00e1g","ie",1],"108":["Isle Of Man","Isle Of Man","im",1],"109":["Israel","Izrael","il",1],"110":["Italy","Olaszorsz\u00e1g","it",0],"111":["Jamaica","Jamaica","jm",1],"112":["Japan","Jap\u00e1n","jp",1],"113":["Jersey","Jersey","je",1],"114":["Jordan","Jordan","jo",0],"115":["Kazakhstan","Kazakhstan","kz",0],"116":["Kenya","Kenya","ke",1],"117":["Kiribati","Kiribati","ki",1],"118":["Korea, Democratic People's Republic Of","Korea, Democratic People's Republic Of","kp",1],"119":["Korea, Republic Of","Korea, Republic Of","kr",0],"120":["Kuwait","Kuwait","kw",1],"121":["Kyrgyzstan","Kyrgyzstan","kg",0],"122":["Lao People's Democratic Republic","Lao People's Democratic Republic","la",0],"123":["Latvia","Latvia","lv",0],"124":["Lebanon","Lebanon","lb",0],"125":["Lesotho","Lesotho","ls",1],"126":["Liberia","Liberia","lr",1],"127":["Libya","Libya","ly",0],"128":["Liechtenstein","Liechtenstein","li",1],"129":["Lithuania","Litv\u00e1nia","lt",0],"130":["Luxembourg","Luxembourg","lu",0],"131":["Macao","Macao","mo",1],"132":["Macedonia, The Former Yugoslav Republic Of","Maced\u00f3nia","mk",1],"133":["Madagascar","Madagascar","mg",0],"134":["Malawi","Malawi","mw",1],"135":["Malaysia","Malaysia","my",1],"136":["Maldives","Maldives","mv",1],"137":["Mali","Mali","ml",0],"138":["Malta","M\u00e1lta","mt",1],"139":["Marshall Islands","Marshall Islands","mh",1],"140":["Martinique","Martinique","mq",1],"141":["Mauritania","Mauritania","mr",1],"142":["Mauritius","Mauritius","mu",1],"143":["Mayotte","Mayotte","yt",1],"144":["Mexico","Mexico","mx",1],"145":["Micronesia, Federated States Of","Micronesia, Federated States Of","fm",1],"146":["Moldova, Republic Of","Moldova","md",1],"147":["Monaco","Monaco","mc",1],"148":["Mongolia","Mongolia","mn",0],"149":["Montenegro","Montenegro","me",0],"150":["Montserrat","Montserrat","ms",1],"151":["Morocco","Marokk\u00f3","ma",0],"152":["Mozambique","Mozambique","mz",0],"153":["Myanmar","Myanmar","mm",1],"154":["Namibia","Namibia","na",0],"155":["Nauru","Nauru","nr",1],"156":["Nepal","Nepal","np",0],"157":["Netherlands","Hollandia","nl",1],"158":["New Caledonia","New Caledonia","nc",1],"159":["New Zealand","\u00daj-z\u00e9land","nz",1],"160":["Nicaragua","Nicaragua","ni",1],"161":["Niger","Niger","ne",1],"162":["Nigeria","Nigeria","ng",1],"163":["Niue","Niue","nu",1],"164":["Norfolk Island","Norfolk Island","nf",1],"165":["Northern Mariana Islands","Northern Mariana Islands","mp",1],"166":["Norway","Norv\u00e9gia","no",1],"167":["Oman","Oman","om",0],"168":["Pakistan","Pakiszt\u00e1n","pk",1],"169":["Palau","Palau","pw",1],"170":["Palestinian Territory, Occupied","Palestinian Territory, Occupied","ps",1],"171":["Panama","Panama","pa",1],"172":["Papua New Guinea","Papua New Guinea","pg",1],"173":["Paraguay","Paraguay","py",1],"174":["Peru","Peru","pe",1],"175":["Philippines","Philippines","ph",0],"176":["Pitcairn","Pitcairn","pn",1],"177":["Poland","Lengyelorsz\u00e1g","pl",1],"178":["Portugal","Portug\u00e1lia","pt",1],"179":["Puerto Rico","Puerto Rico","pr",1],"180":["Qatar","Qatar","qa",0],"181":["Reunion","Reunion","re",1],"182":["Romania","Rom\u00e1nia","ro",0],"183":["Russian Federation","Oroszorsz\u00e1g","ru",1],"184":["Rwanda","Rwanda","rw",1],"185":["Saint Barthelemy","Saint Barthelemy","bl",1],"186":["Saint Helena, Ascension And Tristan Da Cunha","Saint Helena, Ascension And Tristan Da Cunha","sh",1],"187":["Saint Kitts And Nevis","Saint Kitts And Nevis","kn",1],"188":["Saint Lucia","Saint Lucia","lc",1],"189":["Saint Martin (french Part)","Saint Martin (french Part)","mf",1],"190":["Saint Pierre And Miquelon","Saint Pierre And Miquelon","pm",1],"191":["Saint Vincent And The Grenadines","Saint Vincent And The Grenadines","vc",1],"192":["Samoa","Samoa","ws",1],"193":["San Marino","San Marino","sm",1],"194":["Sao Tome And Principe","Sao Tome And Principe","st",1],"195":["Saudi Arabia","Saudi Arabia","sa",0],"196":["Senegal","Senegal","sn",0],"197":["Serbia","Szerbia","rs",1],"198":["Seychelles","Seychelles","sc",1],"199":["Sierra Leone","Sierra Leone","sl",1],"200":["Singapore","Szingap\u00far","sg",1],"201":["Sint Maarten (dutch Part)","Sint Maarten (dutch Part)","sx",1],"202":["Slovakia","Szlov\u00e1kia","sk",1],"203":["Slovenia","Szlov\u00e9nia","si",0],"204":["Solomon Islands","Solomon Islands","sb",1],"205":["Somalia","Somalia","so",1],"206":["South Africa","South Africa","za",0],"207":["South Georgia And The South Sandwich Islands","South Georgia And The South Sandwich Islands","gs",1],"208":["South Sudan","South Sudan","ss",1],"209":["Spain","Spanyolorsz\u00e1g","es",1],"210":["Sri Lanka","Sri Lanka","lk",0],"211":["Sudan","Sudan","sd",0],"212":["Suriname","Suriname","sr",1],"213":["Svalbard And Jan Mayen","Svalbard And Jan Mayen","sj",1],"214":["Swaziland","Swaziland","sz",1],"215":["Sweden","Sv\u00e9dorsz\u00e1g","se",1],"216":["Switzerland","Sv\u00e1jc","ch",1],"217":["Syrian Arab Republic","Syrian Arab Republic","sy",1],"218":["Taiwan, Province Of China","Taiwan, Province Of China","tw",1],"219":["Tajikistan","Tajikistan","tj",0],"220":["Tanzania, United Republic Of","Tanzania, United Republic Of","tz",1],"221":["Thailand","Thaif\u00f6ld","th",1],"222":["Timor-leste","Timor-leste","tl",1],"223":["Togo","Togo","tg",1],"224":["Tokelau","Tokelau","tk",1],"225":["Tonga","Tonga","to",1],"226":["Trinidad And Tobago","Trinidad And Tobago","tt",1],"227":["Tunisia","Tun\u00e9zia","tn",1],"228":["Turkey","T\u00f6r\u00f6korsz\u00e1g","tr",1],"229":["Turkmenistan","Turkmenistan","tm",0],"230":["Turks And Caicos Islands","Turks And Caicos Islands","tc",1],"231":["Tuvalu","Tuvalu","tv",1],"232":["Uganda","Uganda","ug",1],"233":["Ukraine","Ukrajna","ua",0],"234":["United Arab Emirates","Egyes\u00fclt Arab Emir\u00e1tusok","ae",0],"235":["United Kingdom","Egyes\u00fclt Kir\u00e1lys\u00e1g","gb",1],"236":["United States","Amerikai Egyes\u00fclt \u00c1llamok","us",1],"237":["United States Minor Outlying Islands","United States Minor Outlying Islands","um",1],"238":["Uruguay","Uruguay","uy",1],"239":["Uzbekistan","Uzbekistan","uz",0],"240":["Vanuatu","Vanuatu","vu",1],"241":["Venezuela, Bolivarian Republic Of","Venezuela, Bolivarian Republic Of","ve",1],"242":["Viet Nam","Viet Nam","vn",1],"243":["Virgin Islands, British","Virgin Islands, British","vg",1],"244":["Virgin Islands, U.S.","Virgin Islands, U.S.","vi",1],"245":["Wallis And Futuna","Wallis And Futuna","wf",1],"246":["Western Sahara","Western Sahara","eh",1],"247":["Yemen","Yemen","ye",1],"248":["Zambia","Zambia","zm",0],"249":["Zimbabwe","Zimbabwe","zw",1],"250":["Vatican","Vatik\u00e1n","va",1]},"ww_parameter_types":{"1":["Helyek","place_id"],"2":["Orsz\u00e1gok","country_id"],"3":["Megy\u00e9k","county_id"],"4":["Forr\u00e1sok","sources"],"5":["Ker\u00fcletek","district_id"],"6":["Eml\u00e9km\u0171 t\u00edpus","type_id"],"7":["Kapcsol\u00f3d\u00f3 eml\u00e9km\u0171vek","connected_monuments"],"8":["T\u00e9m\u00e1k","topics"],"9":["Kapcsol\u00f3d\u00f3 hadseregek","connected_corps"],"10":["Alkot\u00f3k","artists,second_artists,creator_artists"],"11":["Alap\u00edt\u00f3k","founders"],"12":["Nemzets\u00e9gek","nationalities"],"13":["Jelk\u00e9pek","symbols"],"14":["Kapcsol\u00f3d\u00f3 \u00e9p\u00fcletek","connected_buildings"],"15":["Kapcsol\u00f3d\u00f3 esem\u00e9nyek","connected_events"],"16":["\u00c1llapotv\u00e1ltoz\u00e1sok","states"],"17":["Fenntart\u00f3k","maintainers"],"18":["Katonai egys\u00e9gek","corps"],"19":["Avat\u00f3k","unveilers"]}};var s,$myPos=!1,$user={'id':0},App={init:function(){Layout.getMyPos(function(my_pos){$myPos=my_pos});Layout.displayHelp();Layout.switchView();Layout.setVars();Layout.scrollTopInit();Layout.handleTabs();Alerts.flashOut();Aria.setView()},};var s,Alerts={settings:{},init:function(){var that=this;s=this.settings},flashOut:function(){var that=this;if($app.flash.length>0){$($app.flash).each(function(key,item){if(item[2]=='modal'){that.flashModal(item[0],item[1],{'removeAfter':item[3]})}else if(item[2]=='bubble'){that.flashBubble(item[0],item[1],{'removeAfter':item[3]})}else{that.flashDiv(item[0],item[1],{'removeAfter':item[3]})}})}
$('.alertContainer').on('closed.bs.alert',function(){$(this).parent('.alertContainer').remove()})},flashDiv:function(text,type,options){options=typeof options=='undefined'?[]:options;var id=typeof options.id=="undefined"?Helper.randId():options.id;if(typeof type=="undefined"){type='info'}
if(typeof options.extraClass=="undefined"){options.extraClass=''}
if(typeof options.delBefore!="undefined"&&options.delBefore){$('.alertContainer').remove()}
if(typeof options.delSameId!="undefined"&&options.delSameId){$('.alertContainer#alert-'+id).remove()}
if((type=='info'||type=='success')&&(typeof options.removeAfter!='undefined'&&options.removeAfter>0)){var plus=options.removeAfter=='undefined'?4000:parseInt(options.removeAfter)*1000;var removeafter=' ia-removeafter="'+(Date.now()+plus)+'" '}else{var removeafter=''}
var target=typeof options.target=='undefined'?'body main':options.target;var dismissable=typeof options.dismissable=='undefined'?!0:options.dismissable;var s='<div class="container"><div class="row clear alertContainer" '+removeafter+' id="alert-'+id+'">'+'<div class="col-md-12 px-0">'+'<div class="alert alert-'+type+' alert-dismissible fade show '+options.extraClass+'" role="alert">'+text;if(dismissable){s+='<a href="#" class="close" data-dismiss="alert" aria-label="Bezárás">'+'<span aria-hidden="true" class="far fa-times-circle"></span>'+'</a>'}
s+='</div>'+'</div>'+'</div>'+'</div>';$(target).prepend(s)},flashBubble:function(text,type,options){options=typeof options=='undefined'?[]:options;var id=typeof options.id==="undefined"?Helper.randId():options.id;if(typeof type==="undefined"){type='info'}
if((typeof options.delBefore!="undefined"&&options.delBefore)||(typeof options.delBefore=="undefined"&&type=='info')){$('.alertContainer').remove()}
if(typeof options.delSameId!="undefined"&&options.delSameId){$('.alertContainer#alert-'+id).remove()}
if((type=='info'||type=='success'||type=='warning')&&((typeof options.removeAfter!='undefined'&&options.removeAfter>0)||typeof options.removeAfter=='undefined')){var plus=options.removeAfter=='undefined'?4000:parseInt(options.removeAfter)*1000;var removeafter=' ia-removeafter="'+(Date.now()+plus)+'" '}else{var removeafter=''}
var bubble='<span class="d-block alert alert-'+type+' alert-dismissible alertContainer" '+removeafter+' role="alert" id="alert-'+id+'">'+text+'<a href="#" class="close" data-dismiss="alert" aria-label="Bezárás">'+'<span aria-hidden="true" class="far fa-times-circle"></span>'+'</a>'+'</span>';$(bubble).appendTo('.bubbleContainer').hide(0).slideDown(300)},flashModal:function(text,type,options){options=typeof options=='undefined'?[]:options;var id=Helper.randId();if(typeof type==="undefined"){type='info'}
$('.modal').modal('hide');$('.modal.alertContainer').remove();if((type=='info'||type=='success')&&(typeof options.removeAfter!='undefined'&&options.removeAfter>0)){var plus=options.removeAfter=='undefined'?4000:parseInt(options.removeAfter)*1000;var removeafter=' ia-removeafter="'+(Date.now()+plus)+'" '}else{var removeafter=''}
$('body').append('<div class="modal alertContainer" id="alert-'+id+'" '+removeafter+' tabindex="-1" role="dialog" aria-hidden="true">'+'<div class="modal-dialog" role="document">'+'<div class="alert alert-'+type+' alert-dismissible">'+'<a href="#" class="close" data-dismiss="modal" aria-label="Bezárás">'+'<span aria-hidden="true" class="far fa-times-circle"></span>'+'</a>'+text+'</div>'+'</div>'+'</div>');$('#alert-'+id).modal()},};var s,Aria={settings:{},init:function(){s=this.settings;this.bindUIActions()},bindUIActions:function(){var that=this;$('.ariaSwitch').on('click',function(e){if($('body').hasClass('aria')){that.ariaOff()}else{that.ariaOn()}});var textSize=1;$('.textSize').on('click',function(e){var rate=eval($(this).data('size'));textSize=textSize+(1*rate/100);that.setText(textSize)});$('.textSizeReset').on('click',function(e){that.setText(!1)})},setText:function(textSize){if(textSize>0){$('main *').css('font-size',textSize+'em');Store.set('testSize',textSize)}else{Store.remove('testSize');location.reload()}},setView:function(){var that=this;if(Store.get('aria')==1){that.ariaOn()}else{$('.aria-show').addClass('d-none')}
if(Store.get('testSize')>0){that.setText(Store.get('testSize'))}},ariaOn:function(){$('body').addClass('aria');$('.aria-show').removeClass('d-none');$('.aria-hide').addClass('d-none');Store.set('aria',1)},ariaOff:function(){$('body').removeClass('aria');$('.aria-show').addClass('d-none');$('.aria-hide').removeClass('d-none');Store.set('aria',0)},};var s,Autocomplete={settings:{focus:{},lastval:{},},init:function(){s=this.settings;this.bindUIActions();this.inputId=''},bindUIActions:function(){var i=0;Store.set('autoVal','');if($('[ia-autouser]')[0]){$('[ia-auto]').attr('autocomplete','ne-toltsd-ki');this.checkUserValues();this.watchUserInputs()}
if($('[ia-auto]')[0]){$('[ia-auto]').attr('autocomplete','ne-toltsd-ki');this.watchInputs()}},watchInputs:function(){$('[ia-auto]').each(function(key,elem){Autocomplete.settings.focus[$(elem).attr('id')]=0;Autocomplete.settings.lastval[$(elem).attr('id')]=$(elem).val()});$(document).on('keyup','[ia-auto]',_delay(function(e){e.preventDefault();var that=this,val=$(this).val(),addAllowed=!1,modelName=$(this).attr('ia-auto'),minChar=$(this).attr('ia-auto-min')?$(this).attr('ia-auto-min'):2,queryField=$(this).attr('ia-auto-query'),selectKey=$(this).attr('ia-auto-key'),selectTarget=$(this).attr('ia-auto-target');if($(this).attr('ia-auto-add')=='true'){addAllowed=!0}else if($(this).attr('ia-auto-add')&&$(this).attr('ia-auto-add')!=''){addAllowed=$(this).attr('ia-auto-add')}
$('#new-item-info-'+$(that).attr('id')).remove();if(e.keyCode!=38&&e.keyCode!=40&&e.keyCode!=14&&e.keyCode!=27&&$(this).is(':focus')&&val.length>=minChar&&Autocomplete.settings.lastval[$(this).attr('id')]!=$(this).val()){Autocomplete.unkownValue(that,selectTarget,addAllowed);var list=Http.get('api/autocompletes?m='+modelName+'&f='+queryField+'&v='+val,function(response){Autocomplete.buildDropdown(that,response,selectKey);var wasSame=!1;$(response).each(function(key,elem){if(elem.value.toLocaleLowerCase()==val.toLocaleLowerCase()){$(that).data('selected',elem.value);$(selectTarget).val(elem[selectKey]);wasSame=!0}})})}else if(val.length<minChar){$(selectTarget).val(0);_delay(function(){Autocomplete.notEnough(that,selectTarget,minChar);$('.autocomplete-dropdown').remove()},1000)}else if(!$(this).is(':focus')){$('.autocomplete-dropdown').remove()}},300));$(document).on('keyup','[ia-auto]',function(e){e.preventDefault();var selectTarget=$(this).attr('ia-auto-target'),i=Autocomplete.settings.focus[$(this).attr('id')];if($('.autocomplete-dropdown')[0]&&$(this).is(':focus')&&e.keyCode==38){if(i>0){i--;$(".autocomplete-dropdown a").removeClass("active");$($(".autocomplete-dropdown a")[i]).addClass("active")}}
if($('.autocomplete-dropdown')[0]&&$(this).is(':focus')&&e.keyCode==40){if(i<$(".autocomplete-dropdown a").length-1){i++;$(".autocomplete-dropdown a").removeClass("active");$($(".autocomplete-dropdown a")[i]).addClass("active")}}
if($('.autocomplete-dropdown')[0]&&e.keyCode==13){if($($(".autocomplete-dropdown a")[i]).data('key')){Autocomplete.selectItem($($(".autocomplete-dropdown a")[i]).data('key'),$($(".autocomplete-dropdown a")[i]).data('value'),this,selectTarget)}}
Autocomplete.settings.focus[$(this).attr('id')]=i});$(document).on('click','.autocomplete-dropdown a.dropdown-item:not(.item-create)',function(e){e.preventDefault();var clicked=this,parent_id='#'+$(this).parent('div.dropdown-menu').data('parent-id');Autocomplete.selectItem($(clicked).data('key'),$(clicked).data('value'),parent_id,$(parent_id).attr('ia-auto-target'))})},buildDropdown:function(field,response,selectKey){var link_list='',container_class='auto-dropdown-container-'+$(field).attr('id'),addAllowed=!1,selectTarget=$(field).attr('ia-auto-target');if($(field).attr('ia-auto-add')=='true'){addAllowed=!0}else if(typeof $(field).attr('ia-auto-add')!=undefined&&$(field).attr('ia-auto-add')!=''){addAllowed=$(field).attr('ia-auto-add')}
$('.autocomplete-dropdown').remove();Autocomplete.settings.focus[$(field).attr('id')]=0;if($('.'+container_class).length==0){$(field).wrap('<div class="dropdown '+container_class+'"></div>')}
if(response.length>0){$.each(response,function(key,elem){link_list+='<a href="#" class="dropdown-item pt-2" '+'data-key="'+elem[selectKey]+'" data-label="'+elem.label+'" data-value="'+elem.value+'">';link_list+='<span class="d-inline-block py-1">'+elem.label+'</span>';link_list+='</a>'});$(field).after('<div class="dropdown-menu dropdown-no-focus show autocomplete-dropdown" '+' data-parent-id="'+$(field).attr('id')+'">'+link_list+'</div>');$(field).focus();Autocomplete.settings.focus[$(field).attr('id')]=0;i=Autocomplete.settings.focus[$(field).attr('id')];$($(".autocomplete-dropdown a")[i]).addClass("active")}else{Autocomplete.unkownValue(field,selectTarget,addAllowed)}
$(document).on('click',':not(.autocomplete-dropdown)',function(){$('.autocomplete-dropdown').remove()})},selectItem:function(selectedKey,selectedLabel,inputId,targetField){$(targetField).val(selectedKey);$(inputId).val(selectedLabel).data('selected',selectedLabel);if($(inputId).attr('ia-auto-target-run')){eval(Helper.ucfirst($(inputId).attr('ia-auto-target-run')))(selectedKey,selectedLabel)}
$('#new-item-info-'+$(inputId).attr('id')).remove();Autocomplete.settings.lastval[$(inputId).attr('id')]=$(inputId).val();$('.autocomplete-dropdown').remove()},notEnough:function(field,selectTarget,minChar){$(selectTarget).val(0);var s='<div class="dropdown-menu dropdown-no-focus show autocomplete-dropdown"'+'data-parent-id="'+$(field).attr('id')+'"><div class="dropdown-header">Legalább '+minChar+' karaktert adj meg.</div>';s+='</div>';$(field).after(s);$(field).focus()},unkownValue:function(field,selectTarget,addAllowed){$(selectTarget).val(0);var s='<div class="dropdown-menu dropdown-no-focus show autocomplete-dropdown"'+'data-parent-id="'+$(field).attr('id')+'"><div class="dropdown-header">Nincs találat</div>';if(addAllowed){s+=Html.link('Új létrehozása','#',{'icon':'plus','ia-bind':addAllowed,'ia-pass':$(field).val(),'ia-confirm':'Biztosan létrehozod az új elemet, mert nem találod a felajánlottak között?','class':'dropdown-item item-create'})}
s+='</div>';$(field).after(s);$(field).focus();if(addAllowed){Appbase.confirm_links()}},watchUserInputs:function(){$(document).on('keyup','[ia-autouser]',_delay(function(e){e.preventDefault();var that=this,val=$(this).val(),minChar=$(this).attr('ia-autouser-min'),queryField=$(this).attr('ia-autouser-query'),selectKey=$(this).attr('ia-autouser-key'),selectLabel=$(this).attr('ia-autouser-label')?$(this).attr('ia-autouser-label'):queryField,selectImage=$(this).attr('ia-autouser-image')?$(this).attr('ia-autouser-image'):'';if(e.keyCode!=38&&e.keyCode!=40&&(!Store.get('autoVal')||Store.get('autoVal')!=val)&&$(this).is(':focus')&&val.length>=minChar){var list=Http.get('api/users?'+queryField+'='+val+'&order=has_photo',function(response){var link_list='';$('.autocomplete-dropdown').remove();if(response.length>0){$.each(response,function(key,elem){link_list+='<a href="#" class="dropdown-item pt-2" '+'data-key="'+elem[selectKey]+'" data-label="'+elem[selectLabel]+'" data-image="'+elem[selectImage]+'">';if(elem[selectImage]!=''){link_list+='<img src="/tagok/'+elem[selectImage]+'_3.jpg" class="rounded-circle img-fluid float-left mr-2" width="30">'}
link_list+='<span class="d-inline-block py-1">'+elem[selectLabel]+'</span>';link_list+='</a>'});$(that).parent().addClass('dropdown');$(that).after('<div class="dropdown-menu dropdown-no-focus show autocomplete-dropdown user-auto" '+'data-parent-id="'+$(that).attr('id')+'">'+link_list+'</div>');i=0;$($(".autocomplete-dropdown a")[i]).addClass("active")}else{$(that).parent().addClass('dropdown');$(that).after('<div class="dropdown-menu dropdown-no-focus show autocomplete-dropdown user-auto" '+'data-parent-id="'+$(that).attr('id')+'"><div class="dropdown-header">Nincs találat</div></div>')}
Store.set('autoVal',val)})}else if(val.length<minChar||!$(this).is(':focus')){$('.autocomplete-dropdown').remove();Store.set('autoVal','')}},500));$(document).on('keyup','[ia-autouser]',function(e){e.preventDefault();if($('.autocomplete-dropdown')[0]&&$(this).is(':focus')&&e.keyCode==38){if(i>0){i--;$(".autocomplete-dropdown a").removeClass("active");$($(".autocomplete-dropdown a")[i]).addClass("active")}}
if($('.autocomplete-dropdown')[0]&&$(this).is(':focus')&&e.keyCode==40){if(i<$(".autocomplete-dropdown a").length-1){i++;$(".autocomplete-dropdown a").removeClass("active");$($(".autocomplete-dropdown a")[i]).addClass("active")}}
if($('.autocomplete-dropdown')[0]&&e.keyCode==13){Autocomplete.selectUserItem($($(".autocomplete-dropdown a")[i]).data('key'),$($(".autocomplete-dropdown a")[i]).data('label'),$($(".autocomplete-dropdown a")[i]).data('image'),$(this).attr('id'))}});$(document).on('click','.autocomplete-dropdown.user-auto a.dropdown-item',function(e){e.preventDefault();var clicked=this;Autocomplete.selectUserItem($(clicked).data('key'),$(clicked).data('label'),$(clicked).data('image'),$(clicked).parent('.dropdown-menu').data('parent-id'))})},checkUserValues:function(){$('[ia-autouser]').each(function(key,elem){if($(this).val()!=''){var that=this,val=$(this).val(),queryField=$(this).attr('ia-autouser-query'),selectKey=$(this).attr('ia-autouser-key'),selectLabel=$(this).attr('ia-autouser-label')?$(this).attr('ia-autouser-label'):queryField,selectImage=$(this).attr('ia-autouser-image')?$(this).attr('ia-autouser-image'):'';var list=Http.get('api/users?'+selectKey+'='+val,function(response){if(response.length==1){Autocomplete.selectUserItem(response[0][selectKey],response[0][selectLabel],response[0][selectImage],$(that).attr('id'))}})}})},selectUserItem:function(selectedKey,selectedLabel,selectedImage,inputId){$('#selectedValue-'+inputId).remove();var image=selectedImage!=''?'<img src="/tagok/'+selectedImage+'_3.jpg" class="rounded-circle img-fluid float-left mr-1 mr-md-2" width="30" />':'';$('#'+inputId+'Help').addClass('d-none');$('#'+inputId).val(selectedKey).addClass('d-none').after('<div id="selectedValue-'+inputId+'">'+'<span class="badge badge-secondary pt-2 px-md-3 pb-1">'+image+'<h5 class="d-inline-block">'+selectedLabel+'</h5>'+'<a href="#" class="pl-1 pl-md-5 pr-1 d-inline-block delAutocompleteSelected" data-id="del-'+inputId+'">'+'<span class="far fa-times-circle fa-2x pt-1 text-white"></span>'+'</a>'+'</span></div>');if($('#'+inputId).attr('ia-autouser-next-focus')){$($('#'+inputId).attr('ia-autouser-next-focus')).focus()}
$('.autocomplete-dropdown').remove();$(document).on('click','.delAutocompleteSelected',function(e){e.preventDefault();Autocomplete.delUserItem($(this).data('id').split('del-')[1])});Forms.autoSave()},delUserItem:function(delInputId){$('#selectedValue-'+delInputId).remove();$('#'+delInputId+'Help').removeClass('d-none');$('#'+delInputId).removeClass('d-none').val('').focus();Forms.autoSave()},connected_artpiece_add:function(connected_artpiece_id,connected_artpiece_title){if($('.connected-artpiece-row-'+connected_artpiece_id)[0]){return!0}
var s='<div class="row bg-light py-2 mb-2 connected-artpiece-row connected-artpiece-row-'+connected_artpiece_id+'" data-id="'+connected_artpiece_id+'">';s+='<div class="col-6 col-md-2 pb-2 pb-md-0">'+''+'</div>';s+='<div class="col-md-8 col-10 pt-0 pt-lg-2">'+Html.link(connected_artpiece_title,'#',{'artpiece':{'id':connected_artpiece_id,'title':connected_artpiece_title,},'target':'_blank','class':'font-weight-bold',})+'</div>';s+='<div class="col-2 pt-2 text-right">'+Html.link('','#',{'icon':'trash fa-lg','class':'text-muted mr-2 cursor-pointer','ia-confirm':'Biztosan törlöd ezt a kapcsolatot? A szerkesztés jóváhagyásakor a kapcsolódó műlapról is lekerül a kapcsolás.','ia-bind':'autocomplete.connected_artpiece_delete','ia-pass':connected_artpiece_id,'title':'Törlés',})+'</div>';s+='</div>';$('#connected-artpiece-list').append(s);$('#New-connected-artpiece').val('');var array=[];$('.connected-artpiece-row').each(function(key,elem){array.push(''+$(elem).data('id')+'')});$('#Connected-artpieces').val(encodeURI(JSON.stringify(array)))},connected_artpiece_delete:function(connected_artpiece_id){$('.connected-artpiece-row-'+connected_artpiece_id).remove();var array=[];$('.connected-artpiece-row').each(function(key,elem){array.push(''+$(elem).data('id')+'')});$('#Connected-artpieces').val(encodeURI(JSON.stringify(array)))},};var s,Charts={settings:{},init:function(){var that=this;this.load()},load:function(load){var that=this;if($('.chart')[0]){$('.chart').each(function(key,elem){that.draw(elem)})}},draw:function(elem){var that=this,chartDiv=$(elem);var myChart=new Chart(chartDiv,{type:chartDiv.attr('ia-chart-type'),data:{labels:eval(chartDiv.attr('ia-chart-labels')),datasets:[{data:eval(chartDiv.attr('ia-chart-data')),borderWidth:chartDiv.attr('ia-chart-type')=='bar'?1:2,backgroundColor:chartDiv.attr('ia-chart-type')=='bar'?'rgba(254, 147, 76, 0.5)':'rgba(254, 147, 76, 0.2)',borderColor:'#c95b12',}]},options:{legend:{display:!1},title:{display:chartDiv.attr('ia-chart-title')!==undefined?!0:!1,text:chartDiv.attr('ia-chart-title')},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})},};var s,Forms={settings:{},init:function(){s=this.settings;this.bindUIActions();this.autoLoad();this.filePreview()},bindUIActions:function(){var that=this;$('form.autoSave *').keyup(_delay(function(){that.autoSave()},500));if($('[ia-form-change]')[0]){var id=$('[ia-form-change]').attr('id'),listened_events=$('#'+id).attr('ia-form-change').split('||'),changed=!1,ignore=!1;$('#'+id).on('change',':input',function(){changed=!0;if($.inArray('enable_submit',listened_events)>-1){$('#'+id+' input[type=submit]').removeClass('disabled')}
$('input[type=submit]').click(function(){ignore=!0;return!0})})}
if($('[ia-form-change-alert]')[0]){var submitClick=!1;$('[ia-form-change-alert]').on('click','input[type=submit]',function(){submitClick=!0});$('[ia-form-change-alert]').contents().find(':input, :checkbox').bind('change',function(){_c('change');window.onbeforeunload=function(e){if(!submitClick){return _text('nem_mentett_modositasok')}}})}
$(document).on('click','.delForm',function(e){e.preventDefault();that.reset($(this).parent('form').attr('id'))});$(document).on('click','.delFormFiles',function(e){e.preventDefault();that.reset($(this).closest('form').attr('id'),!0);$('.delFormFiles').remove()});$(document).on('click','input[type=submit].disabled',function(e){e.preventDefault()});$(document).on('click','button[ia-form-select-button]',function(e){e.preventDefault();$(this).siblings().removeClass('btn-outline-secondary btn-secondary active');$(this).siblings().addClass('btn-outline-secondary');$(this).removeClass('btn-outline-secondary').addClass('btn-secondary active');$($(this).attr('ia-form-select-button')).val($(this).attr('ia-form-select-value')).trigger('change')});$('.ajaxForm input[type=text], .ajaxForm input[type=email], .ajaxForm input[type=password], .noEnterForm input[type=text], .noEnterForm input[type=email], .noEnterForm input[type=password], .noEnterInput').on('keyup keypress',function(e){var keyCode=e.keyCode||e.which;if(keyCode===13){e.preventDefault()}});$('.controlEnter').keydown(function(e){if(e.ctrlKey&&e.keyCode==13){$(this).closest('form').submit()}});$(document).on('submit','.unsetEmptyFields',function(e){$.each($('.unsetEmptyFields :input'),function(key,input){if($(input).val()==0||$(input).val()==''||$(input).hasClass('unset')){$(input).attr("disabled","disabled")}});setTimeout(function(){return!0},500)});$(document).on('submit','.ajaxForm',function(e){e.preventDefault();var formId=$(this).attr('id'),url=$(this).attr('ia-form-action'),data=Helper.formToObject($(this));Forms.submitForm(formId,data,url)});$(document).on('keyup',':input[required]',function(e){if($(this).val()!=''){if($(this).hasClass('is-invalid')){$(this).removeClass('is-invalid')}
var feedback='#invalid-feedback-'+$(this).attr('id');if($(feedback)[0]){$(feedback).remove()}}})},reset:function(formId,only_files){if(typeof only_files=='undefined'){only_files=!1}
if(only_files){$('#'+formId+' input[type=file]').val('');$('#'+formId+' .filePreviews').remove();return}
$('#'+formId).trigger('reset');$('#'+formId+' [ia-autouser]').each(function(key,elem){Autocomplete.delUserItem($(elem).attr('id'))});if($('#'+formId).hasClass('autoSave')){Store.set('formdata-'+formId,[])}
$('#'+formId+' textarea').css({'height':'auto'});$('#'+formId+' .filePreviews').remove()},resetField:function(field){$(field).val('');return!0},submitForm:function(formId,postData,postUrl){Helper.killAllIntervals();var that=this;this.validateFields(formId);var redirect=$('#'+formId).attr('ia-form-redirect')?$('#'+formId).attr('ia-form-redirect'):!1;if($('#'+formId+' input[type=file]')[0]){$('#'+formId).prepend(Html.loading('form-loading my-2','text-muted','Űrlap mentése...'));var inputId=$($('#'+formId+' [ia-fileupload]:visible')[0]).attr('id');if(typeof $app.files_to_upload[inputId]!='undefined'){var files=$app.files_to_upload[inputId];postData._files=[];files.forEach(function(file){postData._files.push([file[0],file[1].result])});$app.files_to_upload=[]}
$('#'+formId+' .fileInput').collapse('hide');$('#'+formId+' .filePreviews').remove();$('#'+formId+' .delFormFiles').remove()}
Http.request($('#'+formId).attr('ia-form-method')=='put'?'put':'post',{'path':postUrl,'data':postData,'success':function(response){if(response.errors){$('.form-loading').remove();Alerts.flashBubble(response.errors,'danger',{'delBefore':!0})}else{if($('#'+formId).hasClass('autoSave')){that.reset(formId)}
if(response.success){if(redirect){$('#'+formId).html(Html.loading());var url=redirect.replace('{response}',response.success);if(typeof response.message!='undefined'){_redirect(url,[response.message.text,response.message.type])}else{_redirect(url)}}
if($('#'+formId).attr('ia-form-trigger')){$('.form-loading').remove();Appbase.run($('#'+formId).attr('ia-form-trigger'))}}}}})},validateFields:function(formId){$('.alert').remove();return!0},autoSave:function(){$('form.autoSave').each(function(key,elem){var id=typeof $(this).attr('id')!='undefined'?$(this).attr('id'):!1;if(id){Store.set('formdata-'+id,Helper.formToObject($('form#'+id)))}})},autoLoad:function(){if($('form.autoSave')[0]){$('form.autoSave').each(function(key,elem){var id=$(this).attr('id'),formData=Store.get('formdata-'+id);if(formData&&Helper.pJson(formData)){$.each(JSON.parse(formData),function(key,elem){$('#'+id+' [name='+key+']').val(elem)})}
Autocomplete.checkUserValues()})}},filePreview:function(){if($('[ia-previewfile]')[0]){$(document).on('change','[ia-previewfile]',function(){var that=this;var id=$(this).attr('id');$('.filePreviews').remove();$('.delFormFiles').remove();$app.files_to_upload=[];$app.files_to_upload[id]=[];$(that).after('<div class="row filePreviews my-2 py-2 alert-warning"></div>');var files=$(this)[0].files;var loaded=0;var last_name='';var sum_size=0;for(var i=0;i<files.length;i++){(function(file){if($(that).attr('ia-filetype')&&$(that).attr('ia-filetype')=='images'&&file.type.indexOf('image')==-1){$('.filePreviews').after('<div class="text-danger"><strong>Fájl hiba: '+file.name+'</strong> - csak képfájlok feltöltése engedélyezett.</div>');files[i]=null;return}
sum_size+=file.size;if(sum_size>$sDB.limits.photos.max_upload_total*1000000){$('.file-maxsize').remove();$('.filePreviews').after('<div class="text-danger file-maxsize"><strong>Max. 20 MB</strong> feltöltése lehetséges egyszerre. Ami e felett van már, nem mutatjuk.</div>');files[i]=null;return}
if(last_name==file.name){var name=Helper.randId()+'-'+file.name}else{var name=file.name}
last_name=name;var reader=new FileReader();reader.onloadend=function(){var preview=Helper.filePreview(file.type,reader.result);$('.filePreviews').append('<div class="col-md-3 mb-3">'+preview+'<br />'+'<span class="text-muted small">'+name+'</span></div>');$app.files_to_upload[id].push([name,reader]);last_filename=name;loaded++;if(loaded==files.length){$('.filePreviews').removeClass('alert-warning');$('.filePreviews').after('<div><a href="#" class="delFormFiles"><span class="far fa-trash mr-2"></span>Kiválasztott fájlok törlése</a></div>')}}
if(file){reader.readAsDataURL(file)}})(files[i])}
$(document).on('click','.delFile',function(e){e.preventDefault();var previewElement=this,file_name=$(previewElement).data('name'),i=0;$app.files_to_upload[id].forEach(function(elem){if(elem[0]==file_name){$app.files_to_upload[id].splice(i,1);that.files.splice(i,1);$(previewElement).parent('div').remove()}
i++})})})}},checkRequired:function(form){var valid=!0,invalid_visible=!0,invalids=[];if($(form).find(':input[required]')){$(form).find(':input[required]').each(function(key,elem){if($(elem).val()==''){Forms.addInvalidInfo(elem,!0);valid=!1;invalids.push($($(elem).prop('labels')[0]).text())}else{Forms.removeInvalidInfo(elem)}})}
if(!valid){Alerts.flashBubble('Hopp, nincs minden kötelező mező kitöltve! Ezeket keresd: <strong>'+invalids.join('<br /> - ')+'</strong>','danger',{id:'missing-inputvals',delSameId:!0})}
return valid},addInvalidInfo:function(elem,focus,message){var focus=typeof focus=='undefined'?!0:focus;var message=typeof message=='undefined'?'Kérjük töltsd ki ezt a mezőt.':message;if($(elem).hasClass('is-invalid')==!1){$(elem).addClass('is-invalid').after('<div class="invalid-feedback" id="invalid-feedback-'+$(elem).attr('id')+'">'+message+'</div>')}
if(focus){$(elem).focus()}},removeInvalidInfo:function(elem){if($(elem).hasClass('is-invalid')){$(elem).removeClass('is-invalid');$('#invalid-feedback-'+$(elem).attr('id')).remove()}},};var s,Helper={settings:{},init:function(){s=this.settings;this.bindUIActions()},bindUIActions:function(){$(document).on('click','.openUrl',function(e){e.preventDefault();var url=$(this).attr('data-url');if(url!==undefined){window.location.href=decodeURIComponent(url)}})},randId:function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},rand_interval:function(min,max){return Math.floor(Math.random()*(max+1))+min},stripTags:function(str){return str.replace(/(<([^>]+)>)/ig,"")},urlParams:function(obj){var str="";for(var key in obj){if(str!=""){str+="&"}
str+=key+"="+encodeURIComponent(obj[key])}
return str},getURLHashParameter:function(key){var matches=location.hash.match(new RegExp(key+'=([^&]*)'));return matches?matches[1]:null},getURLParameter:function(name){var resp=decodeURI((RegExp(name+'='+'(.+?)(&|$)').exec(window.location.search)||[,'isempty'])[1]);return resp==='isempty'?!1:resp},getUrlLastPart:function(){var path=window.location.href;if(path.indexOf('#')!==-1){path=path.split('#')[0]}
if(path.indexOf('?')!==-1){path=path.split('?')[0]}
var urlParts=path.split('/');return urlParts[urlParts.length-1]},getDomain:function(url){if(url.indexOf('http')>-1){var urlpattern=new RegExp("(http|ftp|https)://(.*?)/.*$");var parsedurl=url.match(urlpattern);return typeof parsedurl[2]!='undefined'?parsedurl[2]:url}else{return url}},preloadImg:function(url){var img=new Image();img.src=url;return img},urlIsImage:function(url,callback){if(url.indexOf('fajl_mutato')!==1){Http.get(url+'?type',function(response){if(response.indexOf('image')!==-1){callback()}},{datatype:'text'})}else if(url.indexOf('jpg')!==-1||url.indexOf('jpeg')!==-1||url.indexOf('png')!==-1||url.indexOf('gif')!==-1||url.indexOf('bmp')!==-1){callback()}
return!1},truncate:function(str,length,strip_tags){if(typeof strip_tags!='undefined'&&strip_tags){str=Helper.stripTags(str)}
return str.length>length?str.substring(0,length-3)+'...':str},textFormat:function(str,nl2br){if(typeof nl2br=='undefined'){var nl2br=!0}
return nl2br?Helper.nl2br(str):str},nl2br:function(str){if(typeof str==='undefined'||str===null){return''}
var breakTag='<br>';return(str+'').replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,'$1'+breakTag+'$2')},timeAgoInWords:function(timestamp,format){var t;if(typeof format==="undefined"){var format='ago'}
var now=Math.floor(new Date().getTime()/1000),nowTime=new Date(timestamp*1000),timestampTime=new Date(timestamp*1000);if(timestamp>now-30*24*60*60){switch(!0){case timestamp>now-60:t='épp most';break;case timestamp>now-60*60:t=Math.floor((now-timestamp)/60)+' perce';break;case timestamp>now-40*60*60:t=Math.floor((now-timestamp)/(60*60))+' órája';break;default:t=Math.ceil((now-timestamp)/(60*60*24))+' napja';break}}else{t=timestampTime.getFullYear()<nowTime.getFullYear()?this.timeConverter(timestamp):this.timeConverter(timestamp,'')}
return t},timeConverter:function(timestamp,type,ago){if(typeof ago==='undefined'){var ago=!1}
var a=new Date(timestamp*1000);var year=a.getFullYear();var month=a.getMonth()+1;var date=a.getDate();var hour=a.getHours();var min=a.getMinutes();var sec=a.getSeconds();month=month<10?'0'+month:month;date=date<10?'0'+date:date;hour=hour<10?'0'+hour:hour;min=min<10?'0'+min:min;sec=sec<10?'0'+sec:sec;if(typeof(type)!=='undefined'&&type=='short'){var time=month+'.'+date+'.'+' '+hour+':'+min}else{var time=year+'.'+month+'.'+date+'. '+hour+':'+min}
if(typeof(type)!=='undefined'&&type=='full'){time+=':'+sec}
if(ago){return'<span ia-timestamp="'+timestamp+'" title="'+time+'">'+this.timeAgoInWords(timestamp)+'</span>'}else{return time}},timeToDate:function(timestamp){var a=new Date(timestamp*1000);var year=a.getFullYear();var month=a.getMonth()+1;var date=a.getDate();month=month<10?'0'+month:month;date=date<10?'0'+date:date;var time=year+'.'+month+'.'+date+'.';return time},today:function(diff){if(typeof(diff)=="undefined"){diff=0}
var today=new Date();today.setDate(today.getDate()+parseInt(diff));var dd=today.getDate(),mm=today.getMonth()+1,yyyy=today.getFullYear();if(dd<10){dd='0'+dd}
if(mm<10){mm='0'+mm}
today=yyyy+'-'+mm+'-'+dd;return today},now:function(separator,type){if(typeof(separator)=='undefined'){separator='.'}
var a=new Date();var year=a.getFullYear();var month=a.getMonth()+1;var date=a.getDate();var hour=a.getHours();var min=a.getMinutes();var sec=a.getSeconds();month=month<10?'0'+month:month;date=date<10?'0'+date:date;hour=hour<10?'0'+hour:hour;min=min<10?'0'+min:min;sec=sec<10?'0'+sec:sec;var time=year+separator+month+separator+date+' '+hour+':'+min;if(typeof(type)!=='undefined'&&type=='full'){time+=':'+sec}
return time},caseConvert:function(value,newCase){if(newCase==='lower'){return $.trim(value).replace(/ +/g,' ').toLocaleLowerCase()}
if(newCase==='upper'){return $.trim(value).replace(/ +/g,' ').toLocaleUpperCase()}},/**
      slugify: function (text) {
        return text.toString().toLowerCase()
          .replace(/\s+/g, '-')           // Replace spaces with -
          .replace(/[^\w\-]+/g, '')       // Remove all non-word chars
          .replace(/\-\-+/g, '-')         // Replace multiple - with single -
          .replace(/^-+/, '')             // Trim - from start of text
          .replace(/-+$/, '');            // Trim - from end of text
      },
    */

    /**
     *
     * Slugosító, hogy menjenek az ékezetek
     *
     * INNEN:
     * https://gist.github.com/sgmurphy/3095196
     *
     * Create a web friendly URL slug from a string.
     *
     * Requires XRegExp (http://xregexp.com) with unicode add-ons for UTF-8 support.
     *
     * Although supported, transliteration is discouraged because
     *     1) most web browsers support UTF-8 characters in URLs
     *     2) transliteration causes a loss of information
     *
     * @author Sean Murphy <sean@iamseanmurphy.com>
     * @copyright Copyright 2012 Sean Murphy. All rights reserved.
     * @license http://creativecommons.org/publicdomain/zero/1.0/
     *
     * @param string s
     * @param object opt
     * @return string
     */
slugify:function(s,opt){s=String(s);opt=Object(opt);var defaults={'delimiter':'-','limit':undefined,'lowercase':!0,'replacements':{},'transliterate':(typeof(XRegExp)==='undefined')?!0:!1};for(var k in defaults){if(!opt.hasOwnProperty(k)){opt[k]=defaults[k]}}
var char_map={'À':'A','Á':'A','Â':'A','Ã':'A','Ä':'A','Å':'A','Æ':'AE','Ç':'C','È':'E','É':'E','Ê':'E','Ë':'E','Ì':'I','Í':'I','Î':'I','Ï':'I','Ð':'D','Ñ':'N','Ò':'O','Ó':'O','Ô':'O','Õ':'O','Ö':'O','Ő':'O','Ø':'O','Ù':'U','Ú':'U','Û':'U','Ü':'U','Ű':'U','Ý':'Y','Þ':'TH','ß':'ss','à':'a','á':'a','â':'a','ã':'a','ä':'a','å':'a','æ':'ae','ç':'c','è':'e','é':'e','ê':'e','ë':'e','ì':'i','í':'i','î':'i','ï':'i','ð':'d','ñ':'n','ò':'o','ó':'o','ô':'o','õ':'o','ö':'o','ő':'o','ø':'o','ù':'u','ú':'u','û':'u','ü':'u','ű':'u','ý':'y','þ':'th','ÿ':'y','©':'(c)','Α':'A','Β':'B','Γ':'G','Δ':'D','Ε':'E','Ζ':'Z','Η':'H','Θ':'8','Ι':'I','Κ':'K','Λ':'L','Μ':'M','Ν':'N','Ξ':'3','Ο':'O','Π':'P','Ρ':'R','Σ':'S','Τ':'T','Υ':'Y','Φ':'F','Χ':'X','Ψ':'PS','Ω':'W','Ά':'A','Έ':'E','Ί':'I','Ό':'O','Ύ':'Y','Ή':'H','Ώ':'W','Ϊ':'I','Ϋ':'Y','α':'a','β':'b','γ':'g','δ':'d','ε':'e','ζ':'z','η':'h','θ':'8','ι':'i','κ':'k','λ':'l','μ':'m','ν':'n','ξ':'3','ο':'o','π':'p','ρ':'r','σ':'s','τ':'t','υ':'y','φ':'f','χ':'x','ψ':'ps','ω':'w','ά':'a','έ':'e','ί':'i','ό':'o','ύ':'y','ή':'h','ώ':'w','ς':'s','ϊ':'i','ΰ':'y','ϋ':'y','ΐ':'i','Ş':'S','İ':'I','Ç':'C','Ü':'U','Ö':'O','Ğ':'G','ş':'s','ı':'i','ç':'c','ü':'u','ö':'o','ğ':'g','А':'A','Б':'B','В':'V','Г':'G','Д':'D','Е':'E','Ё':'Yo','Ж':'Zh','З':'Z','И':'I','Й':'J','К':'K','Л':'L','М':'M','Н':'N','О':'O','П':'P','Р':'R','С':'S','Т':'T','У':'U','Ф':'F','Х':'H','Ц':'C','Ч':'Ch','Ш':'Sh','Щ':'Sh','Ъ':'','Ы':'Y','Ь':'','Э':'E','Ю':'Yu','Я':'Ya','а':'a','б':'b','в':'v','г':'g','д':'d','е':'e','ё':'yo','ж':'zh','з':'z','и':'i','й':'j','к':'k','л':'l','м':'m','н':'n','о':'o','п':'p','р':'r','с':'s','т':'t','у':'u','ф':'f','х':'h','ц':'c','ч':'ch','ш':'sh','щ':'sh','ъ':'','ы':'y','ь':'','э':'e','ю':'yu','я':'ya','Є':'Ye','І':'I','Ї':'Yi','Ґ':'G','є':'ye','і':'i','ї':'yi','ґ':'g','Č':'C','Ď':'D','Ě':'E','Ň':'N','Ř':'R','Š':'S','Ť':'T','Ů':'U','Ž':'Z','č':'c','ď':'d','ě':'e','ň':'n','ř':'r','š':'s','ť':'t','ů':'u','ž':'z','Ą':'A','Ć':'C','Ę':'e','Ł':'L','Ń':'N','Ó':'o','Ś':'S','Ź':'Z','Ż':'Z','ą':'a','ć':'c','ę':'e','ł':'l','ń':'n','ó':'o','ś':'s','ź':'z','ż':'z','Ā':'A','Č':'C','Ē':'E','Ģ':'G','Ī':'i','Ķ':'k','Ļ':'L','Ņ':'N','Š':'S','Ū':'u','Ž':'Z','ā':'a','č':'c','ē':'e','ģ':'g','ī':'i','ķ':'k','ļ':'l','ņ':'n','š':'s','ū':'u','ž':'z'};for(var k in opt.replacements){s=s.replace(RegExp(k,'g'),opt.replacements[k])}
if(opt.transliterate){for(var k in char_map){s=s.replace(RegExp(k,'g'),char_map[k])}}
var alnum=(typeof(XRegExp)==='undefined')?RegExp('[^a-z0-9]+','ig'):XRegExp('[^\\p{L}\\p{N}]+','ig');s=s.replace(alnum,opt.delimiter);s=s.replace(RegExp('['+opt.delimiter+']{2,}','g'),opt.delimiter);s=s.substring(0,opt.limit);s=s.replace(RegExp('(^'+opt.delimiter+'|'+opt.delimiter+'$)','g'),'');return opt.lowercase?s.toLowerCase():s},replaceAll__:function(omit,place,string,prevstring){if(prevstring&&string===prevstring)
return string;prevstring=string.replace(omit,place);return this.replaceAll(omit,place,prevstring,string)},replaceAll:function(from,to,string){if(typeof string=='undefined'){return''}
string=string.toString();return string.replace(new RegExp(from,'g'),to)},decodeHTMLEntities:function(text){return $('<textarea/>').html(text).text()},numberFormat:function(number,sep){sep=typeof sep=="undefined"?' ':sep;number=typeof number!="undefined"&&number>0?number:"";number=number.replace(new RegExp("^(\\d{"+(number.length%3?number.length%3:0)+"})(\\d{3})","g"),"$1"+sep+"$2").replace(/(\d{3})+?/gi,"$1.");number=(number.length&&number[0]=='.')?number.slice(1):number;number=(number.length&&number[number.length-1]=='.')?number.slice(0,-1):number;if(sep!="."){number=number.replace(/\s/g,sep)}
return number==''?'-':number},number:function(n,d){d=typeof d=='undefined'?0:d;return'<span class="small-spaces text-nowrap">'+this.numberFormat(n.toFixed(d))+'</span>'},show_distance:function(distance,options){return parseInt(distance)<1000?parseInt(distance)+'m':Helper.number(distance/1000,1)+'km'},distance:function(lat1,lon1,lat2,lon2,unit){if((lat1==lat2)&&(lon1==lon2)){return 0}else{var radlat1=Math.PI*lat1/180;var radlat2=Math.PI*lat2/180;var theta=lon1-lon2;var radtheta=Math.PI*theta/180;var dist=Math.sin(radlat1)*Math.sin(radlat2)+Math.cos(radlat1)*Math.cos(radlat2)*Math.cos(radtheta);if(dist>1){dist=1}
dist=Math.acos(dist);dist=dist*180/Math.PI;dist=dist*60*1.1515;dist=dist*1.609344;if(typeof unit!='undefined'&&unit=='m'){dist=Math.round(dist*1000)}
return dist}},getArrayItem:function(array,key_name,key_value){var item=!1;if(typeof array!=='undefined'){$(array).each(function(index,elem){if(elem[key_name]==key_value){item=array[index]}})}
return item},replaceArrayItem:function(array,key_name,key_value,new_item){var item=!1;if(typeof array!=='undefined'){$(array).each(function(index,elem){if(elem[key_name]==key_value){item=!0;array[index]=new_item}})}
return item},updateArrayItem:function(array,key_name,key_value,set_key_name,set_key_value){var item=!1;if(typeof array!=='undefined'){$(array).each(function(index,elem){if(elem[key_name]==key_value){item=array[index];item[set_key_name]=set_key_value;array[index]=item}})}
return array},updateArray:function(array,set_key_name,set_key_value){var item=!1;if(typeof array!=='undefined'){$(array).each(function(index,elem){item=array[index];item[set_key_name]=set_key_value;array[index]=item})}
return array},delArrayItem:function(array,key_name,key_value){if(typeof array!=='undefined'){$(array).each(function(index,elem){if(elem[key_name]==key_value){array.splice(index,1)}});return array}
array=[];return array},inArrayByKeyValue:function(array,key_name,key_value){var fffound=!1;if(typeof array!=='undefined'){$(array).each(function(index,elem){if(elem[key_name]==key_value){fffound=!0}})}
return fffound},extendObject:function(obj,src){for(var key in src){if(src.hasOwnProperty(key))obj[key]=src[key]}
return obj},ucfirst:function(string){return string.charAt(0).toUpperCase()+string.slice(1)},formToObject:function(form,excluded_keys){var formData={};var formJSON=$(form).serializeJSON();var formObject=JSON.parse(formJSON);var excluded_keys=typeof excluded_keys=='undefined'?[]:excluded_keys;$.each(formObject,function(key,elem){if($.inArray(key,excluded_keys)===-1){formData[key]=typeof elem=='object'?Helper.cleanObject(elem):elem}});return formData},cleanObject:function(obj){var filtered=obj.filter(function(el){return el!=null});return filtered},sortObject:function(obj){var ordered={};Object.keys(obj).sort().forEach(function(key){ordered[key]=obj[key]});return ordered},cleanArray:function(array){var array_=[];$(array).each(function(key,elem){if(typeof elem!='undefined'&&elem!=null){array_[eval(key)]=$.makeArray(elem)}});return array_},pJson:function(str){try{var object=JSON.parse(str)}catch(e){return!1}
return object},arraize:function(string,delimiter){var array;if(string!=''&&string.indexOf(delimiter)){array=string.split(delimiter)}else{array=[string]}
return array},arrayWithoutMe:function(array){if($app.auth){var me=$('.whatsmyname').html();array.splice(array.indexOf(me),1);return array}else{return array}},filePreview:function(type,src,image_class,icon_class){var preview,image_class=typeof image_class=='undefined'?'img-thumbnail':image_class,icon_class=typeof icon_class=='undefined'?'fa-4x fa-border text-muted':icon_class;switch(!0){case(type).indexOf('image')>-1:preview='<img src="'+src+'" class="'+image_class+'" id="previmage" />';break;case(type).indexOf('pdf')>-1:preview='<span class="far fa-file-pdf '+icon_class+'"></span>';break;case(type).indexOf('text/plain')>-1:preview='<span class="far fa-file-alt '+icon_class+'"></span>';break;case(type).indexOf('excel')>-1:preview='<span class="far fa-file-excel '+icon_class+'"></span>';break;case(type).indexOf('word')>-1:preview='<span class="far fa-file-word '+icon_class+'"></span>';break;case(type).indexOf('audio')>-1:preview='<span class="far fa-file-audio '+icon_class+'"></span>';break;case(type).indexOf('video')>-1:preview='<span class="far fa-file-video '+icon_class+'"></span>';break;default:preview='<span class="far fa-file '+icon_class+'"></span>';break}
return preview},getDirection:function(endpoint,startpoint){var x1=endpoint[0],y1=endpoint[1],x2=startpoint[0],y2=startpoint[1];var radians=getAtan2((y1-y2),(x1-x2));function getAtan2(y,x){return Math.atan2(y,x)};var compassReading=radians*(180/Math.PI);var rotation=compassReading>0?compassReading:360+compassReading;var coordNames=["É","ÉK","K","DK","D","DNy","Ny","ÉNy","É"];var coordIndex=Math.round(compassReading/45);if(coordIndex<0){coordIndex=coordIndex+8};return[parseInt(rotation),coordNames[coordIndex]]},killAllIntervals:function(){$.each($app.ic,function(key,name){clearInterval($app.ic[name])})},getFavicon:function(){var favicon=undefined;var nodeList=document.getElementsByTagName("link");for(var i=0;i<nodeList.length;i++){if((nodeList[i].getAttribute("rel")=="icon")||(nodeList[i].getAttribute("rel")=="shortcut icon")){favicon=nodeList[i].getAttribute("href")}}
return favicon},};var Html={init:function(){},loading:function(div_class,icon_classes,text){var div_class=typeof div_class=='undefined'?'my-4':div_class;var icon_classes=typeof icon_classes=='undefined'?'text-muted':icon_classes;var s='<span class="far fa-compass fa-spin fa-lg '+icon_classes+'"></span>';var text=typeof text!='undefined'?'<span class="ml-2 text-muted">'+text+'</span>':'';s='<div class="'+div_class+'">'+s+text+'</div>';return s},overlay:function(method,options){var options=_arr(options,{type:'page',loading:!0,});var content='';if(options.loading){content=Html.loading('my-5 py-5 text-center','my-5 fa-3x text-white')}
$('.'+options.type+'-overlay').html(content);if(method=='show'){$('.'+options.type+'-overlay').removeClass('d-none')}else{$('.'+options.type+'-overlay').addClass('d-none')}},link:function(text,url,options){if(url=='referer'||url=='here'||url=='false'){url=$app.here}
if(typeof options=='undefined'){var options={}}
if(typeof options.id=='undefined'){options.id='link-'+Helper.randId()}
if(typeof options.title!='undefined'){options['data-toggle']='tooltip'}
if(typeof options.icon!='undefined'||typeof options.icon_right!='undefined'){var icon=typeof options.icon!='undefined'?options.icon:options.icon_right;var margin=text!=''?'1':'0',fa_style='far';if(icon.indexOf(' fas')>-1){fa_style='fas'}else if(icon.indexOf(' far')>-1){fa_style='far'}else if(icon.indexOf(' fal')>-1){fa_style='fal'}else if(icon.indexOf(' fab')>-1){fa_style='fab'}
if(typeof options.icon!='undefined'){text='<span class="'+fa_style+' fa-'+icon+' fa-fw mr-'+margin+'"></span>'+'<span class="link-text">'+text+'</span>'}else{text='<span class="link-text">'+text+'</span>'+'<span class="'+fa_style+' fa-'+icon+' fa-fw ml-'+margin+'"></span>'}}
var wrapper_start='',wrapper_end='';if(typeof options.divs!='undefined'){wrapper_start='<div class="'+options.divs+'">';wrapper_end='</div>'}
if(typeof options.title!='undefined'){options['data-toggle']='tooltip'}
if(typeof options.hide_text!='undefined'&&options.hide_text==!0){text='<span class="d-none d-sm-inline">'+text+'</span>'}
if(options.artpiece){var artpiece=options.artpiece;var url_end=typeof artpiece.title!='undefined'?'/'+Helper.slugify(artpiece.title):'';url='/'+artpiece.id+url_end;delete options.artpiece}
if(options.user_id){var user_id=options.user_id;url='/kozosseg/profil/id:'+user_id}
var models={'artist':['alkotok','name'],'place':['helyek','name'],'country':['orszagok','1'],'county':['megyek','0'],'district':['budapesti-keruletek','0'],'set':['gyujtemenyek','name'],'post':['blogok','title'],};$.each(models,function(model_id,params){if(typeof options[model_id]!='undefined'){var item=options[model_id];var url_end=typeof item[params[1]]!='undefined'?'/'+Helper.slugify(item[params[1]]):'';url='/'+params[0]+'/megtekintes/'+item.id+url_end;delete options[model_id]}});var parsed_attributes=Html.parseAttributes(options,['icon','divs','hide_text']);return wrapper_start+'<a href="'+url+'"'+parsed_attributes+'>'+text+'</a>'+wrapper_end},input:function(name,attributes){var s='';var options=attributes;attributes.name=name;var type=typeof attributes.type=='undefined'?'text':attributes.type;var label=typeof attributes.label=='undefined'?!1:attributes.label;if(typeof attributes.autocopmplete=='undefined'){attributes.autocopmplete='off'}
if(typeof attributes.id=='undefined'){attributes.id=Helper.ucfirst(Helper.slugify(name))}
if(type=='textarea_input'){type='textarea';if(typeof attributes['class']!='undefined'){attributes['class']+=' textarea-short'}else{attributes['class']='textarea-short'}}
var parsed_attributes=Html.parseAttributes(attributes,['type','divs','value','label','options','class','help']);var classes={'text':'form-control','password':'form-control','textarea':'form-control','select':'form-control','checkbox':'form-check-input','radio':'form-check-input','file':'form-control-file','submit':'btn btn-primary','button':'btn btn-secondary',};var value=typeof attributes.value=='undefined'?'':attributes.value;var help=typeof attributes.help=='undefined'?!1:attributes.help;var class_name=classes[type];if(typeof options['class']!='undefined'){class_name+=' '+options['class']}
switch(type){case 'text':s=label?'<label class="" for="'+options.id+'">'+label+'</label>':'';s+='<input type="text" '+parsed_attributes+' class="'+class_name+'" value="'+value+'" />';break;case 'password':s=label?'<label class="" for="'+options.id+'">'+label+'</label>':'';s+='<input type="password" '+parsed_attributes+' class="'+class_name+'" value="'+value+'" />';break;case 'textarea':s=label?'<label class="" for="'+options.id+'">'+label+'</label>':'';s+='<textarea '+parsed_attributes+' class="'+class_name+'">'+value+'</textarea>';break;case 'select':s=label?'<label class="" for="'+options.id+'">'+label+'</label>':'';var select_options='';if(typeof options.empty!='undefined'){var val,lab;if(typeof options.empty=='object'){val=Object.keys(options.empty)[0];lab=options.empty[Object.keys(options.empty)[0]]}else{val='';lab=options.empty}
options.options[val]=lab;options.options=Helper.sortObject(options.options)}
$.each(options.options,function(key,label){var selected=key==value?'selected':'';select_options+='<option value="'+key+'" '+selected+'>'+label+'</option>'});s+='<select '+parsed_attributes+' class="'+class_name+'">'+select_options+'</select>';break;case 'select_button':s=label?'<label class="" for="'+options.id+'">'+label+'</label>':'';s+='<div class="d-block btn-group" role="group" aria-label="'+options.name+' választógombok">';$.each(options.options,function(key,label){var button_class=key==value?'btn-secondary active':'btn-outline-secondary';button_class+=options['class']!=''?' '+options['class']:'';s+='<button type="button" ia-form-select-button="#'+options.id+'" '+'ia-form-select-value="'+key+'" class="btn btn-sm '+button_class+'" '+'>'+label+'</button>'});s+='</div>';s+='<input type="hidden" '+'name="'+options.name+'" '+'id="'+options.id+'" '+'value="'+options.value+'" />';break;case 'checkbox':var checked=value==1?'checked':'';s='<div class="form-check-inline">'+'<input type="hidden" value="0" name="'+options.name+'" />'+'<input type="checkbox" '+parsed_attributes+' class="'+class_name+'" value="1" '+checked+'" />'+'<label class="form-check-label" for="'+options.id+'">'+label+'</label>'+'</div>';break;case 'submit':s='<input type="submit" '+parsed_attributes+' class="'+class_name+'" value="'+value+'" />';break}
if(typeof attributes.divs!='undefined'){var div_class=attributes.divs!=!1?attributes.divs:!1}else{var div_class=''}
if(help){s+='<span class="formHelp form-text text-muted small">'+help+'</span>'}
if(div_class!==!1){s='<div class="form-group '+div_class+'">'+s+'</div>'}
return s},parseAttributes:function(object,exclude){var s='',exclude=typeof exclude=='undefined'?[]:exclude;$.each(object,function(key,value){if($.inArray(key,exclude)==-1){s+=' '+key+'="'+value+'"'}});return s},};var s,Http={settings:{timeout:!1},init:function(){s=this.settings},ajaxError:function(response,path){_c(response,1);var etc='';if(typeof path!=='undefined'){_c(path,1);etc+=' \nútvonal: '+path}
_c('Betöltési hiba!'+etc,1)},request:function(type,params){switch(type){case 'post':return this.post(params.path,params.data,params.success,params.options);break;case 'get':return this.get(params.path,params.success,params.options);break;case 'put':return this.put(params.path,params.data,params.success,params.options);break}},get:function(path,success,options){var that=this,options=_arr(options,{datatype:'json',});if(path.indexOf('http')==-1&&path.substring(0,$app.path.length)!=$app.path){path=$app.path+path}
if(path.indexOf('api/')!==-1){headers={'X-CSRF-TOKEN':$app.token}}else{headers={}}
$.ajax({headers:headers,type:'GET',cache:typeof options.cache=='undefined'?!1:options.cache,url:path,timeout:that.settings.timeout,dataType:options.datatype,success:success,error:function(response){that.ajaxError(response,path)},})},post:function(path,data,success,options){var that=this,options=_arr(options,{datatype:'json',}),silent=typeof options.silent=='undefined'?!1:options.silent;if(!silent){$('.progress').removeClass('d-none')}
if(path.indexOf('http')==-1){path=$app.path+path}
if(path.indexOf('api/')!==-1){headers={'X-CSRF-TOKEN':$app.token}}else{headers={}}
$.ajax({headers:headers,type:'POST',cache:!1,url:path,data:data,timeout:that.settings.timeout,dataType:options.datatype,success:success,error:function(response){that.ajaxError(response,path)},}).done(function(){if(!silent){setTimeout(function(){$('.progress').addClass('d-none')},300)}})},put:function(path,data,success,options){var that=this,options=_arr(options,{datatype:'json',}),silent=typeof options.silent=='undefined'?!1:options.silent;if(!silent){$('.progress').removeClass('d-none')}
if(path.indexOf('http')==-1){path=$app.path+path}
if(path.indexOf('api/')!==-1){headers={'X-CSRF-TOKEN':$app.token}}else{headers={}}
$.ajax({headers:headers,type:'PUT',cache:!1,url:path,data:data,timeout:that.settings.timeout,dataType:options.datatype,success:success,error:function(response){that.ajaxError(response,path)},}).done(function(){if(!silent){setTimeout(function(){$('.progress').addClass('d-none')},300)}})},};var s,Layout={settings:{linkifyOptions:{target:'_blank',ignoreTags:['textarea','input','h1','h2','h3','h4','h5','h6','nolink','linkify_custom']},linkifyCustom:{target:'_blank',ignoreTags:['textarea','input','h1','h2','h3','h4','h5','h6','nolink'],format:{url:function(value){return Helper.getDomain(value)}}},},init:function(){s=this.settings;var that=this;this.bindUIActions();this.sideMenu();$(window).on('resize',function(){that.sideMenu()});$('#site').linkify(Layout.settings.linkifyOptions);$('#site linkify_custom').linkify(Layout.settings.linkifyCustom);this.codeEditor();this.tabTextarea();this.toggleElements();this.initListeners();this.handleImages();this.cookieConsent()},bindUIActions:function(){_c('Helló, üdv a Köztérképen!\n * github repo: https://github.com/paltamas/kozterkep\n * információk: '+$app.domain+'/oldalak/fejlesztoknek\nJó böngészést! :]');$('.focus').focus();$('.modal').on('shown.bs.modal',function(){$('.modal .focus').focus()});$(document).keyup(function(e){if(e.keyCode==27){$('*').tooltip('hide');$('*').popover('hide');$('.autocomplete-dropdown').remove();$('.bubbleContainer .alert-info.alertContainer').remove();$('.bubbleContainer .alert-success.alertContainer').remove()}});$('.navbar-toggler').bind('click',function(e){$('span.toggler-icon').toggleClass('fa-times pl-2 fa-bars')});$(document).on('hidden.bs.collapse','.accordion .collapse',function(){$($(this).data('collapse-pair')).addClass('show')});if(Helper.getURLHashParameter('hopp')){var target=Helper.getURLHashParameter('hopp');var position=$('#'+target).offset();$('html, body').stop(!0,!1).animate({scrollTop:position.top},375)}
if(Store.get('isApp')==1&&($app.here).indexOf('/mulapok/szerkesztes/')==-1){var isOnIOS=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i);var eventName=isOnIOS?"pagehide":"beforeunload";window.addEventListener(eventName,function(event){Html.overlay('show');return})}
var active_menu_before='';$(document).on('click','.header-search-toggle',function(e){e.preventDefault();if($app.here_path=='/kereses'){return}
if(!$(this).hasClass('active')){active_menu_before=$('.header .navbar .nav-icon.active');$('.header .navbar .nav-icon').removeClass('active');$(this).addClass('active')}else{$(this).removeClass('active');$(active_menu_before).addClass('active')}});$(document).on('click','.dropdown-menu.dont-close-this',function(e){e.stopPropagation()});$(document).on('click','[ia-showfull]',function(e){e.preventDefault();var target=$(this).attr('ia-showfull');$(target).removeClass('d-none');$(target+'-intro').addClass('d-none')});$(document).on('click','[ia-showless]',function(e){e.preventDefault();var target=$(this).attr('ia-showless');$(target).addClass('d-none');$(target+'-intro').removeClass('d-none')});$(document).on('click','.explode',function(e){e.preventDefault();Layout.explode('circle',e.pageX,e.pageY)})},initListeners:function(parent){var parent=typeof parent!='undefined'&&parent!=''?parent+' ':'';if(Store.get('isTouch')!=1){$(parent+'[data-toggle="tooltip"]').tooltip({html:!0,delay:{show:600,hide:0},})}
$(parent+'[data-toggle="popover"]').popover({html:!0});autosize($(parent+'textarea:not(.code-editor)'));Domupdates.showPreviews(parent);$('.html-editor').summernote({height:500,focus:!0,toolbar:[[1,['style','bold','italic','underline','strikethrough','paragraph']],[2,['ul','ol','table','picture','video','link','hr']],[3,['fullscreen','codeview','clear']],]});if(parent!=''){$(parent).linkify(Layout.settings.linkifyOptions);$(parent+' linkify_custom').linkify(Layout.settings.linkifyCustom)}},setVars:function(){if(Helper.getURLParameter('android-app')||Helper.getURLParameter('ios-app')){Store.set('isApp',1);Alerts.flashBubble('Üdv az appban')}else{Store.set('isApp',0)}
$app.page_content=$('main').html();if('ontouchstart' in window||navigator.maxTouchPoints){Store.set('isTouch',1);$('.hide-on-touch').addClass('d-none');$('.only-on-touch').removeClass('d-none')}else{Store.set('isTouch',0);$('.only-on-touch').addClass('d-none')}
Store.set('windowVisible',1);window.onblur=function(){Store.set('windowVisible',0);return!1}
window.onfocus=function(){Users.getLatest();Store.set('windowVisible',1);return!0}
Store.set('legeslegfontosabbvaltozoamisosevaltozik','Szuperjó ez a Köztérkép, igaz?!')},handleTabs:function(){if($app.hash!==''&&($app.hash).indexOf('hopp')===-1){window.scrollTo(0,0);$('ul.nav a[href="'+$app.hash+'"]').tab('show')}
$('.nav-tabs a, .nav-pills a, .my-nav-tabs a, .my-nav-pills a, .tab-button, a.tab-link').click(function(e){window.location.hash=this.hash;if($('.leaflet-container')[0]){setTimeout(function(){Maps.myMap.invalidateSize()},500)}});$('.tab-button').click(function(e){e.preventDefault();$($(this).attr('href')+'-tab').tab('show');$('html, body').stop(!0,!1).animate({scrollTop:0},'slow')});$('a.tab-link').click(function(e){e.preventDefault();window.location.hash=this.hash;$('ul.nav a[href="'+this.hash+'"]').tab('show')});if($('ul.nav.d-none')[0]){$('.tab-content.d-none').before(Html.loading('tabs-loading'));$('ul.nav.d-none').removeClass('d-none');if($('.tab-content.d-none')[0]){$('.tab-content.d-none').removeClass('d-none')}
$('.tabs-loading').remove();if($('.leaflet-container')[0]){Maps.myMap.invalidateSize()}}},scrollTopInit:function(){var that=this;that.scrollTopShow();$(window).on('scroll',function(){that.scrollTopShow()});$('.scroll-top').click(function(e){e.preventDefault();$('html, body').stop(!0,!1).animate({scrollTop:0},'slow')})},scrollTopShow:function(){var that=this;var top=$(window).scrollTop();if(top<300){$('.scroll-top').hide()}else{$('.scroll-top').removeClass('d-none').show()}},collapse_toggle:function(elemId){if($(elemId)[0]){$(elemId).collapse('toggle')}},displayHelp:function(){if(!Store.get('help')){Store.set('help',1)}
if(Store.get('help')=='0'){$('.helpSwitch span.far').removeClass('fa-info-circle').addClass('fa-question');$('.formHelp, .helpText').addClass('d-none')}
$('.helpSwitch').on('click',function(e){e.preventDefault();if(Store.get('help')==0){$('.formHelp, .helpText').removeClass('d-none');Store.set('help',1);$('.helpSwitch span.far').removeClass('fa-question').addClass('fa-info-circle');Alerts.flashBubble('Bekapcsoltuk az űrlapokon a segédleteket.','info',{'delBefore':!0})}else{$('.formHelp, .helpText').addClass('d-none');Store.set('help',0);$('.helpSwitch span.far').removeClass('fa-info-circle').addClass('fa-question');Alerts.flashBubble('Elrejtettük az űrlapokon a segédleteket.','info',{'delBefore':!0})}})},switchView:function(){Store.set('fluidView',$app.fluid_view);$('.viewSwitch').on('click',function(e){e.preventDefault();if(Store.get('fluidView')==0){$('.container').removeClass('container').addClass('container-fluid');Store.set('fluidView',1);$('.viewSwitch span.far').removeClass('fa-tv').addClass('fa-desktop-alt');Alerts.flashBubble('Átváltottunk teljes szélességű nézetre.','info',{'delBefore':!0})}else{$('.container-fluid').removeClass('container-fluid').addClass('container');Store.set('fluidView',0);$('.viewSwitch span.far').removeClass('fa-desktop-alt').addClass('fa-tv');Alerts.flashBubble('Visszaváltottunk normál szélességű nézetre.','info',{'delBefore':!0})}})},changeFavicon:function(alert){if(typeof alert=='undefined'){var alert=!1}
var default_icon='/img/kozterkep-app-icon.png',alert_icon='/img/kozterkep-app-icon-alerted.png',current_icon=Helper.getFavicon();if((!alert&&Store.get('favicon')=='alerted')||(alert&&Store.get('favicon')=='default')){Store.set('favicon',alert?'alerted':'default')}
if((alert&&current_icon!=alert_icon)||(!alert&&current_icon!=default_icon)){var link=document.querySelector("link[rel*='icon']")||document.createElement('link');link.type='image/x-icon';link.rel='shortcut icon';link.href=alert?alert_icon:default_icon;document.getElementsByTagName('head')[0].appendChild(link);if(!alert){$('.sum-alert-count').removeClass('bg-orange-dark px-1').addClass('px-2').html('&nbsp;')}}},sideMenu:function(){if($('.navbar-toggler').is(':visible')){if(!$('.sideMenuToggle')[0]){$('.sidemenu-title span').wrap('<a href="#sideMenuCollapse" data-toggle="collapse" class="text-muted d-inline-block w-75 sideMenuToggle"></a>');$('.sidemenu-title').append('<a href="#sideMenuCollapse" data-toggle="collapse" class="sideMenuToggle float-right d-block link-gray"><span class="far fa-chevron-square-down fa-lg"></span></a>');$('.sidemenu-list').addClass('collapse').attr('id','sideMenuCollapse');$('.sidemenu-list .list-group').removeClass('d-none d-md-block')}}else{$('.sideMenuToggle').remove();$('.sidemenu-list').removeClass('collapse').attr('id','');$('.sidemenu-list .list-group').addClass('d-none d-md-block')}},codeEditor:function(){if($('.code-editor')[0]){var editor=$('.code-editor');$(editor).addClass('tab-enabled');var buttons='<div class="float-right">'+'<a href="#" class="editor-full">Teljes képernyő</a>'+'<a href="#" class="editor-preview ml-3">Előnézet</a>';$(editor).before(buttons);$(editor).height($(window).height()).css({'font-size':13,'font-family':'"Consolas", monospace','font-weight':600,'color':'#2a2a2a',});$(document).on('click','.editor-full',function(e){e.preventDefault();$(editor).closest('form').toggleClass('position-fixed w-100 h-100 fixed-top bg-white p-5')});$(document).on('click','.editor-preview',function(e){e.preventDefault();$(editor).closest('form').removeClass('position-fixed w-100 h-100 fixed-top bg-white p-5');var preview='<div id="editor-preview" style="min-height: 100vh;">'+'<div class="container py-3">'+'<a href="#" class="editor-close-preview float-right"><span class="far fa-times btn btn-secondary"></span></a>'+$(editor).val()+'</div>'+'</div>';$('body').prepend(preview);$(document).on('click','.editor-close-preview',function(e){e.preventDefault();$('#editor-preview').remove()})})}},tabTextarea:function(){$($('textarea.tab-enabled')).keydown(function(e){if(e.keyCode===9){var start=this.selectionStart;var end=this.selectionEnd;var $this=$(this);var value=$this.val();$this.val(value.substring(0,start)+"\t"+value.substring(end));this.selectionStart=this.selectionEnd=start+1;e.preventDefault()}})},toggleElements:function(){if($('[ia-toggleelement-parent]')[0]){$('[ia-toggleelement-parent]').each(function(key,elem){var parent=$(elem).attr('ia-toggleelement-parent'),value=$(elem).attr('ia-toggleelement-value');if($(parent).attr('type')=='checkbox'){var parent_value=$(parent).is(':checked')?1:0}else{var parent_value=$(parent).val()}
if(parent_value!=value){$(elem).addClass('d-none')}else{$(elem).removeClass('d-none')}
$(parent).change(function(e){$('[ia-toggleelement-parent="'+parent+'"]').each(function(key,target){if($(parent).attr('type')=='checkbox'){var target_parent_value=$(parent).is(':checked')?1:0}else{var target_parent_value=$(parent).val()}
if($(target).attr('ia-toggleelement-value')==target_parent_value){$(target).removeClass('d-none')}else{$(target).addClass('d-none')}})})})}},alertIfPostblock:function(){if(Store.get('map_posblock')==1){Alerts.flashBubble('Ehhez a funkcióhoz engedélyezned kell a helyzeted megosztását.','warning')}},getMyPos:function(success){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(e){Store.set('map_mypos',[e.coords.latitude,e.coords.longitude]);Store.set('map_posblock',0);$myPos=[e.coords.latitude,e.coords.longitude];var watchID=navigator.geolocation.watchPosition(function(position){Store.set('map_mypos',[position.coords.latitude,position.coords.longitude]);$myPos=[position.coords.latitude,position.coords.longitude]});if($('.mapHome')[0]&&$('.mapHome').hasClass('d-none')){$('.mapHome').removeClass('d-none').addClass('d-inline-block')}
success([e.coords.latitude,e.coords.longitude])},function(){Store.set('map_posblock',1);$myPos=!1;if($('.mapHome')[0]&&$('.mapHome').hasClass('d-inline-block')){$('.mapHome').removeClass('d-inline-block').addClass('d-none')}
return!1},{enableHighAccuracy:!0,maximumAge:30000,timeout:27000})}else{Store.set('map_posblock',1);$myPos=!1;if($('.mapHome')[0]&&$('.mapHome').hasClass('d-inline-block')){$('.mapHome').removeClass('d-inline-block').addClass('d-none')}
return!1}},handleImages:function(){if($('.s3-image')[0]){$('.s3-image').each(function(key,elem){var image=new Image();image.onerror=function(){$(elem).attr('src','/img/placeholder.png').width(125).after('<div class="mt-1 mb-2 pl-1 text-muted small"><span class="fa fa-info-circle mr-2"></span>Feldolgozás alatt...</div>')}
image.src=$(elem).attr('src')})}},explode:function(type_class,x,y){if(typeof type_class=='undefined'){var type_class='circle'}
if(typeof x=='undefined'&&typeof y=='undefined'){var x=$(window).width()*0.5,y=$(window).height()*0.5}
var particles=30,explosion=$('<div class="explosion '+type_class+'"></div>');$('body').append(explosion);explosion.css('left',x-explosion.width()/2);explosion.css('top',y-explosion.height()/2);for(var i=0;i<particles;i++){var x=(explosion.width()/2)+Helper.rand_interval(80,150)*Math.cos(2*Math.PI*i/Helper.rand_interval(particles-10,particles+10)),y=(explosion.height()/2)+Helper.rand_interval(80,150)*Math.sin(2*Math.PI*i/Helper.rand_interval(particles-10,particles+10)),color=Helper.rand_interval(0,255)+', '+Helper.rand_interval(0,255)+', '+Helper.rand_interval(0,255),elm=$('<div class="particle" style="'+'background-color: rgb('+color+') ;'+'top: '+y+'px; '+'left: '+x+'px"></div>');if(i==0){elm.one('webkitAnimationEnd oanimationend msAnimationEnd animationend',function(e){explosion.remove()})}
explosion.append(elm)}},cookieConsent:function(){if(Store.get('cookie-accept')!=1){$('#cookie-consent').hide(0).addClass('fixed-bottom').removeClass('d-none').slideDown(100)}
$(document).on('click','.accept-cookies',function(e){e.preventDefault();Store.set('cookie-accept',1);setTimeout(function(){$('.uniModal').modal('hide');$('#cookie-consent').addClass('d-none').removeClass('fixed-bottom')},500)})},};var s,Modals={init:function(){s=this.settings;this.bindUIActions()},bindUIActions:function(){var that=this;$(document).on('click','.in-modal',function(e){e.preventDefault();var divToTransform=$(this).data('source');that.open({'title':$(this).data('title'),'content':$(divToTransform).html()})});$('body').on('touchmove',function(e){if($('.scroll-disable').has($(e.target)).length)e.preventDefault()});$('body').on('shown.bs.modal',function(){$(this).addClass('scroll-disable');Autocomplete.bindUIActions();autosize($('.modal textarea'));$('.popover').popover('hide');if($('.modal #map')[0]){Maps.init()}});$('body').on('hidden.bs.modal',function(){$(this).removeClass('scroll-disable')})},prepare:function(modalId,options){options=_arr(options,{title:'',body:'',size_class:'modal-md',});if($('#'+modalId)[0]){return!0}
$('body').append('<div class="modal fade confirmModal" id="'+modalId+'" tabindex="-1" role="dialog">'+$('.uniModal').html()+'</div>');$('#'+modalId+' .modal-dialog').removeClass('modal-lg modal-md modal-sm').addClass(options.size_class);$('#'+modalId+' .modal-title').html(options.title);$('#'+modalId+' .modal-body').html(options.body);return!0},open:function(options){options=_arr(options,{size_class:'modal-md',modal_id:Helper.randId(),important:!1,});var modal_options=[],this_unimodal=$('.uniModal');if(options.important==!0){modal_options.push({keyboard:!1})}
$('.uniModal').attr('id',options.modal_id);$('.uniModal .modal-dialog').removeClass('modal-lg modal-md modal-sm').addClass(options.size_class);if(typeof options.path!='undefined'){Http.get(options.path,function(response){if(typeof response.body!='undefined'){$('.uniModal .modal-title').html(response.title);$('.uniModal .modal-body').html(response.body).linkify(Layout.settings.linkifyOptions);$('.uniModal .modal-body linkify_custom').linkify(Layout.settings.linkifyOptions);$('.uniModal').modal('show',modal_options);if($('.uniModal .comment-thread')[0]){Comments.build_thread()}
$('.uniModal .modal-body .remove-in-modal').remove();$('.uniModal .modal-body .only-in-modal').removeClass('d-none');Layout.initListeners('.uniModal');Appbase.confirm_links();$('.progress').addClass('d-none')}})}else if(typeof options.content!='undefined'){if(typeof options.title!='undefined'){$('.uniModal .modal-title').html(options.title)}
$('.uniModal .modal-body').html(options.content);$('.uniModal').modal('show',modal_options);Layout.initListeners('.uniModal');Appbase.confirm_links()}else{_c('Nincs modal tartalom. Nem nyitunk ki semmit.',1)}
$(this_unimodal).on('shown.bs.modal',function(e){if(typeof options.onShow!='undefined'){options.onShow()}});$(this_unimodal).on('hidden.bs.modal',function(e){if(typeof options.onClose!='undefined'){options.onClose()}
$(this_unimodal).find('.modal-body').html('')})},close:function(elem){$(elem).modal('hide')},};var s,Showroom={files:[],pointer:0,touchposition:0,thumbnails_html:'',settings:{base_hash:'',},init:function(){var that=this;var init_file=Helper.getURLHashParameter('vetito');if(init_file&&$('[ia-showroom]')[0]){$('[ia-showroom]').each(function(key,elem){if($(elem).attr('ia-showroom-file')==init_file&&$('#showroom').length==0){that.build(elem)}})}
if($('[ia-showroom]')[0]){this.bindUIActions();window.addEventListener("hashchange",function(){if($('#showroom')[0]&&!Helper.getURLHashParameter('vetito')){Showroom.close()}else if(!$('#showroom')[0]&&Helper.getURLHashParameter('vetito')){that.build(Helper.getURLHashParameter('vetito'))}else if($('#showroom')[0]&&Helper.getURLHashParameter('vetito')){var file=$('[ia-showroom-file='+Helper.getURLHashParameter('vetito')+']');that.load_file('#showroom .file-container',file)}},!1)}},bindUIActions:function(){var that=this;$(document).on('click','[ia-showroom]',function(e){e.preventDefault();that.build(this)});$(document).on('click','.load-file',function(e){e.preventDefault();var file_id=$(this).data('file-id');var file=$('[ia-showroom-file='+file_id+']');$.each(Showroom.files,function(key,elem){if(elem.id==file_id){Showroom.pointer=key;return}});$('.act-pointer').html(Showroom.pointer+1);that.load_file('#showroom .file-container',file)});$(document).on('click','.close-showroom',function(e){e.preventDefault();Showroom.close()});$(document).keyup(function(e){if($('#showroom')[0]){if(e.keyCode==27){Showroom.close()}
if(e.keyCode==37||e.keyCode==39){var step=e.keyCode==37?-1:1;Showroom.step(step)}}});$(document).on('click','div.swipe-step',function(e){e.preventDefault();Showroom.step(1)});$(document).on('click','.step-left',function(e){e.preventDefault();Showroom.step(-1)});$(document).on('click','.step-right',function(e){e.preventDefault();Showroom.step(1)});$(window).resize(function(){$('.img-fluid').css('max-height',$(window).height());$('#showroom .info-container .info').css('min-height',$(window).height())})},handleSwipe:function(){if(Store.get('isTouch')==1){var hammertime=new Hammer(document.getElementById('swipeable'),{});hammertime.on('swipeleft',function(ev){Showroom.step(1)});hammertime.on('swiperight',function(ev){Showroom.step(-1)});hammertime.on('pinch pinchmove',function(ev){return!0})}},build:function(file){var elements='[ia-showroom-file]';if($(file).attr('ia-showroom-container')&&$(file).attr('ia-showroom-container')!=''){elements=$(file).attr('ia-showroom-container')+' '+elements}
if(typeof $(file).attr('ia-showroom-file')=='undefined'){var file=$(elements)[0]}
var room_id=$(file).attr('ia-showroom'),act_file_id=$(file).attr('ia-showroom-file'),act_file_path=$(file).attr('ia-showroom-file-path'),act_file_type=$(file).attr('ia-showroom-file-type'),base_hash=$(file).attr('ia-showroom-hash')&&$(file).attr('ia-showroom-hash')!=''?$(file).attr('ia-showroom-hash'):'',i=0;if(base_hash!=''){Showroom.settings.base_hash=base_hash}
$('body').css('overflow','hidden');$('body').prepend('<div class="position-fixed w-100 h-100 bg-black" style="z-index: 1000; overflow-y: scroll; -webkit-overflow-scrolling: touch" id="showroom"></div>');$('meta[name=viewport]').remove();$('head').append('<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=12.0, minimum-scale=.25, user-scalable=yes">');$('#showroom').html('<div class="fixed-top text-left p-1 btn-group tools-container pl-md-2">'+'<div class="col-6 text-left p-0 m-0">'+'<div class="btn-group">'+'<a href="#" class="step-left btn btn-secondary" data-toggle="tooltip" title="A fájlok közti lépkedéshez használhatod a billentyűzeted jobbra-balra nyilait."><span class="far fa-arrow-left"></span></a>'+'<a href="#" class="step-right btn btn-secondary" data-toggle="tooltip" title="A fájlok közti lépkedéshez használhatod a billentyűzeted jobbra-balra nyilait."><span class="far fa-arrow-right"></span></a>'+'</div>'+'<span class="small text-white ml-2 text-shadow"><span class="act-pointer"></span> / <span class="files-count"></span></span>'+'</div>'+'<div class="col-6 text-right p-0 m-0 pr-3">'+'<a href="#" class="close-showroom btn btn-secondary d-inline-block px-3"><span class="far fa-times"></span></a>'+'</div>'+'</div>'+'<div class="row m-0 h-100 p-0 d-flex">'+'<div class="col-lg-9 col-md-8 text-center px-0 pt-5 pt-md-0 justify-content-center align-self-center">'+'<div class="align-middle file-container swipe-step" id="swipeable"></div>'+'</div>'+'<div class="col-lg-3 col-md-4 p-0 pt-md-2 mt-4 mt-md-0 info-container bg-gray-kt">'+'</div>'+'</div>');$(elements).each(function(key,elem){Showroom.files[i]={'id':$(elem).attr('ia-showroom-file'),'path':$(elem).attr('ia-showroom-file-path'),'type':$(elem).attr('ia-showroom-file-type'),};if(act_file_id==$(elem).attr('ia-showroom-file')){Showroom.pointer=i;$('.act-pointer').html(i+1)}
i++});Showroom.thumbnails_html=Showroom.build_thumbnails(Showroom.files);$('.files-count').html(Showroom.files.length);$('.scroll-top').hide();Showroom.load_file('#showroom .file-container',file);Showroom.handleSwipe()},load_file:function(target,file_element,file_id,file_type,file_path){$(target).css('min-height','35vh');if(file_element){var file_id=$(file_element).attr('ia-showroom-file'),file_type=$(file_element).attr('ia-showroom-file-type'),file_path=$(file_element).attr('ia-showroom-file-path')}
var preview=Helper.filePreview(file_type,file_path,'img-fluid','fa-10x text-white');window.location.hash='vetito='+file_id;$(target).html(preview);$('.img-fluid').css('max-height',$(window).height());$('#showroom .info-container').html($('.showroom-info-source#file-info-'+file_id).html());$('#showroom .info-container .info').css('min-height',$(window).height());$('#showroom .thumbnails').html(Showroom.thumbnails_html);$('.thumbnails .img-thumbnail').removeClass('bg-primary');$('.thumbnails .showroom-thumbnail-'+(Showroom.pointer+1)).addClass('bg-primary')},step:function(step){var pointer=Showroom.pointer;pointer+=step;if(Showroom.files.length<=pointer){pointer=0}else if(pointer<0){pointer=Showroom.files.length-1}else{var next=pointer+1;if(typeof Showroom.files[next]!='undefined'){Helper.preloadImg(Showroom.files[next].path)}}
if(pointer!=Showroom.pointer){Showroom.load_file('.file-container',!1,Showroom.files[pointer].id,Showroom.files[pointer].type,Showroom.files[pointer].path);Showroom.pointer=pointer}
$('.act-pointer').html(Showroom.pointer+1)},build_thumbnails:function(files){var s='',i=0,active_bg='';if(files.length>1){$(files).each(function(key,file){if(file.type=='image'){i++;var src=(file.path).replace('_1.jpg','_5.jpg'),image_width=files.length<24?75:40;image='<img src="'+src+'" class="s3-image showroom-thumbnail-'+i+' img-thumbnail'+' img-fluid mb-1 mr-1 img-fluid" width="'+image_width+'" >';s+=Html.link(image,'#',{'class':'load-file','data-file-id':file.id,})}});if(i>0){s='<hr class="my-4" />'+s}}
return s},close:function(){$('#showroom').remove();if(Showroom.settings.base_hash!=''){if($('#'+Showroom.settings.base_hash+'-tab')[0]&&!$('#'+Showroom.settings.base_hash+'-tab').hasClass('active')){window.location.hash=Showroom.settings.base_hash;$('#'+Showroom.settings.base_hash+'-tab').tab('show')}}else{window.location.hash=''}
$('body').css('overflow','auto');$('meta[name=viewport]').remove();$('head').append('<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no, user-scalable=no">')},};var s,Store={settings:{},init:function(){s=this.settings},get:function(key){if(typeof(Storage)!=="undefined"){return localStorage.getItem(key)==null||localStorage.getItem(key)=='NaN'?!1:localStorage.getItem(key)}else{return Cookies.get(key)==null||Cookies.get(key)=='NaN'?!1:Cookies.get(key)}},set:function(key,value){if(typeof(Storage)!=="undefined"){if(typeof value==='object'){value=JSON.stringify(value)}
return localStorage.setItem(key,value)}else{return Cookies.set(key,value,{expires:30,path:$app.path})}},remove:function(key){if(typeof(Storage)!=="undefined"){return localStorage.removeItem(key)}else{return Cookies.remove(key,{path:$app.path})}},clearAll:function(){if(typeof(Storage)!=="undefined"){localStorage.clear()}}};var s,Webstat={settings:{},init:function(){var that=this,path=window.location.pathname;this.visit(path,!0);$app.ic.visits=window.setInterval(function(){if(Store.get('windowVisible')==1){that.visit(path,!1)}},$app.visit_interval*1000);this.load_view_stats()},visit:function(path,visit){Http.request('post',{'path':'api/visits','data':{visit:visit?1:0,path:path,full_path:$app.here,referrer:document.referrer,vp:$app.model,vi:$app.model_id,},'success':function(response){},'options':{silent:!0}})},load_view_stats:function(){if(!$('.model-view-stats')[0]||$app.model==''||$app.model_id==''){return}
Http.request('get',{'path':'api/visits/view_stats?model='+$app.model+'&model_id='+$app.model_id,'success':function(response){if(typeof response.view_total!='undefined'){var s='';s+=Helper.number(response.view_total)+', eheti: '+Helper.number(response.view_week);s+=Html.link('','/webstat/oldalak?vp='+$app.model+'&vi='+$app.model_id,{'icon':'chart-line fa-fw','title':'További részletek a Webstaton','class':'ml-2'})}else{var s='-'}
$('.model-view-stats').html(s)},'options':{silent:!0}})},};var s,Appbase={settings:{},init:function(){var that=this;s=this.settings;var modal=Helper.getURLHashParameter('modal');this.modals(modal);window.onhashchange=function(){var modal=Helper.getURLHashParameter('modal');if(modal){Appbase.modals(modal)}};this.ajaxdivs();this.connections();this.links();this.confirm_links();this.unisearch();this.bind();this.dragOrder();this.tooltips();this.inputValidations();this.edit_texts();this.etc()},modals:function(modal){if(modal){Modals.open({'path':modal,'onClose':function(){window.location.hash=''}})}},bind:function(){var that=this;$(document).on('change','select[ia-bind], input[ia-bind]',function(e){$(this).click()});$(document).on('click','[ia-bind]',function(e){e.preventDefault();var that=this,target=$(this).attr('ia-target')?$(this).attr('ia-target'):'',hideable=$(this).attr('ia-hide')?$(this).attr('ia-hide'):'',showable=$(this).attr('ia-show')?$(this).attr('ia-show'):'',removeclass=$(this).attr('ia-removeclass')?$(this).attr('ia-removeclass'):'',addclass=$(this).attr('ia-addclass')?$(this).attr('ia-addclass'):'',toggleclass=$(this).attr('ia-toggleclass')?$(this).attr('ia-toggleclass'):'',toggletitles=$(this).attr('ia-toggletitle')?$(this).attr('ia-toggletitle').split('||'):'',destroyable=$(this).attr('ia-destroy')?$(this).attr('ia-destroy'):'',redirect=$(this).attr('ia-redirect')?$(this).attr('ia-redirect'):'';confirmthis=$(this).attr('ia-confirm')?$(this).attr('ia-confirm'):!1;if(target=='this'){target=this}
var bindTo=$(this).attr('ia-bind').split('.');Appbase.bindMethod(bindTo,this,redirect);if(hideable!=''){hideable=='this'?this:hideable;$(hideable).slideUp(200)}
if(showable!=''){showable=='this'?this:showable;$(showable).show()}
if(destroyable!=''){destroyable=='this'?this:destroyable;$(destroyable).remove()}
if(toggleclass!=''&&target!=''){$(target).toggleClass(toggleclass)}
if(toggletitles.length!=''&&toggletitles.length==2){target=$(this).attr('ia-toggletitle-target')?$(this).attr('ia-toggletitle-target'):target;var key=$(target).prop('title')==toggletitles[1]?0:1;$(target).prop('title',toggletitles[key])}
if(removeclass!=''&&target!=''){$(target).removeClass(removeclass)}
if(addclass!=''&&target!=''){$(target).addClass(addclass)}
if(redirect!=''&&typeof bindTo[1]=='undefined'){window.location=$app.path+redirect}})},bindMethod:function(bindTo,elem,redirect){if(typeof bindTo[1]!=='undefined'){var Logic=Helper.ucfirst(bindTo[0]),method=bindTo[1],pass=$(elem).attr('ia-pass')?$(elem).attr('ia-pass'):'',vars=[];pass=pass=='this.value'?$(elem).val():pass;$($(elem)[0].attributes).each(function(key,attr){if(attr.nodeName.indexOf('ia-vars')>-1){var varName=attr.nodeName.replace('ia-vars-','');var varValue=attr.nodeValue;vars[varName]=varValue}});if(typeof eval(Logic)[method]!=="undefined"){eval(Logic)[method](pass,vars,redirect,elem)}else{_c('Hianyzo logika: '+Logic+'.'+method,1)}}},ajaxdivs:function(){if($('[ia-ajaxdiv]')[0]){$('[ia-ajaxdiv]').html(Html.loading()).addClass('ajaxdiv');$('[ia-ajaxdiv]').each(function(key,div){Http.get($(div).attr('ia-ajaxdiv'),function(response){if(typeof response.body!=undefined){$(div).html(response.body);Layout.initListeners('.ajaxdiv');if($(div).find('.comment-thread')){Comments.build_thread()}}else{$(div).html('<div class="text-danger my-2"><span class="fal fa-exclamation-triangle mr-1"></span>Betöltési hiba.</div>')}})});$(document).on('dblclick','[ia-ajaxdiv-load]',function(e){e.preventDefault();var target_div=$(this).attr('ia-ajaxdiv-target');$(target_div).html(Html.loading()).addClass('ajaxdiv');Http.get($(this).attr('ia-ajaxdiv-load'),function(response){if(typeof response.body!=undefined){$(target_div).html(response.body)}else{$(target_div).html('<div class="text-danger my-2"><span class="fal fa-exclamation-triangle mr-1"></span>Betöltési hiba.</div>')}})})}},confirm_links:function(){var that=this;$('[ia-confirm]').each(function(key,elem){var elem=this,elemHtml=$(this).html();if($(elem).hasClass('disabled')||$(elem).attr('disabled')){return!0}
var modalId=$(this).attr('id')+'Modal',modalBody='<div class="mb-3">'+$(elem).attr('ia-confirm')+'</div>'+'<p><a href="#" class="btn btn-danger mr-5 okButton" data-dismiss="modal">Igen, mehet</a><a href="#" class="btn btn-outline-info float-right" data-dismiss="modal">Mégsem</a></p>';Modals.prepare(modalId,{title:'Jóváhagyás',body:modalBody,size_class:'modal-sm'});$(this.attributes).each(function(){if(this.specified){if(this.name!=='ia-confirm'&&((this.name).indexOf('ia-')!==-1||this.name=='href')){$('#'+modalId+' .okButton').attr(this.name,this.value);if(this.name=='href'&&this.value!='#'&&this.value!=''){$('#'+modalId+' .okButton').removeAttr('data-dismiss');$(elem).attr('href','#')}else if(1==2){$(elem).removeAttr(this.name)}else{$(elem).removeAttr(this.name)}}}});$(elem).attr('href','#');$(this).addClass('cursor-pointer');$(this).click(function(e){e.preventDefault();$('#'+modalId+' .modal-loading').remove();$('#'+modalId+' .modal-body').show();$('#'+modalId).modal('show');$('#'+modalId).on('shown.bs.modal',function(e){$('#'+modalId+' .okButton').focus()})});$(document).on('click','#'+modalId+' .okButton',function(e){$('#'+modalId+' .modal-body').hide();$('#'+modalId+' .modal-body').after(Html.loading('modal-loading p-3','','A művelet elvégzése folyamatban...'))})})},links:function(){var that=this;$(document).on('click','[ia-href]',function(e){e.preventDefault();var url=$(this).attr('ia-href');if(url!==undefined&&url!=''){window.location.href=decodeURIComponent(url)}});$(document).on('click','[ia-history-back]',function(e){if($(this).attr('ia-href')==''||$(this).attr('ia-href')=='#'){e.preventDefault();window.history.back()}
return!0});$(document).on('click','[ia-focus]',function(e){var that=this;setTimeout(function(){$($(that).attr('ia-focus')).focus()},300);return!0});$(document).on('click','[ia-run]',function(e){that.run($(this).attr('ia-run'),this);return!0});$(document).on('click','[ia-refresh]',function(e){e.preventDefault();location.reload()});$(document).on('click','[ia-scrollto]',function(e){e.preventDefault();var target=$(this).attr('href'),targetPosition=$(target).position();$('html, body').animate({scrollTop:targetPosition.top},'slow');window.location.hash=target});$(document).on('click','[ia-modal]',function(e){e.preventDefault();$('.progress').removeClass('d-none');var url=$(this).attr('href');Modals.open({size_class:$(this).attr('ia-modal'),modal_id:$(this).attr('id')+'-modal',path:url,})});$(document).on('click','[ia-copy-this]',function(e){e.preventDefault();var string=$(this).attr('ia-copy-this'),input_id=$(this).attr('id')+'-copy-string';if(!$('#'+input_id)[0]){$(this).after('<span style="position:absolute; left: -100000px;"><textarea id="'+input_id+'">'+string+'</textarea></span>');$('#'+input_id).select();document.execCommand('copy');Alerts.flashBubble('A linket a vágólapra másoltuk.')}})},run:function(string,elem){if(typeof string!='undefined'&&string!=''){var methods=Helper.arraize(string,',');methods.forEach(function(method_string){var method_attributes=Helper.arraize(method_string.trim(),':');if(method_attributes.length==2){eval(Helper.ucfirst(method_attributes[0]))(method_attributes[1],elem)}else{eval(Helper.ucfirst(method_attributes[0]))(elem)}})}},unisearch:function(){$(document).on('keyup','[name=unisearch]',function(e){e.preventDefault();var keyword=($(this).val()).toLocaleLowerCase(),container=$(this).attr('ia-unisearch-container'),items=$(this).attr('ia-unisearch-items'),item_container=$(this).attr('ia-unisearch-item-container');if(keyword.length>=2){$(container+' '+items).each(function(key,elem){var cleaned=Helper.replaceAll('<x-ia class="bg-highlighted">','',$(this).html());var cleaned=Helper.replaceAll('</x-ia>','',cleaned);$(this).html(cleaned);var originalContent=$(this).html(),searchContent=($(this).html()).toLocaleLowerCase(),exists=searchContent.indexOf(keyword);if(exists==-1){$(this).closest(item_container).addClass('d-none')}else{$(this).closest(item_container).removeClass('d-none');var originalForm=originalContent.substring(exists,exists+keyword.length);var highlighted=Helper.replaceAll(originalForm,'<x-ia class="bg-highlighted">'+originalForm+'</x-ia>',$(this).html());$(this).html(highlighted)}})}else{$(container+' '+items).each(function(key,elem){var cleaned=Helper.replaceAll('<x-ia class="bg-highlighted">','',$(this).html());var cleaned=Helper.replaceAll('</x-ia>','',cleaned);$(this).html(cleaned);$(this).closest(item_container).removeClass('d-none')})}})},dragOrder:function(invalids){if(Store.get('isTouch')==1){}
var invalids=typeof invalids=='undefined'?!0:invalids;if($('[ia-dragorder]')[0]){$('[ia-dragorder]').each(function(){var container_id=$(this).attr('id'),handlerClass=$(this).attr('ia-draghandler'),targetInput=$(this).attr('ia-dragorder'),container=this;$('.'+handlerClass).css('cursor','grab');var containers_object=[document.querySelector('#'+container_id)];if(typeof $(container).attr('ia-dragbrother')!='undefined'){containers_object.push(document.querySelector($(container).attr('ia-dragbrother')))}
var drake=dragula({containers:containers_object,invalid:function(el,handle){if($(handle).hasClass(handlerClass)){return!1}
if($(handle).hasClass('nodrag')){return!0}
return invalids}});drake.on('drag',function(){$('.'+handlerClass).css('cursor','grabbing')});drake.on('drop',function(e){$('.'+handlerClass).css('cursor','grab');var i=0;$(targetInput).each(function(key,elem){i++;$(this).val(i).change()});if($(container).attr('ia-dragcallback')){Appbase.run($(container).attr('ia-dragcallback'))}
if(typeof $(e).attr('ia-bind')!="undefined"){Appbase.run($(e).attr('ia-bind'))}})})}},tooltips_simple:function(){if(Store.get('isTouch')==1){return}
$(document).on('mouseover','[ia-tooltip]',function(e){var that=this;var tooltip_body_id='tooltip-'+$(that).attr('ia-tooltip')+'-'+$(that).attr('ia-tooltip-id'),path='eszkozok/'+$(that).attr('ia-tooltip')+'_ablak/'+$(that).attr('ia-tooltip-id'),auto_hide=$(that).attr('ia-tooltip-autohide')>0?parseInt($(that).attr('ia-tooltip-autohide')):!1;$(that).attr('data-html',!0);$(that).popover({placement:'bottom',html:!0,trigger:'hover',content:Html.loading(),}).popover('show');Http.get(path,function(response){if(response.body){$($('.popover .popover-body')).html(response.body)}},{cache:!0})})},tooltips:function(){if(Store.get('isTouch')==1){return}
var timer;$(document).on('mouseover','[ia-tooltip]',function(){var that=this;var tooltip_body_id='tooltip-'+$(that).attr('ia-tooltip')+'-'+$(that).attr('ia-tooltip-id'),path='eszkozok/'+$(that).attr('ia-tooltip')+'_ablak/'+$(that).attr('ia-tooltip-id'),auto_hide=$(that).attr('ia-tooltip-autohide')>0?parseInt($(that).attr('ia-tooltip-autohide')):!1;$(that).attr('data-html',!0);if($('#'+tooltip_body_id).is(':visible')){return!0}
if($('#'+tooltip_body_id+'-content')[0]){$(that).popover({placement:'bottom',html:!0,trigger:'hover',delay:{show:500,hide:300,},content:$('#'+tooltip_body_id+'-content').html()})}else{timer=setTimeout(function(){Http.get(path,function(response){if(response.body){if($('.popover')[0]){$('.popover').hide()}
$(that).popover({placement:'bottom',html:!0,trigger:'hover',content:response.body,delay:{show:500,hide:300,},});if(!$('#'+tooltip_body_id+'-content')[0]){$('body').append('<div class="d-none" id="'+tooltip_body_id+'-content"><div id="'+tooltip_body_id+'">'+response.body+'</div></div>')}
$(that).popover('show');if(auto_hide){$(that).on('shown.bs.popover',function(){setTimeout(function(){$(that).popover('hide')},auto_hide*1000)})}}})},300)}});$(document).on('mouseleave','[ia-tooltip]',function(){clearTimeout(timer)});$(document).on('click','.close-popover',function(e){e.preventDefault();$('.popover').popover('hide')})},connections:function(){$(document).on('click','[ia-conn-unset]',function(e){var id=$(this).attr('id');if($(this).is(':checked')){$($(this).attr('ia-conn-unset')+':not(#'+id+')').prop('checked',!1)}});$(document).on('click','[ia-conn-select]',function(e){var select_elem=$(this).attr('ia-conn-select');if($(this).is(':checked')){$(select_elem).removeClass('d-none');if($(this).attr('ia-conn-select-default')){$(select_elem).val($(this).attr('ia-conn-select-default'))}}else{$(select_elem).addClass('d-none').val('')}});$(document).on('change','[ia-conn-show]',function(e){var elem=$(this).attr('ia-conn-show');$('.'+elem).addClass('fade d-none');$('#'+elem+'-'+$(this).val()).removeClass('fade d-none')});$(document).on('change','[ia-conn-show]',function(e){var elem=$(this).attr('ia-conn-show');$('.'+elem).addClass('fade d-none');$('#'+elem+'-'+$(this).val()).removeClass('fade d-none')});$(document).on('focus','[ia-conn-focus-show]',function(e){var target=$(this).attr('ia-conn-focus-show');$(target).removeClass('d-none')})},inputValidations:function(){$(document).on('change','[ia-input]',function(e){var elem=this,val=$(this).val(),type=$(this).attr('ia-input'),message='';Forms.removeInvalidInfo(elem);if(type=='number'){if(parseInt(val)!=val){message+='Ez a mező csak számot tartalmazhat.'}else if(typeof $(elem).attr('ia-input-min')!="undefined"&&val<parseInt($(elem).attr('ia-input-min'))){message+='Minimum érték: '+$(elem).attr('ia-input-min')}else if(typeof $(elem).attr('ia-input-max')!="undefined"&&val>parseInt($(elem).attr('ia-input-max'))){message+='Maximum érték: '+$(elem).attr('ia-input-max')}}
if(message!=''){$(elem).val('');Forms.addInvalidInfo(elem,!0,message);setTimeout(function(){Forms.removeInvalidInfo(elem)},5000)}})},etc:function(){$(document).on('click','[ia-uncheck-all]',function(e){if($(this).attr('href')=='#'){e.preventDefault()}else{if($(this).prop('checked')==!1){return}}
var target_container=$(this).attr('ia-uncheck-all');$(target_container).find('input:checkbox').prop('checked',!1)});$(document).on('click','[ia-uncheckable=1]',function(e){if($(this).is(':checked')==!1){e.preventDefault()}});$(document).on('change','[ia-urlchange-input]',function(e){var urlVar=$(this).attr('ia-urlchange-input'),actValue=Helper.getURLParameter(urlVar),newValue=$(this).val();if(!actValue){var url=$app.here;if(url.indexOf('?')!==-1){url+='&'}else{url+='?'}
url+=urlVar+'='+newValue}else{var url=($app.here).replace(urlVar+'='+actValue,urlVar+'='+newValue)}
window.location=url});$(document).on('change','[ia-urlchange-checkbox]',function(e){var urlVar=$(this).attr('ia-urlchange-checkbox'),actValue=Helper.getURLParameter(urlVar),newValue=$(this).prop('checked')?1:0;if(!actValue){var url=$app.here;if(url.indexOf('?')!==-1){url+='&'}else{url+='?'}
url+=urlVar+'='+newValue}else{var url=($app.here).replace(urlVar+'='+actValue,urlVar+'='+newValue)}
window.location=url});if($('[ia-collapse-memory]')[0]){$('[ia-collapse-memory]').each(function(){var target=$(this).data('target');var saved=Store.get('collapse_memories.'+target);if(saved&&saved==0){$(target).removeClass('show');$(this).find('.fas').toggleClass('fa-minus-square fa-plus-square')}})}
$(document).on('click','[ia-collapse-memory]',function(e){var target=$(this).data('target');if($(this).find('.fas').hasClass('fa-plus-square')){Store.set('collapse_memories.'+target,1)}else{Store.set('collapse_memories.'+target,0)}
$(this).find('.fas').toggleClass('fa-minus-square fa-plus-square')})},edit_texts:function(){$(document).on('click','[ia-edit-text]',function(e){e.preventDefault();var edit_link=this;var text=$($(this).attr('ia-edit-text')).text();var container=$(this).attr('ia-edit-text-container');var save_url=$(this).attr('ia-edit-text-url');var model_id=$(this).attr('ia-edit-text-id');var form_id='edit_text_'+Helper.randId();$(container).addClass('d-none');$(this).addClass('d-none');var form='<div id="'+form_id+'">';form+=Html.input('edit_text',{type:'textarea',value:text});form+=Html.link('Mentés','#',{class:'btn btn-primary save-edit-text',});form+=Html.link('Mégsem','#',{class:'btn btn-link float-right cancel-edit-text',});form+='</div>';$(container).after(form);Layout.initListeners();$('#'+form_id+' textarea').focus();$(document).on('click','#'+form_id+' .save-edit-text',function(e){e.preventDefault();var new_text=$('#'+form_id+' textarea').val();Http.post(save_url,{id:model_id,text:new_text},function(response){$('#'+form_id).remove();$($(edit_link).attr('ia-edit-text')).html(Helper.nl2br(new_text));Layout.initListeners($(edit_link).attr('ia-edit-text'));if(response.success>0){$($(edit_link).attr('ia-edit-text')+'-timestamp').html(Helper.timeConverter(response.success))}
$(container).removeClass('d-none');$(edit_link).removeClass('d-none');Alerts.flashBubble(_text('sikeres_mentes'))})});$(document).on('click','#'+form_id+' .cancel-edit-text',function(e){e.preventDefault();$('#'+form_id).remove();$(container).removeClass('d-none');$(edit_link).removeClass('d-none')})})},};var s,Artpieces={artpiece:{id:0,status_id:0,},edit_form:{'changes':-1,'last_change_count':0,'data':[],'saved':!1,},settings:{},init:function(){s=this.settings;this.artpiece.id=$app.model_id>0?parseInt($app.model_id):parseInt($('#artpiece_id').val());this.artpiece.status_id=parseInt($('#artpiece_status_id').val());this.bindUIActions();if($app.model=='artpieces'&&$app.action=='view'){this.artpageLoad(!1)}},bindUIActions:function(){var that=this;if($app.here=='/mulapok/kozelben'){$('.nearby-page-list').html(Html.loading('text-center','text-muted','Körülnézünk picit...'));setTimeout(function(){var lastPosition=JSON.parse(Store.get('map_mypos'));var lat=$myPos?$myPos[0]:lastPosition[0];var lon=$myPos?$myPos[01]:lastPosition[1];Http.get('api/artpieces?lat='+lat+'&lon='+lon+'&radius=25000'+'&limit=1',function(response){var distance=typeof response[0]!='undefined'&&typeof response[0].d!='undefined'?Math.min(25000,response[0].d):500;Artpieces.nearby_page(distance)})},500)}
if($('#nearby-list')){setTimeout(function(){Artpieces.nearby_list()},500)}
if($('.artpiece-edit-form')[0]){Artpieces.edit();setTimeout(function(){Artpieces.form_check()},1500);setInterval(function(){if(Artpieces.edit_form.changes>Artpieces.edit_form.last_change_count){Artpieces.edit_form_change($('.artpiece-edit-form'))}},$app.here=='/mulapok/letrehozas'?1000:3000)}
$('body').on('shown.bs.modal',function(){if($('.modal .edit-votes')[0]){Artpieces.edit_votes_display()}});if($('.edit-votes')[0]){Artpieces.edit_votes_display()}
var keyTimer;$(document).on('keyup','.instant-search',function(){var that=this;if(keyTimer){clearTimeout(keyTimer)}
keyTimer=setTimeout(function(){Artpieces.instant_search(that)},500)})},instant_search:function(input){var keyword=$(input).val(),target=$(input).data('target')!=''?$(input).data('target'):!1,type=$(input).data('type')?$(input).data('type'):'full',mine=$(input).data('mine')?$(input).data('mine'):0,for_map=$(input).data('for-map')?!0:!1;var target_container=target?target:'main';if(keyword.length>0){var close_link=Html.link('<span class="fal fa-times-circle"></span>','#',{class:'close-link text-muted close-instant-search',style:'position: absolute; margin-left: -20px; margin-top: 6px;'});if(!$('.close-link')[0]){$(input).after(close_link)}
if($('#map.fullPage')[0]&&type=='full'){$(target_container).addClass('p-4')}
$(target_container).html(Html.loading('text-center my-5','fa-lg','A keresés folyamatban...'));var etc_params=type=='simple'?'&egyszeru':'';etc_params+=for_map?'&terkepes':'';etc_params+=mine==1?'&sajat':'';Http.get($app.path+'kereses/instant?kulcsszo='+keyword+etc_params,function(content){$(target_container).html(content.body)});$('.instant-detail-link').attr('href','/kereses?kulcsszo='+keyword)}else if(target){$('.instant-detail-link').attr('href','/kereses');$(target_container).html('')}
if(keyword.length==0){$('.close-link').remove()}
$(document).on('click','.close-instant-search',function(e){e.preventDefault();var prev_content=target?'':$app.page_content;$(target_container).html(prev_content);$('.instant-search').val('');$('.close-link').remove();if($('#map.fullPage')[0]){$(target_container).removeClass('p-4');location.reload()}})},map_edit:function(lat,lon,call_nominatim){if(call_nominatim){Http.get('https://nominatim.openstreetmap.org/reverse.php?lat='+lat+'&lon='+lon+'&zoom=18&format=json&limit=1&accept-language=en',function(data){$('#Country-code').val(data.address.country_code);$('#Address-json').val(JSON.stringify(data.address));$($('.artpiece-edit-form')[0]).trigger('change');$('.nominatim-container').removeClass('d-none');$('.nominatim-address').html(data.display_name)})}else{$($('.artpiece-edit-form')[0]).trigger('change')}
$('#Lat').val(lat);$('#Lon').val(lon);if($('.nearby-artpieces')[0]){var target_class='.nearby-artpieces',radius=$(target_class).attr('ia-alist-radius')>0?$(target_class).attr('ia-alist-radius'):500,limit=$(target_class).attr('ia-alist-limit')>0?$(target_class).attr('ia-alist-limit'):200,show_direction=$(target_class).attr('ia-alist-showdir')=='true'?!0:!1,show_distance=$(target_class).attr('ia-alist-showdist')=='true'?!0:!1;$(target_class).html(Html.loading());Artpieces.load_nearbys(lat,lon,radius,function(response){Artpieces.thumbnail_list(response,target_class,{display_limit:limit,show_direction:show_direction,show_distance:show_distance,div_class:'col-4 col-md-2 col-lg-1',})});Maps.myMarker.on('dragend',function(e){Maps.myMap.setView([e.target._latlng.lat,e.target._latlng.lng]);Artpieces.load_nearbys(e.target._latlng.lat,e.target._latlng.lng,radius,function(response){Artpieces.thumbnail_list(response,target_class,{display_limit:limit,show_direction:show_direction,show_distance:show_distance,div_class:'col-4 col-md-2 col-lg-1',})})})}},load_by_ids:function(id_list,callback){if(typeof id_list=='undefined'||id_list==''||!id_list){return}
Http.get('api/artpieces?ids='+id_list,function(response){callback(response)})},load_by_bounds:function(bounds,callback){if(typeof bounds=='undefined'||typeof bounds._northEast.lat=='undefined'){return}
Http.get('api/artpieces?'+'nwlat='+bounds._northEast.lat+'&nwlon='+bounds._northEast.lng+'&selat='+bounds._southWest.lat+'&selon='+bounds._southWest.lng+'&padding=0.4'+'&psess='+$app.page_session,function(response){callback(response)})},load_nearbys:function(lat,lon,radius,callback){if(typeof lat=='undefined'||typeof lon=='undefined'||typeof radius=='undefined'){return}
Http.get('api/artpieces?lat='+lat+'&lon='+lon+'&radius='+radius,function(response){callback(response)})},thumbnail_list:function(list,target,options){if(list.length>0){var options=_arr(options,{display_limit:200,show_direction:!1,show_distance:!1,image_size:4,div_class:'col-4 col-md-4 align-top mb-1 p-1 d-flex',hide_title:!1,auto_width:!1,excluded_id:!1,});var max_width=$(target).attr('ia-alist-img-width')?$(target).attr('ia-alist-img-width'):200;var div_id='artpiece-thumbnail-list-'+Helper.randId();$(target).html('<div class="row flex-wrap" id="'+div_id+'"></div>');if(options.auto_width){var container_width='auto'}else{var container_width=Math.min($(target).width()*0.33,max_width)+'px'}
var i=0;$(list).each(function(key,elem){if(!options.excluded_id||(options.excluded_id&&elem.i!=options.excluded_id)){i++;if(i>options.display_limit){return}
var artpiece_id=typeof elem.i!='undefined'?elem.i:elem.id;var s='<div class="'+options.div_class+' text-wrap" style="width: '+container_width+';">'+'<div class="border rounded mx-1">'+Html.link('<img src="'+$app.s3_photos+elem.p+'_'+options.image_size+'.jpg" class="img-thumbnail img-fluid presize" />','',{artpiece:{id:elem.i,title:elem.t},'ia-tooltip':'mulap','ia-tooltip-id':elem.i,});if(!options.hide_title){s+='<div class="mt-1 text-center smaller">'+Html.link(elem.t,'',{artpiece:{id:elem.i,title:elem.t}})+'</div>'}
if($myPos&&options.show_direction){s+='<div class="border-top mt-1 text-center pb-1">';if(typeof elem.d!=='undefined'){var distance=Helper.show_distance(elem.d);s+=' <div class="d-inline-block w-50 border-right smaller text-muted">'+distance+'</div>'}
var direction=Helper.getDirection([parseFloat(elem.l[1]),parseFloat(elem.l[0])],$myPos);s+='<div class="d-inline-block w-50 text-muted smaller">'+direction[1]+'</div>';s+='</div>'}else if(options.show_distance){s+='<div class="border-top mt-1 text-center">';if(typeof elem.d!=='undefined'){var distance=Helper.show_distance(elem.d);s+=' <div class="d-inline-block smaller text-muted">'+distance+'</div>'}
s+='</div>'}
s+='</div>'+'</div>';$('#'+div_id).append(s)}})}else{$(target).html('<p class="text-muted">Nincs műlap ezen a területen.</p>')}},nearby_page:function(distance){Layout.alertIfPostblock();if(Store.get('map_posblock')==1){return}
var target_class='.nearby-page-list',limit=$(target_class).attr('ia-alist-limit')>0?$(target_class).attr('ia-alist-limit'):200,show_direction=$(target_class).attr('ia-alist-showdir')=='true'?!0:!1;distance=typeof distance=='undefined'?500:distance;var radius=!1;$.each([100,500,1000,2000,5000,25000],function(key,value){if(parseInt(distance)<=value&&!radius){radius=value}});$('.radius-select').removeClass('btn-secondary active').addClass('btn-outline-secondary');$('.radius-select#button-Radius-'+radius).removeClass('btn-outline-secondary').addClass('btn-secondary active');Artpieces.load_nearbys($myPos[0],$myPos[1],radius,function(response){Artpieces.thumbnail_list(response,target_class,{display_limit:limit,show_direction:show_direction});if(response.length>limit){$(target_class).before('<p class="text-muted text-center text-md-left my-1 mt-0 listInfo">Maximum '+limit+' alkotást mutatunk itt.</p>')}
Layout.handleImages()});$('#Radius').change(function(e){Layout.alertIfPostblock();$('.listInfo').remove();var radius=parseInt($(this).val());$(target_class).html(Html.loading());Layout.getMyPos(function(pos){$myPos=[pos[0],pos[1]];Artpieces.load_nearbys(pos[0],pos[1],radius,function(response){$('.listInfo').remove();Artpieces.thumbnail_list(response,target_class,{display_limit:limit,show_direction:show_direction,});if(response.length>limit){$(target_class).before('<p class="text-muted text-center text-md-left my-1 mt-0 listInfo">Maximum '+limit+' alkotást mutatunk itt.</p>')}else if(response.length>0){$(target_class).before('<p class="text-muted text-center text-md-left my-1 mt-0 listInfo">'+response.length+' alkotás '+Helper.show_distance(radius)+'-en belül.</p>')}
Layout.handleImages()})})})},nearby_list:function(){var target_div='#nearby-list',radius=500,limit=$(target_div).attr('ia-alist-limit')>0?$(target_div).attr('ia-alist-limit'):200,show_direction=$(target_div).attr('ia-alist-showdir')=='true'?!0:!1,latPos=$(target_div).attr('ia-alist-lat'),lonPos=$(target_div).attr('ia-alist-lon'),excluded=$(target_div).attr('ia-alist-excluded')>0?$(target_div).attr('ia-alist-excluded'):!1,show_distance=!1;$(target_div).html(Html.loading());Artpieces.load_nearbys(latPos,lonPos,radius,function(response){Artpieces.thumbnail_list(response,target_div,{display_limit:limit,show_direction:show_direction,show_distance:show_distance,image_size:6,div_class:'m-0 d-inline-block p-1 d-flex align-top',hide_title:!0,excluded_id:excluded,})})},artpageLoad:function(only_votes){var id=Artpieces.artpiece.id,s='',artpiece=!1;if(id>0){Http.get('api/artpieces/artpage?id='+id,function(response){if(typeof response.artpiece=='undefined'){return}
artpiece=response.artpiece;if(!only_votes){if(response.similars.length>0){$('.similar-artpieces').removeClass('d-none');Artpieces.thumbnail_list(response.similars,'.similar-artpieces .items',{display_limit:3})}
s='';s+=Helper.number(artpiece.view_total)+', eheti: '+Helper.number(artpiece.view_week);s+=Html.link('','/webstat/oldalak?vp=artpieces&vi='+artpiece.id,{'icon':'chart-line fa-fw','class':'ml-2'});$('.view-stats').html(s);if(typeof response.user!='undefined'&&response.user.id>0){$user=response.user;$('.editor-boxes').removeClass('d-none');Http.get('mulapok/szerkesztoi_dobozok/'+id,function(content){if(typeof content.body!='undefined'){$('.editor-boxes').html(content.body);Artpieces.votes_display(response.votes)}})}}else{Artpieces.votes_display(response.votes)}})}},edit:function(){this.edit_form_events();this.photos_manage();$('.artpiece-edit-form').on('keyup change',function(e){if(!$(e.target).hasClass('not-form-change')){Artpieces.edit_form_change_init()}});$(document).on('click','#save-edits.not-mine',function(e){e.preventDefault();var form=Html.input('edit_comment',{label:'Segítsd az elfogadást námi indoklással, forrás megjelöléssel. Ha már megadtad a forrást, akkor is jelezd, mi a szerkesztésed háttere. Köszönjük!',type:'textarea',class:'edit_comment_text',help:'A megjegyzés nem kötelező, de nagyon hasznos. Itt add meg a forrásokat, egyéb indokokat, amivel alátámasztod, miért küldöd be ezt a szerkesztést.'});form+=Html.link('Mégsem','#',{'class':'btn btn-outline-secondary float-right','data-dismiss':'modal'});form+=Html.input('save_edits_final',{type:'submit',class:'save-edits-final',value:'Szerkesztésem mentése',});Modals.open({modal_id:'editSaveModal',title:'Szerkesztés mentésének jóváhagyása',content:form})});$(document).on('click','.save-edits-final',function(e){e.preventDefault();var comment_text='';if($('#editSaveModal')[0]){comment_text=$('.edit_comment_text').val();$('#editSaveModal').modal('hide')}
$('#save-box').addClass('d-none');$('.check-loading').remove();$('#save-box').after(Html.loading('check-loading mb-2','','Adatok ellenőrzése és mentése...'));var filled=Forms.checkRequired('.artpiece-edit-form');if(filled){Artpieces.form_check(function(latest_form_data){Http.post('api/artpieces',{'artpiece':latest_form_data,'comment':comment_text,},function(response){if(response.edits>0){Artpieces.edit_form.saved=!0;_redirect(!1,['Sikeresen mentettük a szerkesztést!','success'])}else if(response.edits==0){Alerts.flashBubble('Nem érzékeltünk változást.','info');$('#save-box').addClass('d-none')}else{Alerts.flashBubble(_text('varatlan_hiba'),'danger')}})})}});$(document).on('click','.hide-info-column',function(e){e.preventDefault();$('#edit-info-column').addClass('d-none');$('#edit-form-column').removeClass('col-sm-8 col-md-9 col-lg-8').addClass('col-12');$('.show-info-column').removeClass('d-none')});$(document).on('click','.show-info-column',function(e){e.preventDefault();$('#edit-info-column').removeClass('d-none');$('#edit-form-column').addClass('col-sm-8 col-md-9 col-lg-8').removeClass('col-12');$('.show-info-column').addClass('d-none')})},edit_form_events:function(){$(document).on('change','#Place-id',function(){if($('#Place-id').val()>0){$('.new-address').remove()}})},edit_form_change_init:function(){Artpieces.edit_form.changes++;if(Artpieces.edit_form.changes>0){$('#save-box').removeClass('d-none');$('#Photo-files, #Photo-submit').prop('disabled',!0);$('#photos-save-edit-info, #operations-edit-warning').removeClass('d-none')}},edit_form_change:function(){var form=$('.artpiece-edit-form');if(Artpieces.edit_form.changes>0){_c('szerkesztes tortent');var checkable=Forms.checkRequired(form);if(checkable){Artpieces.form_check()}
Artpieces.edit_form.last_change_count=Artpieces.edit_form.changes;window.onbeforeunload=function(){if(($app.here).indexOf('/mulapok/szerkesztes/')>-1&&!Artpieces.edit_form.saved){return _text('nem_mentett_modositasok')}
return}}},form_check:function(valid_callback){var form=$('.artpiece-edit-form');Artpieces.edit_form.data=Helper.formToObject(form,['photoranks']);if($('#Edit-id')[0]&&$('#Edit-id').val()!=''){Artpieces.edit_form.data.edit_id=$('#Edit-id').val()}
Http.post('api/artpieces/check',{'artpiece':Artpieces.edit_form.data},function(response){$('#artpiece-check-info .alertContainer').remove();$('.show-info-column').removeClass('btn-primary').addClass('btn-outline-secondary').html('<span class="fal fa-arrow-left mr-1"></span>');if(response.messages.length>0){response.messages.forEach(function(message){var alert_id=Helper.slugify(message[0]);Alerts.flashDiv(message[0],message[1],{id:alert_id,target:'#artpiece-check-info',removeAfter:0,dismissable:!1,delSameId:!0,extraClass:'p-2',})});if($('.show-info-column').is(':visible')){$('.show-info-column').removeClass('btn-outline-secondary').addClass('btn-primary').html('<span class="fal fa-arrow-left mr-1"></span>'+response.messages.length+' üzenet')}}
$.each(response.conditions,function(condition,status){var content='';if(status[0]=='3'){content+='<span class="fas fa-minus-circle text-muted"></span>'}else if(status[0]=='2'){content+='<span class="fas fa-minus-circle text-secondary"></span>'}else if(status[0]=='1'){content+='<span class="fas fa-check-circle text-success"></span>'}else if(status[0]=='0'){content+='<span class="fas fa-times-circle text-danger"></span>'}
if(status[1]!=''){content+='<span class="text-muted ml-2">'+status[1]+'</span>'}
$('.conditions-'+condition).html(content)});$.each(response.operations,function(operation,value){var content='';if(value=='0'){content+='<span class="fas fa-minus-square fa-lg text-secondary" data-toggle="tooltip" title="Néhány feltétel még nincs teljesítve, vagy nem küldhető be a műlap a megadott adatok alapján."></span>'}else if(value=='1'){content+='<span class="fas fa-check-square fa-lg text-success" data-toggle="tooltip" title="Szuper, minden feltételt teljesítettél!"></span>'}
$('.operations-'+operation).html(content)});if(typeof response.operations.memo!='undefined'&&response.operations.memo!=''){$('#submit-memo').html('<span class="fal fa-exclamation-triangle mr-2"></span>'+response.operations.memo).removeClass('d-none')}else{$('#submit-memo').html('').addClass('d-none')}
Layout.initListeners();$(form).find('input[type=submit]').removeClass('disabled');$('#save-edits').removeClass('disabled');if(typeof valid_callback!='undefined'){valid_callback(Artpieces.edit_form.data)}},{silent:!0})},photos_manage:function(){$(document).on('click','.photos-sort-button',function(e){e.preventDefault();$('.photos-list-form, .photos-upload-toggle').addClass('d-none');$('.photos-sort-form').removeClass('d-none')});$(document).on('click','.photos-list-button',function(e){e.preventDefault();$('.photos-list-form, .photos-upload-toggle').removeClass('d-none');$('.photos-sort-form').addClass('d-none')});$(document).on('click','.photo-cover-checkbox',function(e){var class_cover='bg-gray-kt pt-4 pb-2 mb-4 rounded',class_base='border-bottom';$('.photo-row').removeClass(class_cover).addClass(class_base);$(this).closest('.photo-row').removeClass(class_base).addClass(class_cover)})},photos_sorted:function(){var new_photos=[],was_separator=!1,i=0,min_top=$sDB.limits.artpieces.top_photo_min,max_top=$sDB.limits.artpieces.top_photo_max;$('.photo-sort .item').each(function(key,elem){i++;if($(this).hasClass('top-separator')){was_separator=i;if(i<=min_top){var if_less=$('.photo-sort .rank-input').length<min_top?' Tehát itt mind a(z) '+$('.photo-sort .rank-input').length+'.':'';Alerts.flashBubble('Lehetőség szerint az első '+min_top+' jelenlegi normál fotó mindenképp kiemelt marad.'+if_less,'warning',{delBefore:!0})}else if(i>max_top+1){Alerts.flashBubble('Maximum '+max_top+' fotó lehet kiemelt.','warning',{delBefore:!0})}}
if($(this).hasClass('rank-input')){new_photos.push({'id':parseInt($(elem).data('photo-id')),'slug':$(elem).data('photo-slug'),'rank':parseInt($(elem).val()),'top':(was_separator==!1||i<=min_top+1)&&i<=max_top?1:0})}});$('#Photos-sorter').val(encodeURIComponent(JSON.stringify(new_photos)));$('#Top-photo-count').val(Math.max(was_separator-1,min_top));Artpieces.edit_form_change_init()},photo_delete_question:function(photo_id,vars,redirect,elem){var artpieces=eval(decodeURIComponent(vars.artpieces));var modal_content='A kép törlésével visszavonhatatlanul törlöd a fájlt a szerverről, és a biztonsági mentésből is.';if(artpieces.length>1){modal_content+='<hr /><strong>A kép nem csak ezen a műlapon szerepel.</strong> Van lehetőséged arra is, hogy csak erről a műlapról töröld, és a másikon meghagyd.<br />';modal_content+=Html.link('Csak itt törlöm, máshol meghagyom','#',{class:'font-weight-bold','ia-bind':'artpieces.photo_delete','ia-pass':photo_id,'ia-vars-target':'this','ia-vars-artpiece_id':vars.artpiece_id,'ia-vars-cover':vars.cover,});modal_content+='<hr />Ha sehol sem szeretnéd meghagyni, kattints az alábbi linkre.'}
modal_content+='<div class="my-3">'
modal_content+=Html.link('Végleges törlés','#',{icon:'trash',class:'font-weight-bold','ia-bind':'artpieces.photo_delete','ia-pass':photo_id,'ia-vars-target':'all','ia-vars-artpiece_id':vars.artpiece_id,'ia-vars-cover':vars.cover,});modal_content+=Html.link('Mégsem','#',{class:'float-right','data-dismiss':'modal'});modal_content+='</div>';Modals.open({size_class:'modal-md',title:'Biztosan törlöd ezt a fotót?',content:modal_content,modal_id:'photo-delete-modal'})},photo_delete:function(photo_id,vars,redirect,elem){$('#photo-delete-modal .modal-body').html(Html.loading('','','Néhány másodperc kell, hogy minden képméretet töröljünk...'));Http.post('api/artpieces/photo_delete',{'photo_id':photo_id,'target':vars.target,'artpiece_id':vars.artpiece_id,'cover':vars.cover},function(response){$('#photo-delete-modal').modal('hide');if(response.success){Alerts.flashBubble(_text('sikeres_torles'),'info');setTimeout(function(){$('.photo-row-'+photo_id).slideUp()},300);$('.photo-sort-card-'+photo_id).remove()}else{Alerts.flashBubble(_text('varatlan_hiba'),'danger')}})},photo_copy_question:function(photo_id,vars,redirect,elem){var artist_target=vars['delete']==1&&typeof vars.artist!='undefined'&&vars.artist==1?!0:!1;var modal_title=vars['delete']==1?'Fotó áthelyezése más műlapra':'Fotó másolása más műlapra';var modal_content='<div class="mb-1">Válaszd ki a cél műlapot az alábbi mezőben névre, vagy pontos műlap AZ-ra keresve.</div>';modal_content+=Html.input('target_artpiece_id',{'id':'photo-copy-target-artpiece-id','type':'text','class':'d-none not-form-change','divs':!1,});modal_content+=Html.input('target_artpiece',{'id':'photo-copy-target-artpiece','class':'not-form-change','ia-auto':'artpieces','ia-auto-query':'title','ia-auto-key':'id','ia-auto-target':'#photo-copy-target-artpiece-id',});if(artist_target){modal_content+='<div class="mt-3 mb-1">A fotó alkotót ábrázol, így áthelyezheted alkotói adatlapra is.</div>';modal_content+=Html.input('target_artist_id',{'id':'photo-copy-target-artist-id','type':'text','class':'d-none not-form-change','divs':!1,});modal_content+=Html.input('target_artist',{'id':'photo-copy-target-artist','class':'not-form-change','ia-auto':'artists','ia-auto-query':'name','ia-auto-key':'id','ia-auto-target':'#photo-copy-target-artist-id',})}
if(photo_id=='all'){modal_content+='<p>A gombra kattintva minden fotóra lefuttatjuk a műveletet!</p>'}
modal_content+=Html.input('copy_move',{'ia-bind':'artpieces.photo_copy','ia-pass':photo_id,'ia-vars-delete':vars['delete'],'ia-vars-source_artpiece_id':vars.artpiece_id,'ia-vars-source_cover':vars.cover,'type':'submit','value':vars['delete']==1?'Áthelyezés és törlés itt':'Másolás',});Modals.open({size_class:'modal-md',title:modal_title,content:modal_content,modal_id:'photo-copy-modal',important:!0,})},photo_copy:function(photo_id,vars,redirect,elem){if(vars['delete']==1&&$('#photo-copy-target-artist-id')[0]){if(($('#photo-copy-target-artpiece-id').val()=='0'||$('#photo-copy-target-artpiece-id').val()=='')&&($('#photo-copy-target-artist-id').val()=='0'||$('#photo-copy-target-artist-id').val()=='')){Forms.addInvalidInfo('#photo-copy-target-artpiece',!0,'Legalább ezt add meg....');Forms.addInvalidInfo('#photo-copy-target-artist',!0,'...vagy ezt.');return}}else{if($('#photo-copy-target-artpiece-id').val()=='0'||$('#photo-copy-target-artpiece-id').val()==''){Forms.addInvalidInfo('#photo-copy-target-artpiece',!0,'Kérjük, válaszd ki a cél műlapot.');return}}
Forms.removeInvalidInfo('#photo-copy-target-artpiece');var target_artpiece_id=$('#photo-copy-target-artpiece-id').val();var target_artist_id=$('#photo-copy-target-artist-id')[0]?$('#photo-copy-target-artist-id').val():0;$('#photo-copy-modal .modal-body').html(Html.loading('','','Kis türelmet, amíg pakolunk...'));Http.post('api/artpieces/photo_copy',{'photo_id':photo_id,'delete':vars['delete'],'source_artpiece_id':vars.source_artpiece_id,'target_artpiece_id':target_artpiece_id,'target_artist_id':target_artist_id,'source_cover':vars.source_cover},function(response){$('#photo-copy-modal').modal('hide');if(response.success){var success_text=vars['delete']==1?'sikeres_athelyezes':'sikeres_masolas';if(target_artpiece_id>0){var target_link=Html.link('A cél műlap megnyitása új lapon.','#',{'target':'_blank','artpiece':{'id':target_artpiece_id}})}else if(target_artist_id>0){var target_link=Html.link('A cél alkotói adatlap megnyitása új lapon.','#',{'target':'_blank','artist':{'id':target_artist_id}})}
Alerts.flashBubble(_text(success_text)+' '+target_link,'info',{removeAfter:10});if(vars['delete']==1){setTimeout(function(){if(photo_id=='all'){$('.photo-row').slideUp();$('.photo-sort-card').remove()}else{$('.photo-row-'+photo_id).slideUp();$('.photo-sort-card-'+photo_id).remove()}},300)}}else{Alerts.flashBubble(_text('varatlan_hiba'),'danger')}})},photos_filter:function(user_id,vars,redirect,elem){$('.photo-row').removeClass('d-none');$('.photo-user-filter').removeClass('u');if(user_id>0){$('.photo-row').each(function(row){if($(this).data('user-id')!=user_id){$(this).addClass('d-none')}});$('.photo-user-filter-delete').removeClass('d-none').addClass('d-block');$(elem).addClass('u')}else{$('.photo-user-filter-delete').removeClass('d-block').addClass('d-none')}},artist_delete:function(artist_id){var form=$('.artpiece-edit-form');$('.artist-row-'+artist_id).remove();if($('.artist-row').length==0){$(form).append('<input type="text" name="no_artists" value="1" id="no-artists" class="d-none">')}else{$('#no-artists').remove()}
Artpieces.edit_form_change_init()},artist_add:function(artist_id,artist_name){if($('.artist-row-'+artist_id)[0]){return!0}
var form=$('.artpiece-edit-form');var s='<div class="row bg-light py-2 mb-2 artist-row artist-row-'+artist_id+'">';s+=Html.input('artists['+artist_id+'][id]',{'type':'text','class':'d-none','value':artist_id,'divs':!1,});s+=Html.input('artists['+artist_id+'][rank]',{'type':'text','class':'artist-rank d-none','value':$('.artist-row').length+1,'divs':!1,});s+='<div class="col-lg-5 mb-2 mb-lg-0">'+Html.link(artist_name,'#',{'class':'font-weight-bold','artist':{'id':artist_id,'name':artist_name},'target':'_blank'})+'</div>';s+='<div class="col-lg-3 pl-3 px-lg-0 pb-2 pb-lg-0">'+Html.input('artists['+artist_id+'][contributor]',{'type':'select_button','options':{0:'Alkotó',1:'Közreműködő'},'value':0,'divs':!1,})+'</div>';var roles={};$.each($sDB.artist_professions,function(key,profession){if(profession[1]==1){roles[key]=profession[0]}});s+='<div class="col-lg-2 col-6">'+Html.input('artists['+artist_id+'][profession_id]',{'type':'select','options':roles,'class':'d-inline','value':1,'divs':!1,})+'</div>';s+='<div class="col-lg-2 col-4 pt-1 text-right">'+Html.link('','#',{'icon':'trash fa-lg','class':'text-muted mr-2 cursor-pointer','ia-confirm':'Biztosan törlöd ezt az alkotót?','ia-bind':'artpieces.artist_delete','ia-pass':artist_id,'title':'Törlés',})+'<span class="fas fa-grip-vertical fa-lg text-muted draghandler hide-on-touch px-1" data-toggle="tooltip" title="Sorrend módosítása áthúzással"></span>'+'</div>';s+='</div>';$('#artist-list .help-box').before(s);$('#New-artist').val('');Artpieces.edit_form_change_init();Appbase.confirm_links()},artist_create:function(name){Http.post('api/artists',{'name':name,'artpiece_id':Artpieces.artpiece.id,},function(response){if(response.success){$('#New-artist').val();Artpieces.artist_add(response.id,name)}else{Alerts.flashBubble(_text('varatlan_hiba'),'danger')}})},date_add:function(field_type){var form=$('.artpiece-edit-form'),s='',date_id=0,last_date_id=0;$('.date-id-field').each(function(){if(parseInt($(this).val())>last_date_id){last_date_id=$(this).val()}});date_id=parseInt(last_date_id)+1;s+='<div class="row bg-light py-2 mb-2 date-row date-row-'+date_id+'">';s+=Html.input('dates['+date_id+'][id]',{'type':'text','class':'d-none date-id-field','value':date_id,'divs':!1,});s+='<div class="col-lg-5 col-12 mb-2 mb-lg-0 form-inline">';if(field_type=='date'){s+=Html.input('dates['+date_id+'][y]',{'maxlength':4,'placeholder':'Évszám','class':'narrow mr-2','divs':'m-0 p-0 d-inline',});s+=Html.input('dates['+date_id+'][m]',{'type':'select','options':$sDB.month_names,'empty':{0:'Hónap...'},'class':'mr-2','divs':'m-0 p-0 d-inline',});s+=Html.input('dates['+date_id+'][d]',{'maxlength':2,'placeholder':'Nap...','class':'narrow mr-2','divs':'m-0 p-0 pl-2 d-inline',})}else if(field_type=='century'){s+=Html.input('dates['+date_id+'][century]',{'label':'Század','maxlength':2,'placeholder':'...','class':'narrow ml-2','divs':!1,})}
s+='</div>';s+='<div class="col-lg-5 col-12 mb-2 mb-lg-0 form-inline">';s+=Html.input('dates['+date_id+'][type]',{'type':'select_button','options':$sDB.date_types,'value':'unveil','divs':'mb-0 pb-0 d-inline',});s+='</div>';s+='<div class="col-lg-1 col-6 pt-1">';if(field_type=='date'){s+=Html.input('dates['+date_id+'][cca]',{'type':'checkbox','label':'<span class="far text-muted fa-question fa-lg" data-toggle="tooltip" title="Az esemény időpontja bizonytalan vagy hozzávetőleges"></span>','value':1,'class':'d-inline','title':'Az esemény időpontja bizonytalan vagy hozzávetőleges','divs':!1,})}
s+='</div>';s+='<div class="col-lg-1 col-6 pt-1 text-right">';s+=Html.link('','#',{'icon':'trash fa-lg','class':'text-muted mr-2 cursor-pointer','ia-confirm':'Biztosan törlöd ezt az eseményt? Módosíthatod is, ha pontosabb időpontot tudsz.','ia-bind':'artpieces.date_delete','ia-pass':date_id,'title':'Törlés'});s+='</div>';s+='</div>';$('#date-list').append(s);Artpieces.edit_form_change_init();Appbase.confirm_links()},date_delete:function(date_id){var form=$('.artpiece-edit-form');$('.date-row-'+date_id).remove();if($('.date-row').length==0){$(form).append('<input type="text" name="no_dates" value="1" id="no-dates" class="d-none">')}else{$('#no-dates').remove()}
Artpieces.edit_form_change_init()},connected_artpiece_add:function(connected_artpiece_id,connected_artpiece_title){if($('.connected-artpiece-row-'+connected_artpiece_id)[0]){return!0}
var form=$('.artpiece-edit-form');var s='<div class="row bg-light py-2 mb-2 connected-artpiece-row connected-artpiece-row-'+connected_artpiece_id+'">';s+=Html.input('connected_artpieces['+connected_artpiece_id+'][id]',{'type':'text','class':'d-none','value':connected_artpiece_id,'divs':!1,});s+='<div class="col-6 col-sm-2 pb-2 pb-md-0">'+''+'</div>';s+='<div class="col-lg-3 pl-3 px-lg-0 pb-2 pb-lg-0">'+Html.link(connected_artpiece_title,'#',{'artpiece':{'id':connected_artpiece_id,'title':connected_artpiece_title,},'target':'_blank','class':'font-weight-bold',})+'</div>';s+='<div class="col-md-4 col-10">'+Html.input('connected_artpieces['+connected_artpiece_id+'][type]',{'type':'select','options':$sDB.artpiece_connection_types,'value':0,'divs':'mb-0 pb-0 d-inline',})+'</div>';s+='<div class="col-2 pt-1 text-right">'+Html.link('','#',{'icon':'trash fa-lg','class':'text-muted mr-2 cursor-pointer','ia-confirm':'Biztosan törlöd ezt a kapcsolatot? A szerkesztés jóváhagyásakor a kapcsolódó műlapról is lekerül a kapcsolás.','ia-bind':'artpieces.connected_artpiece_delete','ia-pass':connected_artpiece_id,'title':'Törlés',})+'</div>';s+='</div>';$('#connected-artpiece-list').append(s);$('#New-connected-artpiece').val('');Artpieces.edit_form_change_init();Appbase.confirm_links()},connected_artpiece_delete:function(connected_artpiece_id){var form=$('.artpiece-edit-form');$('.connected-artpiece-row-'+connected_artpiece_id).remove();if($('.connected-artpiece-row').length==0){$(form).append('<input type="text" name="no_connected_artpieces" value="1" id="no-connected-artpieces" class="d-none">')}else{$('#no-connected-artpieces').remove()}
Artpieces.edit_form_change_init()},connected_set_add:function(connected_set_id,vars,redirect,elem){if(connected_set_id==''||$('.connected-set-row-'+connected_set_id+'')[0]){$(elem).val('');return}
var s='',form=$('.artpiece-edit-form'),connected_set_name=vars.name?vars.name:$(elem).find('option:selected').text();s+='<div class="row bg-light py-2 mb-2 connected-set-row connected-set-row-'+connected_set_id+'" data-id="'+connected_set_id+'">';s+='<div class="col-6 col-md-2 order-2 order-md-1">';s+=$sDB.set_types[vars.type];s+='</div>';s+='<div class="col-12 col-md-9 order-1 order-md-2">';s+=Html.link(connected_set_name,'#',{'set':{'id':connected_set_id,'name':connected_set_name,},'target':'_blank','class':'font-weight-bold',});s+='</div>';s+='<div class="col-6 col-md-1 order-3 text-right">';s+=Html.link('','#',{'icon':'trash fa-lg','class':'text-muted cursor-pointer','ia-confirm':'Biztosan kiveszed a műlapot ebből a gyűjteményből?','ia-bind':'artpieces.connected_set_delete','ia-pass':connected_set_id,'title':'Törlés',});s+='</div>';s+='</div>';$('#connected-set-list').append(s);$(elem).val('');var ids=[];$('.connected-set-row').each(function(){ids.push($(this).data('id'))});$('#Connected-sets').val(encodeURIComponent(JSON.stringify(ids)));Artpieces.edit_form_change_init();Appbase.confirm_links()},connected_set_delete:function(connected_set_id){var form=$('.artpiece-edit-form');$('.connected-set-row-'+connected_set_id).remove();if($('.connected-set-row').length>0){var ids=[];$('.connected-set-row').each(function(){ids.push($(this).data('id'))});$('#Connected-sets').val(encodeURIComponent(JSON.stringify(ids)))}else{$('#Connected-sets').val('')}
Artpieces.edit_form_change_init()},description_edit:function(id,vars){var s='';s+='<div class="description-edit-'+id+'">';s+=Html.input('descriptions['+vars.key+'][id]',{value:id,class:'d-none',});s+=Html.input('descriptions['+vars.key+'][lang]',{value:$('#description-lang-'+id).html(),class:'d-none',});s+=Html.input('descriptions['+vars.key+'][text]',{label:'Leírás szövege',value:Helper.stripTags($('#description-text-'+id).html()),type:'textarea',help:'Ha hivatkoznál a szövegben a számozott forrásokra, akkor használd a sorszámot kapcsos zárójelben a kívánt helyen: [1]',});s+=Html.input('descriptions['+vars.key+'][source]',{label:'Felhasznált források',value:Helper.stripTags($('#description-source-'+id).html()),type:'textarea',help:'Több forrás esetén mindet új sorba írd! Ha hivatkoznál a forrásokra a szövegben, akkor itt sorszámozd őket így: [1] ...szöveg...',});s+='<div class="mt-2">';s+=Html.link('Szerkesztés elvetése','#',{'icon':'undo','class':'','ia-bind':'artpieces.description_cancel','ia-pass':'#Descriptions-'+vars.key+'-text,#Descriptions-'+vars.key+'-source','ia-destroy':'.description-edit-'+id,'ia-show':'.description-row-'+id+' .texts','ia-confirm':'A módosításaid elvetésre kerülnek, nem mentünk semmit belőle.',});s+='</div>';s+='</div>';$('.description-row-'+id+' .texts').after(s).hide();Layout.initListeners();Appbase.confirm_links()},description_cancel:function(pass){var inputs=pass.split(','),form=$('.artpiece-edit-form');$.each(inputs,function(key,input){$(input).val('')});Artpieces.edit_form_change_init()},votes:function(type,vars){var artpiece_id=vars.artpiece_id,vote=typeof vars.vote!='undefined'?parseInt(vars.vote):0,cancel=typeof vars.cancel!='undefined'?1:0;Http.post('api/artpieces/votes',{'type':type,'id':artpiece_id,'vote':vote,'cancel':cancel,},function(response){if(typeof response.error!='undefined'){Alerts.flashBubble('Duplikált szavazat, nem mentettük az utolsó gombnyomásodat.<br />Ha úgy gondolod, hogy hibás működés van, frissítsd az oldalt (F5) és próbáld újra a szavazást.','warning',{delBefore:!0})}
if(typeof response.message!='undefined'&&response.message!=''){Alerts.flashBubble(response.message,'info',{delBefore:!0})}
if(typeof response.refresh!='undefined'&&response.refresh>-1){setTimeout(function(){location.reload()},response.refresh*1000)}
Artpieces.artpageLoad(!0)})},votes_display:function(votes){$('.publication-votes').html('');$('.praise-votes').html('');$('.superb-votes').html('');$('.praise-cancel-link').remove();var publish_score=0,superb_vote=0,praise_vote=0,praise_vote_names='',publication_voted=!1,superb_voted=!1,praise_voted=!1;$.each(votes,function(key,vote){if(vote.type_id==1){publish_score+=vote.score;var s='<div class="row mt-2"><div class="col font-weight-bold">'+vote.user_name+'</div>';if(vote.user_id==$user.id){publication_voted=!0;$('.publish-button').hide();s+='<div class="col">'+Html.link('mégsem','#',{'class':'small','icon':'times','ia-bind':'artpieces.votes','ia-pass':'publish','ia-vars-artpiece_id':Artpieces.artpiece.id,'ia-vars-cancel':1,})+'</div>'}
s+='</div>';$('.publication-votes').append(s)}
if(vote.type_id==3){praise_vote+=1;praise_vote_names+='<span class="text-nowrap mr-2">'+vote.user_name+'</span> ';if(vote.user_id==$user.id){praise_voted=!0;$('.praise-button').hide();var s='<div class="small my-3">'+Html.link('Visszavonom a "Szép munka!" jelölést','#',{'class':'praise-cancel-link','icon':'times','ia-bind':'artpieces.votes','ia-pass':'praise','ia-vars-artpiece_id':Artpieces.artpiece.id,'ia-vars-cancel':1,})+'</div>';$('.praise-button').after(s)}}
if(vote.type_id==4){superb_vote+=1;var s='<div class="row mt-2"><div class="col">'+vote.user_name+'</div>';s+='<div class="col font-weight-bold">';s+=vote.score==1?'példás':'nem példás';s+='</div>';if(vote.user_id==$user.id){superb_voted=!0;$('.superb-button').hide();s+='<div class="col">'+Html.link('mégsem','#',{'class':'small','icon':'times','ia-bind':'artpieces.votes','ia-pass':'superb','ia-vars-artpiece_id':Artpieces.artpiece.id,'ia-vars-cancel':1,})+'</div>'}
s+='</div>';$('.superb-votes').append(s)}});if(!publication_voted){$('.publish-button').show()}
if($('.publication-votes')[0]){$('.publication-votes').append('<div class="border-top mt-2 pt-1 text-muted">Eddig '+publish_score+' pont. Még '+($sDB.artpiece_vote_types.publish[3]-publish_score)+' a publikáláshoz.</div>')}
if(!praise_voted){$('.praise-cancel-link').remove();$('.praise-button').show()}
if(praise_vote>0){$('.praise-votes').prop('title',praise_vote_names).attr('data-toggle','tooltip').html('<hr class="my-1" /><span class="fas fa-award mr-2 fa-lg text-primary"></span>'+praise_vote+' × Szép munka!')}else{$('.praise-votes').html('')}
if(!superb_voted){$('.superb-button').show()}
Layout.initListeners()},edit_votes:function(type,vars){var edit_id=vars.edit_id,vote=typeof vars.vote!='undefined'?parseInt(vars.vote):0,cancel=typeof vars.cancel!='undefined'?1:0;Http.post('api/artpieces/edit_votes',{'type':type,'id':edit_id,'vote':vote,'cancel':cancel,},function(response){if(typeof response.error!='undefined'){Alerts.flashBubble('Duplikált szavazat, nem mentettük az utolsó gombnyomásodat.<br />Ha úgy gondolod, hogy hibás működés van, frissítsd az oldalt (F5) és próbáld újra a szavazást.','warning')}
if(typeof response.message!='undefined'&&response.message!=''){Alerts.flashBubble(response.message,'info',{delBefore:!0})}
if(typeof response.refresh!='undefined'&&response.refresh>-1){setTimeout(function(){location.reload()},response.refresh*1000)}
Artpieces.edit_votes_display()})},edit_votes_display:function(){$('.edit-votes').html('');var artpiece_id=$('.edit-votes').data('artpiece_id'),edit_id=$('.edit-votes').data('edit_id'),accept_score=0,accept_voted=!1;Http.get('api/uni?model=artpiece_votes&id='+artpiece_id+'&edit_id='+edit_id,function(response){var votes=response.results;if(typeof response.user.id!='undefined'&&response.user.id>0){$user=response.user}
$.each(votes,function(key,vote){if(vote.type_id==6){accept_score+=vote.score;var s='<div class="row mt-2"><div class="col font-weight-bold">'+vote.user_name+'</div>';if(vote.user_id==$user.id){accept_voted=!0;$('.accept-button').hide();s+='<div class="col">'+Html.link('mégsem','#',{'class':'small edit-accept-cancel','icon':'times','ia-bind':'artpieces.edit_votes','ia-vars-edit_id':vote.edit_id,'ia-vars-cancel':1,})+'</div>'}
s+='</div>';$('.edit-votes').append(s)}});if(!accept_voted){$('.accept-button').show()}
if($('.edit-votes')[0]){if($sDB.artpiece_vote_types.edit_accept[3]-accept_score>0){$('.edit-votes').append('<div class="border-top mt-2 pt-1 text-muted">Eddig '+accept_score+' pont. Még '+($sDB.artpiece_vote_types.edit_accept[3]-accept_score)+' az elfogadáshoz.</div>')}else{$('.edit-votes').append('<div class="border-top mt-2 pt-1 text-muted">'+accept_score+' ponttal megszavazásra került a szerkesztés.</div>');$('.edit-accept-cancel').remove()}}})},};var s,Comments={settings:{},init:function(){s=this.settings;var that=this;this.bindUIActions();if(!$app.auth){Http.get('eszkozok/csak_bejelentkezessel',function(response){$('.commentLink').remove();$('.commentForm').remove();$('.comment-thread').html(response.body).removeClass('.comment-thread')})}else{$('.commentLink').removeClass('d-none').addClass('d-block');if($('.comment-thread')[0]){$('.comment-thread').html(Html.loading('comments-loading'));this.build_thread();$('.commentForm').collapse('hide');if($app.auth){$app.ic.comment_thread=window.setInterval(function(){that.build_thread()},$app.comment_thread_interval*1000)}}
if($('.thread-refresh')[0]){$app.ic.comment_thread=window.setInterval(function(){Comments.prepend_comment('.thread-refresh')},$app.comment_thread_interval*1000)}}
this.comment_dropdown()},bindUIActions:function(){var that=this;$(document).on('click','.replyComment',function(e){e.preventDefault();$('.commentForm .default-text').addClass('d-none');$('.commentForm .reply-box').remove();var s='<div class="reply-box alert alert-info p-2 small"><strong>Válasz erre:</strong> ';s+=Helper.truncate($('#comment-row-'+$(this).data('id')+' .comment-text').html(),20,!0);s+='<a href="#" class="float-right delReply" data-dismiss="alert"><span class="far fa-times-circle"></span></a>';s+='<input type="hidden" name="answered_id" id="AnsweredId" value="'+$(this).data('id')+'" />';if($('#comment-row-'+$(this).data('id')+' .comment-connected-edit')[0]){var id_=$('#comment-row-'+$(this).data('id')+' .comment-connected-edit').data('id');s+='<input type="hidden" value="artpiece_edits_id" name="custom_field">';s+='<input type="hidden" value="'+id_+'" name="custom_value">'}
var connecteds=['artpiece','artist','place','folder','post','forum_topic','book'],this_comment=this;connecteds.forEach(function(connected){if($('#comment-row-'+$(this_comment).data('id')+' .comment-connected-'+connected)[0]){var id_=$('#comment-row-'+$(this_comment).data('id')+' .comment-connected-'+connected).data('id');$('.commentForm #Model-name').val(connected);$('.commentForm #Model-id').val(id_);if(typeof $sDB.model_parameters[connected+'s']!='undefined'&&typeof $sDB.model_parameters[connected+'s'][0]!='undefined'&&connected!='forum_topic'){var thing=$sDB.model_parameters[connected+'s'][0];s+='<hr /><span class="fa fa-info-circle mr-2"></span><strong>Egy '+thing+' kapcsolódik</strong> ahhoz, amire válaszolsz.'}}});s+='</div>';$('.commentForm').prepend(s);$('.commentForm').collapse('show');$('#Comment').focus()});$(document).on('click','.delReply',function(e){e.preventDefault();$('.commentForm .reply-box').remove();$('.commentForm #AnsweredId').remove();$('.commentForm .default-text').removeClass('d-none');$('.commentForm #Model-name').val($('.commentForm #Model-name').data('default'));$('.commentForm #Model-id').val($('.commentForm #Model-id').data('default'))});$(document).on('click','.comment-row.bg-gray-kt',function(e){$(this).removeClass('bg-gray-kt')})},prepend_comment:function(div){var url_suffix='',model_name='',model_id='';if($(div).data('forum-topic-id')>0){model_name='forum_topic';model_id=parseInt($(div).data('forum-topic-id'))}else if($(div).attr('ia-model-name')){model_name=$(div).attr('ia-model-name');model_id=parseInt($(div).attr('ia-model-id'))}
Comments.get_thread({action:'/latests'+url_suffix,model_name:model_name,model_id:model_id,limit:10,},function(response){$(response).each(function(key,elem){var row_id='comment-row-'+elem.id;if($(div).find('#'+row_id).length==0){Comments.add_row(elem,div,'prepend')}});Layout.initListeners()});return!0},refresh_thread:function(){return!0},build_thread:function(){$('.comment-thread').each(function(){var that=this;var model_name=$(this).attr('ia-model-name'),model_id=$(this).attr('ia-model-id'),limit=$(this).attr('ia-limit'),custom_field=$(this).attr('ia-custom-field')?$(this).attr('ia-custom-field'):'',custom_value=$(this).attr('ia-custom-value')?$(this).attr('ia-custom-value'):'',custom_params='';if(custom_field!=''&&custom_value!=''){custom_params='&custom_field='+custom_field+'&custom_value='+custom_value}
Comments.get_thread({model_name:model_name,model_id:model_id,custom_params:custom_params,limit:limit>0?limit:100,},function(response){$(response).each(function(key,elem){var row_id='comment-row-'+elem.id;if($(that).find('#'+row_id).length==0){Comments.add_row(elem,that,'prepend',model_name,model_id,custom_field,custom_value)}});Layout.initListeners()})})},get_thread:function(options,callback){callback=typeof callback=='undefined'?function(){}:callback;var options=_arr(options,{action:'',model_name:'',model_id:'',custom_params:'',limit:100,});Http.get('api/comments'+options.action+'?limit='+options.limit+'&model_name='+options.model_name+'&model_id='+options.model_id+options.custom_params,function(response){if(response.errors){Alerts.flashBubble(response.errors[0],'danger');return}
callback(response);$('.comments-loading').remove()})},add_row:function(elem,thread,position,model_name,model_id,custom_field,custom_value){var file_list='',model_name=typeof model_name=='undefined'?!1:model_name,model_id=typeof model_id=='undefined'?!1:model_id,custom_field=typeof custom_field=='undefined'?!1:custom_field,custom_value=typeof custom_value=='undefined'?!1:custom_value;if(typeof elem.files!='undefined'&&elem.files.length>0){file_list+='<div class="">';elem.files.forEach(function(file){file_list+=Html.link(file[1],$app.path+'mappak/fajl_mutato/'+file[0],{'target':'_blank','class':'mr-3 small file-attachment','icon':'paperclip','ia-file':file[0]})});file_list+='</div>'}
var answeredComment='';if(typeof elem.answered_id!='undefined'&&elem.answered_id!=''){var acText='';if(typeof elem.parent_answered_id!='undefined'&&elem.parent_answered_id!=''){acText+=Html.link('Párbeszéd','/kozter/parbeszed/'+elem.parent_answered_id,{icon:'stream',})}
answeredComment='<span class="small text-muted">'+acText+'</span>'}
var connectedThings='';if(typeof elem.artpiece_id!='undefined'&&elem.artpiece_id!=''&&model_name!='artpiece'&&model_id!=elem.artpiece_id){var link_text='Műlaphoz';if($('.comment-connected-artpiece[data-id="'+elem.artpiece_id+'"]')[0]){link_text=$($('.comment-connected-artpiece[data-id="'+elem.artpiece_id+'"] a .link-text')[0]).text();connectedThings+='<span class="far fa-map-marker mr-1"></span>'}
var margin=typeof elem.artpiece_edits_id!='undefined'&&elem.artpiece_edits_id!=''&&custom_field!='artpiece_edits_id'?'':'mr-3';connectedThings+='<span class="'+margin+' comment-connected-artpiece" data-id="'+elem.artpiece_id+'">'+Html.link(link_text,'',{'artpiece':{id:elem.artpiece_id,title:''},'ia-tooltip':'mulap','ia-tooltip-id':elem.artpiece_id,'class':'d-inline-block',})+'</span>'}
if(typeof elem.artpiece_edits_id!='undefined'&&elem.artpiece_edits_id!=''&&custom_field!='artpiece_edits_id'){if(typeof elem.artpiece_id!='undefined'&&elem.artpiece_id!=''&&model_name!='artpiece'&&model_id!=elem.artpiece_id){connectedThings+='<span class="far fa-arrow-right mx-2"></span>'}
connectedThings+='<span class="mr-3 comment-connected-edit" data-id="'+elem.artpiece_edits_id+'">'+Html.link('Szerkesztéshez','/mulapok/szerkesztes_reszletek/'+elem.artpiece_id+'/'+elem.artpiece_edits_id,{'icon':'comment-edit','class':'text-nowrap',})+'</span>'}
if(typeof elem.forum_topic_id!='undefined'&&elem.forum_topic_id>0&&model_name!='forum_topic'){var link_text='Fórumban';if($('.comment-connected-forum_topic[data-id="'+elem.forum_topic_id+'"]')[0]){link_text=$($('.comment-connected-forum_topic[data-id="'+elem.forum_topic_id+'"] a .link-text')[0]).text()}
connectedThings+='<span class="mr-4 comment-connected-forum_topic" data-id="'+elem.forum_topic_id+'">'+Html.link(link_text,'/kozter/forum-tema/'+elem.forum_topic_id,{'icon':'comments','class':'text-nowrap',})+'</span>'}
if(typeof elem.post_id!='undefined'&&elem.post_id>0&&model_name!='post'){var link_text='Bejegyzéshez';if($('.comment-connected-post[data-id="'+elem.post_id+'"]')[0]){link_text=$($('.comment-connected-post[data-id="'+elem.post_id+'"] a .link-text')[0]).text()}
connectedThings+='<span class="mr-4 comment-connected-post" data-id="'+elem.post_id+'">'+Html.link(link_text,'',{'icon':'newspaper','class':'text-nowrap','post':{id:elem.post_id,title:''}})+'</span>'}
if(typeof elem.artist_id!='undefined'&&elem.artist_id>0&&model_name!='artist'){var link_text='Alkotóhoz';if($('.comment-connected-artist[data-id="'+elem.artist_id+'"]')[0]){link_text=$($('.comment-connected-artist[data-id="'+elem.artist_id+'"] a .link-text')[0]).text()}
connectedThings+='<span class="mr-4 comment-connected-artist" data-id="'+elem.artist_id+'">'+Html.link(link_text,'',{'icon':'user','class':'text-nowrap','artist':{id:elem.artist_id,name:''}})+'</span>'}
if(typeof elem.place_id!='undefined'&&elem.place_id>0&&model_name!='place'){var link_text='Helyhez';if($('.comment-connected-place[data-id="'+elem.place_id+'"]')[0]){link_text=$($('.comment-connected-place[data-id="'+elem.place_id+'"] a .link-text')[0]).text()}
connectedThings+='<span class="mr-4 comment-connected-place" data-id="'+elem.place_id+'">'+Html.link(link_text,'',{'icon':'map-pin','class':'text-nowrap','place':{id:elem.place_id,name:''}})+'</span>'}
if(typeof elem.folder_id!='undefined'&&elem.folder_id>0&&model_name!='folder'){var link_text='Mappához';if($('.comment-connected-folder[data-id="'+elem.folder_id+'"]')[0]){link_text=$($('.comment-connected-folder[data-id="'+elem.folder_id+'"] a .link-text')[0]).text()}
connectedThings+='<span class="mr-4 comment-connected-folder" data-id="'+elem.folder_id+'">'+Html.link(link_text,'/mappak/megtekintes/'+elem.folder_id,{'icon':'folder',})+'</span>'}
if(connectedThings!=''){connectedThings='<div class="small text-muted ml-1">'+connectedThings+'</div><hr class="my-1" />'}
var highlighted='';if(Helper.getURLParameter('komment')==elem.id){highlighted=' bg-gray-kt bg-whitening ';setTimeout(function(){$('#comment-row-'+elem.id).removeClass('bg-gray-kt')},7000)}
var row='<div id="comment-row-'+elem.id+'" class="row comment-row border rounded mb-3 py-2 mx-0'+highlighted+'">'+'<div class="col-md-12 comment-container">'+'<div class="comment-text-box">'+'<div class="float-right">'+Html.link('','#',{'class':'ml-3 small replyComment text-dark','data-id':elem.id,'icon':'reply'})+'</div>'+'<div class="mb-1">'+'<span class="font-weight-bold mr-2 comment-user">'+'<img src="/eszkozok/profilfoto/'+elem.user_id+'?s=4" class="img-fluid rounded-circle mr-1">'+Html.link(elem.user_name,'',{user_id:elem.user_id,'ia-tooltip':'tag','ia-tooltip-id':elem.user_id})+'</span>'+'</div>'+connectedThings+'<linkify_custom class="comment-text my-2">'+Helper.textFormat(elem.text)+'</linkify_custom>'+'</div>'+'<div class="float-right">'+answeredComment+Html.link('','/kozter/komment/'+elem.id,{'class':'small text-muted ml-3','data-id':elem.id,'icon':'ellipsis-h fas','ia-modal':'modal-md',})+'</div>'+'<small class="text-muted">'+Helper.timeAgoInWords(elem.created)+'</small>'+file_list+'</div>'+'</div>';if(position=='prepend'){$(thread).prepend(row).linkify(Layout.settings.linkifyOptions)}else{$(thread).append(row).linkify(Layout.settings.linkifyOptions)}
$(thread).find('linkify_custom').linkify(Layout.settings.linkifyCustom)},comment_dropdown:function(){$(document).on('click','.comment-dropdown',function(e){e.preventDefault()})},edit:function(comment_id,vars){var comment_text=$('.modal-content #comment-row-'+comment_id+' .comment-text-for-edit').text();$('.modal-content #comment-row-'+comment_id+' .comment-text').hide();var form='<div id="comment-edit-form-'+comment_id+'">';form+=Html.input('edit_comment',{type:'textarea',value:comment_text,class:'edit_comment_text',"data-comment_id":comment_id,});form+=Html.link('Mégsem','#',{'class':'btn btn-outline-secondary btn-sm comment_edit_cancel float-right'});form+=Html.input('comment_save',{type:'submit',class:'btn-sm comment_save',value:'Mentés',});form+='</div>';$('.modal-content #comment-row-'+comment_id+' .comment-text').after(form);$(document).on('click','.comment_edit_cancel',function(e){e.preventDefault();$('.modal-content #comment-edit-form-'+comment_id).remove();$('.modal-content #comment-row-'+comment_id+' .comment-text').show()});$(document).on('click','.comment_save',function(e){e.preventDefault();var new_text=$('.edit_comment_text').val(),comment_id=$('.edit_comment_text').data('comment_id');Http.put('api/comments',{id:comment_id,text:new_text,},function(response){$('.modal-content #comment-edit-form-'+comment_id).remove();$('#comment-row-'+comment_id+' .comment-text-for-edit').html(Helper.nl2br(new_text)).show();$('#comment-row-'+comment_id+' .comment-text').html(Helper.nl2br(new_text)).show();$('#comment-row-'+comment_id+' .comment-text').linkify(Layout.settings.linkifyOptions);$('#comment-row-'+comment_id+' linkify_custom.comment-text').linkify(Layout.settings.linkifyCustom);setTimeout(function(){Modals.close('.uniModal')},750);Alerts.flashBubble('Sikeresen módosítottad a hozzászólást.')})});Layout.initListeners()},story_convert:function(comment_id,vars){Http.post('api/comments/story_convert',{'id':comment_id},function(response){$('#comment-row-'+comment_id).remove();Modals.close('.uniModal');setTimeout(function(){_redirect('/mulapok/szerkesztes_reszletek/'+vars.artpiece_id+'/'+response.success,'Sikeresen sztorivá alakítottuk hozzászólást. Az új sztori jóváhagyás után jelenik meg a műlapon.')},600)})},artist_description_convert:function(comment_id,vars){Http.post('api/comments/artist_description_convert',{'id':comment_id,},function(response){$('#comment-row-'+comment_id).remove();Modals.close('.uniModal');setTimeout(function(){_redirect('/alkotok/megtekintes/'+vars.artist_id,'Sikeresen adalékká alakítottuk a hozzászólást.')},600)})},artist_description_convert_back:function(description_id,vars){Http.post('api/comments/artist_description_convert_back',{'id':description_id,},function(response){$('#description-row-'+description_id).remove();Modals.close('.uniModal')})},delete:function(comment_id,vars){Http.post('api/comments/delete',{'id':comment_id},function(response){$('#comment-row-'+comment_id).remove();Modals.close('.uniModal');Alerts.flashBubble('A hozzászólást töröltük.','info',{delBefore:!0})})},};var s,Conversations={settings:{},init:function(){s=this.settings;var that=this;if($app.auth&&$app.user_pause==0&&Store.get('conversation-count')>0){this.setCount(Store.get('conversation-count'))}
if($app.user_pause==1){$('.conversations-empty').html('Kikapcsoltad az értesítéseket, '+Html.link('kezelés','/tagsag/beallitasok#ertesitesek')+'.');$('.conversation-icon-container span.far').removeClass('fa-comments-alt').addClass('fa-comment-alt-slash disabled')}
this.bindUIActions();if($app.auth){$app.ic.conversation_thread=window.setInterval(function(){that.refresh_thread()},$app.conversation_thread_interval*1000)}},bindUIActions:function(){var that=this},setCount:function(count){if(count>0){$('.conversation-count').addClass('bg-orange-dark').html(count);$('.navlink-conversation-count').html(' ('+count+')')}else{$('.conversation-count').removeClass('bg-orange-dark').html('&nbsp;');$('.conversation-item').remove();$('.conversation-empty').show();$('.navlink-conversation-count').html('')}},buildList:function(object){var that=this,start_count=0,added_count=0,shown_ids=[];if(typeof object!='undefined'&&object.length>0){$('.conversations-empty').hide();$(object).each(function(key,elem){if(!$('.conversation-'+elem.id)[0]&&elem.messages.length>0){var item='<div class="dropdown-item p-2 border-bottom conversation-'+elem.id+' conversation-item" id="conversation-'+elem.id+'">'+'<div class="cursor-pointer" ia-href="/beszelgetesek/folyam/'+elem.id+'">'+'<span class="font-weight-bold d-inline-block">'+elem.subject+'</span>&nbsp;'+'<span class="text-muted d-none d-md-inline-block">'+Helper.textFormat(Helper.truncate(elem.messages[elem.messages.length-1].body,42),!1)+'</span>'+'</div>'+'<div class="row">'+'<div class="col-12 cursor-pointer" ia-href="/beszelgetesek/folyam/'+elem.id+'">'+'<small class="text-muted text-nowrap"><span class="far fa-clock"></span> '+Helper.timeConverter(elem.messages[elem.messages.length-1].created,'short',!0)+', '+Helper.arrayWithoutMe(elem.user_names).join(', ')+'</small>'+'</div>'+'</div>'+'</div>';$('.conversation-list').prepend(item)}
shown_ids[elem.id]=!0});$('.conversation-item').last().removeClass('border-bottom');$('.conversation-item').each(function(key,elem){var id=$(this).attr('id').split('-')[1];if(typeof shown_ids[id]=='undefined'){$('#conversation-'+id).remove()}})}
var new_count=typeof object!="undefined"?object.length:0;Store.set('conversation-count',new_count);that.setCount(new_count)},refresh_thread:function(){if($('.conversation-thread')[0]){var id=Helper.getUrlLastPart();Http.get('api/conversations?id='+id,function(response){if(response.length==1){$(response[0].messages).each(function(key,elem){if(!$('#message-'+elem.mid)[0]){var itsMe=md5(elem.user_id)==$app.user_hash,bg=!itsMe?'bg-gray':'';var file_list='';if(typeof elem.files!='undefined'&&elem.files.length>0){file_list+=elem.body!=''?'<hr />':'';elem.files.forEach(function(file){file_list+='<a href="'+$app.path+'mappak/fajl_mutato/'+file[0]+'" target="_blank" ia-file="'+file[0]+'" class="mr-3 file-attachment"><span class="far fa-paperclip mr-1"></span>'+file[1]+'</a>'})}
var row='<div id="message-'+elem.mid+'" class="row border rounded bg-light shadow-sm my-4 py-3 '+bg+'">'+'<div class="col-md-12">'+'<div class="mb-2 text-muted">'+'<span class="font-weight-bold mr-2">'+elem.user_name+'</span>'+'<span>'+Helper.timeConverter(elem.created,'full')+'</span>'+'<hr class="my-2" /></div>'+'<div class="message-text">'+Helper.textFormat(elem.body)+'</div>'+file_list+'</div>'+'</div>';$('.conversation-thread').prepend(row).linkify(Layout.settings.linkifyOptions)}});$('.thread-info [ia-timestamp]').attr('ia-timestamp',response[0].messages[response[0].messages.length-1].created);$('.thread-info .count').html(response[0].messages.length)}})}},read_toggle:function(pass,vars,redirect){var that=this;Http.put('api/conversations/alter/'+pass,{'read_toggle':1},function(response){$('.list-conversation-'+pass).toggleClass('bg-yellow-light');$('.list-conversation-'+pass+' .names, .list-conversation-'+pass+' .texts .subject').toggleClass('font-weight-bold');if($('.list-conversation-'+pass+' .names')[0]){if($('.list-conversation-'+pass+' .names').hasClass('font-weight-bold')){var new_count=parseInt(Store.get('conversation-count'))+1}else{var new_count=parseInt(Store.get('conversation-count'))-1}
Store.set('conversation-count',new_count);that.setCount(new_count)}
if(redirect!=''){_redirect(redirect,['Olvasatlanná tettük a beszélgetést','info'])}})},favor_toggle:function(pass){var that=this;Http.put('api/conversations/alter/'+pass,{'favor_toggle':1},function(response){})},archive:function(pass,vars,redirect){var that=this;Http.put('api/conversations/alter/'+pass,{'archive':1},function(response){var message='Archiváltuk a beszélgetést';if(redirect!=''){_redirect(redirect,[message,'info'])}
Alerts.flashBubble(message,'info',{'delBefore':!0})})},trash:function(pass,vars,redirect){var that=this;Http.put('api/conversations/alter/'+pass,{'trash':1},function(response){var message='A beszélgetést áthelyeztük a kukába';if(redirect!=''){_redirect(redirect,[message,'info'])}
Alerts.flashBubble(message,'info',{'delBefore':!0})})},restore:function(pass,vars,redirect){var that=this;Http.put('api/conversations/alter/'+pass,{'active':1},function(response){var message='A beszélgetést visszatettük az aktív beszélgetések közé';if(redirect!=''){_redirect(redirect,[message,'info'])}
Alerts.flashBubble(message,'info',{'delBefore':!0})})},delete:function(pass,vars,redirect){var that=this;Http.put('api/conversations/alter/'+pass,{'delete':1},function(response){var message='Véglegesen töröltük a beszélgetést';if(redirect!=''){_redirect(redirect,[message,'info'])}
Alerts.flashBubble(message,'info',{'delBefore':!0})})},delete_all:function(){var that=this;Http.post('api/conversations/empty_trash',{},function(response){_redirect('beszelgetesek/kuka',['Véglegesen töröltük az összes kukában lévő beszélgetést','info'])})},};var s,Document={settings:{},init:function(){s=this.settings;this.bindUIActions()},bindUIActions:function(){var that=this},share:function(pass,vars,redirect,elem){$(elem).popover({'html':!0,'container':'body','content':'<a href="#" class="float-right text-muted close-popover"><span class="fas fa-times fa-border"></span></a>'+'<h6 class="text-center mt-0">Megosztás</h6>'+'<div class="p-2">'+Html.link('','mailto:?subject='+vars.title+'&body='+$app.domain+$app.here,{'icon':'envelope fa-2x','class':'mr-2 text-secondary','target':'_blank'})+Html.link('','https://www.facebook.com/sharer/sharer.php?u='+pass,{'icon':'facebook fab fa-2x','class':'mr-2 text-secondary','target':'_blank'})+Html.link('','https://twitter.com/intent/tweet?text='+encodeURI('"'+vars.title+'" a Köztérképen!')+'%20'+encodeURI(pass),{'icon':'twitter fab fa-2x','class':'mr-2 text-secondary','target':'_blank'})+'</div>'}).popover('toggle');$(document).on('click','.close-popover',function(e){e.preventDefault();$(elem).popover('hide')})},bookmark:function(pass,vars,redirect,elem){$(elem).popover({'html':!0,'container':'body','content':'<a href="#" class="float-right text-muted close-popover"><span class="fas fa-times fa-border"></span></a>'+'<h6 class="text-center mt-0">Könyvjelző mentése</h6>'+'<div class="p-2 text-muted"><span class="fal fa-tools mr-1"></span>Fejlesztés alatt<br />...és itt lesznek a régi raklapjaid is!</div>'}).popover('toggle');$(document).on('click','.close-popover',function(e){e.preventDefault();$(elem).popover('hide')})},print:function(pass){window.print()},empty_input:function(pass){var inputs=pass.split(',');$.each(inputs,function(key,input){$(input).val('')});return!0},};var s,Domupdates={settings:{},init:function(){var that=this;this.bindUIActions();this.updateTimes($app.time_interval*1000);this.setAlertCounts(!0);setInterval(function(){that.setAlertCounts(!1);that.removeRemovables()},1000)},bindUIActions:function(){var that=this},updateTimes:function(interval){var that=this;$app.ic.time_updates=setInterval(function(){$('[ia-timestamp]').each(function(key,elem){$(elem).html(Helper.timeAgoInWords($(elem).attr('ia-timestamp')))})},interval)},setAlertCounts:function(init){if($app.auth&&$app.user_pause==0){if($app.user_notification_pause==0){var sum_count=Number(Store.get('conversation-count'))+Number(Store.get('notification-count'))}else{var sum_count=Number(Store.get('conversation-count'))}
var alert_count=Store.get('alert-count');sum_count=sum_count>0?sum_count:0;alert_count=alert_count>0?alert_count:0;if(sum_count>0){$('.sum-alert-count').removeClass('px-2').addClass('bg-orange-dark px-1').html(sum_count);Layout.changeFavicon(!0)}else{$('.sum-alert-count').removeClass('bg-orange-dark px-1').addClass('px-2').html('&nbsp;');Layout.changeFavicon(!1)}
Store.set('alert-count',sum_count)}},removeRemovables:function(){$('[ia-removeafter]').each(function(key,elem){if($(this).attr('ia-removeafter')<Date.now()){$(this).slideDown(300).remove()}})},showPreviews:function(parent){var parent=typeof parent!='undefined'&&parent!=''?parent+' ':'';if($(parent+'.file-attachment')[0]){$(parent+'.file-attachment').each(function(key,elem){if(!$(parent+'#image-preview-'+$(elem).attr('id')).length){Helper.urlIsImage($(elem).attr('href'),function(){var image='<img src="'+$(elem).attr('href')+'" class="img-fluid img-thumbnail w-25"/>';var image_link=Html.link(image,$(elem).attr('href'),{target:'_blank'});var s=$("<div/>",{class:'mt-1',id:'image-preview-'+$(elem).attr('id'),html:image_link});$(elem).after(s)})}})}},};var s,Folders={settings:{},init:function(){s=this.settings;var that=this;this.bindUIActions()},bindUIActions:function(){var that=this},cover_file:function(pass,vars,redirect,elem){var that=this;Http.put('api/folders',{'cover_file':pass,'folder_id':vars.folder_id},function(response){if(response.errors){Alerts.flashBubble(response.errors,'danger',{'delBefore':!0})}else{$('.setCover:not(#'+$(elem).attr('id')+') .far').removeClass('fa-badge-check').addClass('fa-badge');Alerts.flashBubble('Módosítottuk a mappa borítóját','info',{'delBefore':!0})}})},delete_file:function(pass,vars,redirect){var that=this;Http.put('api/folders',{'delete_file':pass,'folder_id':vars.folder_id},function(response){if(response.errors){Alerts.flashBubble(response.errors,'danger',{'delBefore':!0})}else{Alerts.flashBubble('Véglegesen töröltük a fájlt','info',{'delBefore':!0});$('.folder-file-'+pass).remove()}})},switch_to_ranking:function(pass,vars,redirect,elem){$('.card').parent('div').removeClass('col-lg-3 col-md-4').addClass('col-lg-2 col-md-2 m-0 p-1');$('.card').find('.far').removeClass('fa-6x').addClass('fa-4x');$('.card').addClass('m-0 p-1 small');$('.card').find('img').removeClass('img-thumbnail');$('.card-header').remove();$('.icons').remove();$('.card-body').addClass('draghandler').removeClass('card-body');$(elem).after('<span class="text-muted">Mentés után visszaállunk az eredeti nézetre.</span> <a href="#" ia-refresh>Mégsem mentem.</a>').remove();Appbase.dragOrder(!1)}};var s,Games={settings:{},init:function(){s=this.settings;var that=this;this.bindUIActions();if($('#hug_space')[0]&&Store.get('isTouch')==1){setTimeout(function(){that.show_hug_space_div();setInterval(function(){that.show_hug_space_div()},3000)},1000)}},bindUIActions:function(){var that=this},show_hug_space_div:function(){if($myPos){var div='#hug_space',lat=parseFloat($(div).data('lat')),lon=parseFloat($(div).data('lon'));var myPos=JSON.parse(Store.get('map_mypos')),myLat=parseFloat(myPos[0]),myLon=parseFloat(myPos[1]);var distance=Helper.distance(myLat,myLon,lat,lon,'m');if(distance<=$sDB.limits.games.hug_container_distance){$(div).removeClass('d-none');var direction=Helper.getDirection([parseFloat(lat),parseFloat(lon)],$myPos);$(div).find('#distance-container').html(distance+' méterre tőled ('+direction[1]+')');if(distance>$sDB.limits.games.hug_distance){var get_closer_info=$sDB.limits.games.hug_distance+' méteren belül megérintheted';if($('.event-row[data-type=7]')[0]){$('.event-row[data-type=7]').each(function(key,elem){var days=$sDB.limits.games.hug_days;var ts=Math.round((new Date()).getTime()/1000);if(parseInt($(elem).data('user'))==1&&parseInt($(elem).data('time'))>ts-(24*60*60*days)){get_closer_info='Az utolsó érintésed után legalább '+days+' nappal érintheted újra az alkotást.'}})}
$(div).find('#distance-container').append('<div class="get-closer-info px-2"><span class="text-muted small">'+get_closer_info+'</div>')}}else if(!$(div).hasClass('d-none')){$(div).addClass('d-none');$(div).find('#distance-container').html('')}
if(distance<=$sDB.limits.games.hug_distance){$('.hug-button').removeClass('d-none');$('.spacecapsule-button').removeClass('d-none')}else if(!$('.hug-button').hasClass('d-none')){$('.hug-button').addClass('d-none');$('.spacecapsule-button').addClass('d-none')}}},add_hug:function(pass,vars,redirect,elem){$('.add-hug-button').before(Html.loading('my-3 text-center add-hug-load'));Http.post('api/games/add_hug',{artpiece_id:pass,my_lat:$myPos[0],my_lon:$myPos[1],},function(response){$('.add-hug-load').remove();if(response.too_far){$('.add-hug-button').after('<div class="alert alert-warning font-weight-bold">Hupsz, közben úgy tűnik eltávolodtál az alkotástól?</div><p>A böngésződ olyan helyzetet adott át, ami alapján már nem vagy elég közel a műhöz. Ha DE, akkor frissítsd az oldalt, hátha magára talál az eszközöd.</p>').remove()}else if(response.success){$('.add-hug-button').after('<div class="alert alert-success font-weight-bold">Mentettük az értintésedet!</div><p>Ha már erre jársz, kérjük fusd át a műlapot, hogy minden adat megfelelő-e rajta, és van-e elég kép hozzá. Ez egy értékes pillanat, te pedig értékes személy vagy most az alkotás történetének digitalizálásában. Segíts nekünk!</p>').remove();$('.near-info').remove();Layout.explode('circle')}else{Alerts.flashBubble(_text('varatlan_hiba'),'danger')}})},};var Maps={myMap:[],myMarker:!1,myPosMarker:!1,mapLayer:!1,mapLayerType:!1,markerClusterer:!1,markerList:[],settings:{fullPage:!1,allowedLayers:['osm.streets','wikimedia.osm','google.hybrid',],markerDraggable:!1,markerImageFromZoom:5,editing:!1,urlPosition:!1,artpieceMarkers:!1,artpieceIds:!1,showMe:!1,defaultPosition:!1,positionMarker:!1,oldPositionMarker:!1,defaultZoom:!1,defaultLayer:!1,minZoom:Store.get('isTouch')==1?12:7,autoLocation:!0,followMe:!1,},icons:{location:new L.Icon({iconUrl:'/img/maps/kt-dot.png',iconSize:[24,24],iconAnchor:[24,24],className:'itsme'}),default:new L.Icon({iconUrl:'/img/maps/marker-icon-2x-orange.png',shadowUrl:'/img/maps/marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),grey:new L.Icon({iconUrl:'/img/maps/marker-icon-2x-grey.png',shadowUrl:'/img/maps/marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),},init:function(){if($('#map')[0]){if($('#map').hasClass('fullPage')){$('.hide-when-mapping').remove();Maps.settings.urlPosition=!0}
if($('#map').attr('ia-maps-artpieces')=='true'){Maps.artpieceMarkers=!0}else{Maps.artpieceMarkers=!1}
if($('#map').attr('ia-maps-artpiece_ids')&&$('#map').attr('ia-maps-artpiece_ids')!='false'){Maps.artpieceMarkers=!0;Maps.artpieceIds=$('#map').attr('ia-maps-artpiece_ids');Maps.settings.minZoom=1;Maps.settings.autoLocation=!1}
if($('#map').attr('ia-maps-showme')=='true'){Maps.settings.showMe=!0}
if($('#map').attr('ia-maps-position')!=undefined){Maps.settings.defaultPosition=eval($('#map').attr('ia-maps-position'));Maps.settings.defaultZoom=17}
if($('#map').attr('ia-maps-zoom')>0){Maps.settings.defaultZoom=$('#map').attr('ia-maps-zoom')}
if($('#map').attr('ia-maps-markpos')=='true'){Maps.settings.positionMarker=!0}
if($('#map').attr('ia-maps-position0')!=undefined){Maps.settings.oldPositionMarker=eval($('#map').attr('ia-maps-position0'))}
if($('#map').attr('ia-maps-edit')=='true'){Maps.settings.markerDraggable=!0;Maps.settings.editing=!0}else{Maps.settings.markerDraggable=!1;Maps.settings.editing=!1}
if($('#map').hasClass('fullPage')){Maps.settings.fullPage=!0}
Maps.draw();Maps.bindEvents();Maps.follow_me();$(window).on('resize',function(e){Maps.setSize()})}},draw:function(){Maps.setSize();if(Maps.settings.defaultPosition){var defaultPosition=Maps.settings.defaultPosition}else if(Helper.getURLHashParameter('lat')&&Helper.getURLHashParameter('lon')){var defaultPosition=[Helper.getURLHashParameter('lat'),Helper.getURLHashParameter('lon')]}else if(Store.get('map_mycenter')&&1==2){var defaultPosition=JSON.parse(Store.get('map_mycenter'))}else if($myPos){var defaultPosition=$myPos}else if(Store.get('map_mypos')){var defaultPosition=JSON.parse(Store.get('map_mypos'))}else{var defaultPosition=[47.497845084,19.04021590]}
if(Maps.settings.defaultZoom){var defaultZoom=Maps.settings.defaultZoom}else if(Helper.getURLHashParameter('zoom')){var defaultZoom=Helper.getURLHashParameter('zoom')}else if(Store.get('map_zoom')){var defaultZoom=Store.get('map_zoom')}else{var defaultZoom=16}
if(Maps.settings.defaultLayer){var defaultLayer=Maps.settings.defaultLayer}else if(Helper.getURLHashParameter('layer')){var defaultLayer=Helper.getURLHashParameter('layer')}else if(Store.get('map_zoom')){var defaultLayer=Store.get('map_layer')}else{var defaultLayer='wikimedia.osm'}
Maps.myMap=L.map('map',{zoomControl:!1}).on('load',function(){Maps.setLayer(defaultLayer);Maps.actualize()});L.control.zoom({position:Store.get('isTouch')==1&&Maps.settings.fullPage?'bottomright':'topleft'}).addTo(Maps.myMap);Maps.myMap.setView(defaultPosition,defaultZoom);if(Maps.settings.positionMarker){Maps.addMyMarker(defaultPosition[0],defaultPosition[1],!0)}
if(Maps.settings.oldPositionMarker){Maps.addMyMarker(Maps.settings.oldPositionMarker[0],Maps.settings.oldPositionMarker[1],!1,'grey')}
if($('#map').attr('ia-maps-nozoom')=='true'){Maps.myMap.scrollWheelZoom.disable();if(Maps.myMap.tap){Maps.myMap.tap.disable()}}
if(Maps.settings.autoLocation){Maps.locateAndListen(!0,!1)}
if(Maps.settings.editing){Maps.editFunctions()}
Maps.markerClusterer=L.markerClusterGroup({chunkedLoading:!0,chunkProgress:Maps.marker_progress,});if(!Maps.settings.editing&&Maps.artpieceMarkers){if(Maps.artpieceIds){Maps.artpieces_by_ids(Maps.artpieceIds)}else{Maps.artpieces_by_bounds()}}
Maps.myMap.on('popupopen',function(e){var px=Maps.myMap.project(e.popup._latlng);px.y-=e.popup._container.clientHeight/2+10;Maps.myMap.panTo(Maps.myMap.unproject(px),{animate:!0});if($('.artpiece-container:visible')[0]){Maps.artpiece_view(e.popup._source.options.data_id)}})},bindEvents:function(){$(document).on('click','.hide-artpieces-pane',function(e){e.preventDefault();$('.artpiece-container').removeClass('d-md-block');$('.map-container').removeClass('col-md-8');$('#map').width('100%');Maps.setSize(!0);$('.show-artpieces-pane').addClass('d-md-inline-block')});$(document).on('click','.show-artpieces-pane',function(e){e.preventDefault();$('.artpiece-container').addClass('d-md-block');$('.map-container').addClass('col-md-8');$('#map').width('100%');Maps.setSize(!0);$('.show-artpieces-pane').removeClass('d-md-inline-block')});$(document).on('click','.mapHome',function(e){e.preventDefault();Maps.goHome()});$(document).on('click','.mapLayer',function(e){e.preventDefault();Maps.setLayer($(this).data('layer'));Maps.actualize()});$(document).on('click','.place-search',function(e){$('.keyword').focus()});$(document).on('click','.geocoder .geocode',function(e){e.preventDefault();Maps.geoCode()});$(document).on('keyup','.geocoder .keyword',function(e){e.preventDefault();if(e.keyCode===13){Maps.geoCode()}});if(Store.get('map_layer')){$('.mapLayer').each(function(key,elem){if($(this).data('layer')==Store.get('map_layer')){$(this).addClass('active')}})}
if(Store.get('map_watch')==1){$('.mapWatch').addClass('active')}
$(document).on('click','.showOnMap',function(e){e.preventDefault();if($('.map-container').hasClass('d-none')){$('.close-mobile-alist').remove();$('.mobile-alist-title').remove();$('.artpiece-container').removeClass('col-12').addClass('d-none col-md-4 col-0');$('.map-container').removeClass('d-none')}
Maps.showOnMap(this)});$(document).on('click','.showArtpieceList',function(e){e.preventDefault();$('.map-container').addClass('d-none');$('.artpiece-container ul.nav').addClass('d-none').after(Html.link('','#',{'icon':'times','class':'float-right btn btn-secondary close-mobile-alist'})+'<h4 class="mb-3 mobile-alist-title">Alkotások a térképen</h4>');$('.hide-artpieces-pane').addClass('d-none');$('.artpiece-container').removeClass('d-none col-md-4 col-0').addClass('col-12');Maps.artpiece_thumbnail_list();$(document).on('click','.close-mobile-alist',function(e){e.preventDefault();$('.close-mobile-alist').remove();$('.mobile-alist-title').remove();$('.artpiece-container').removeClass('col-12').addClass('d-none col-md-4 col-0');$('.map-container').removeClass('d-none')})})},artpiece_view:function(id){},showOnMap:function(elem){var lat=$(elem).data('lat'),lon=$(elem).data('lon'),id=$(elem).data('id'),animation=$(elem).data('animation')==0?!1:!0;Maps.myMap.panTo([lat,lon],{animate:animation});Maps.myMap.setView([lat,lon],19);$('img.artpiece-marker-'+id).click();$('img.artpiece-marker-'+id).addClass('bg-primary');setTimeout(function(){$('img.artpiece-marker-'+id).removeClass('bg-primary')},1500)},geoCode:function(){if($('.geocoder .keyword').val().length>3){var keyword=Helper.replaceAll(' ','+',$('.geocoder .keyword').val());Http.get('https://nominatim.openstreetmap.org/?format=json&addressdetails=0&q='+keyword+'&format=json&limit=1',function(data){$('.noGeoCodeSuccess').remove();if(typeof data[0]!=="undefined"&&typeof data[0].lat!=="undefined"){Store.set('map_watch',0);$('.mapWatch').removeClass('active');Maps.myMap.setView([data[0].lat,data[0].lon],Math.max(Store.get('map_zoom'),15));Maps.addMyMarker(data[0].lat,data[0].lon,!0);Maps.actualize();if($('.geocoder .keyword').attr('ia-maps-search-marker')){Maps.addMyMarker(data[0].lat,data[0].lon,!0)}}else{$('.geocoder').after('<span class="text-danger noGeoCodeSuccess mx-2"><small>Sajnos nem találtunk ilyen címet.</small></span>')}})}},goHome:function(){if(Store.get('map_posblock')==0){var zoom=Math.max(Store.get('map_zoom'),16);$myPos=JSON.parse(Store.get('map_mypos'));Maps.myMap.setView($myPos,zoom);Store.set('map_mycenter',$myPos)}},setLayer:function(layerType){if($.inArray(layerType,Maps.settings.allowedLayers)===-1){layerType=Maps.settings.allowedLayers[0]}
if(Maps.mapLayer){Maps.myMap.removeLayer(Maps.mapLayer)}
switch(layerType){case 'osm.streets':Maps.mapLayer=L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'&copy; <a href="http://osm.org/copyright" target="_blank" title="OpenStreetMap közreműködői" data-toggle="tooltip">OSM közr.</a>',minZoom:Maps.settings.minZoom,maxZoom:19,});break;case 'wikimedia.osm':Maps.mapLayer=L.tileLayer('https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png',{attribution:'&copy; <a href="https://foundation.wikimedia.org/wiki/Maps_Terms_of_Use" target="_blank">Wikimedia Maps</a>, <a href="http://osm.org/copyright" target="_blank" title="OpenStreetMap közreműködői" data-toggle="tooltip">OSM közr.</a>',minZoom:Maps.settings.minZoom,maxZoom:19,});break;case 'google.hybrid':Maps.mapLayer=L.tileLayer('https://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}',{attribution:'&copy; <a href="http://maps.google.com" target="_blank">Google</a>',subdomains:['mt0','mt1','mt2','mt3'],minZoom:Maps.settings.minZoom,maxZoom:19,});break}
Maps.myMap.addLayer(Maps.mapLayer);Maps.mapLayerType=layerType;$('.mapLayer').removeClass('active');$('.mapLayer[data-layer="'+layerType+'"]').addClass('active');Store.set('map_layer',layerType)},actualize:function(lat,lon){var lat=typeof lat=='undefined'?Maps.myMap.getCenter().lat:lat;var lon=typeof lon=='undefined'?Maps.myMap.getCenter().lng:lon;var zoom=Maps.myMap.getZoom();var layer=Maps.mapLayerType;if(zoom>=Maps.settings.markerImageFromZoom&&Store.get('map_zoom')<Maps.settings.markerImageFromZoom){location.reload()}
Store.set('map_mycenter',[lat,lon]);Store.set('map_zoom',zoom);if($('.gmap-link')[0]){$('.gmap-link').attr('href','https://www.google.com/maps/@'+lat+','+lon+',215m/data=!3m1!1e3')}
if(Maps.settings.urlPosition){var url_vars='lat='+lat+'&lon='+lon+'&zoom='+zoom+'&layer='+layer;if($('.map-popup:visible').length==1){url_vars+='&mulap='+$('.map-popup:visible').data('id')}else if(Helper.getURLHashParameter('mulap')>0){url_vars+='&mulap='+Helper.getURLHashParameter('mulap')}
if(Helper.getURLHashParameter('kereses')){url_vars+='&kereses'}
url_hash=url_vars;window.location.hash=url_hash;if($('.mapLink')[0]){$('.mapLink').html(url_vars)}}},locateAndListen:function(watchMe,setView){var setView=typeof setView=='undefined'?!0:setView;Maps.myMap.locate({setView:setView,watch:watchMe,enableHighAccuracy:!0}).on('moveend',function(e){Maps.actualize()}).on('zoomend',function(e){Maps.actualize()}).on('locationfound',function(e){if(Maps.settings.showMe){Maps.addMyPosMarker(e.latitude,e.longitude)}
$('.mapAccurancy').html(Math.round(e.accuracy));$('.mapAltitude').html(e.altitude>0?Math.round(e.altitude)+'m':'-');Maps.actualize();if($('.mapHome').hasClass('d-none')){$('.mapHome').removeClass('d-none').addClass('d-inline-block')}
Store.set('map_mypos',[e.latitude,e.longitude]);$myPos=[e.latitude,e.longitude];if(Store.get('isTouch')==1&&Store.get('follow_me')==1){Maps.myMap.panTo([e.latitude,e.longitude],{animate:!0})}}).on('locationerror',function(e){if($('.mapHome').hasClass('d-inline-block')){$('.mapHome').removeClass('d-inline-block').addClass('d-none')}})},follow_me:function(){if(Store.get('isTouch')==0){return}
if($('.follow-me-on-map').hasClass('d-none')){$('.follow-me-on-map').removeClass('d-none')}
if(!Store.get('follow_me')){Store.set('follow_me',0)}
if(Store.get('follow_me')==1){$('.map-settings-icon').removeClass('fa-cog').addClass('fa-walking');$('.follow-me-on-map').addClass('active')}else{$('.map-settings-icon').removeClass('fa-walking').addClass('fa-cog');$('.follow-me-on-map').removeClass('active')}
$(document).on('click','.follow-me-on-map',function(e){e.preventDefault();if(Store.get('follow_me')==1){Store.set('follow_me',0);$('.follow-me-on-map').removeClass('active');$('.map-settings-icon').removeClass('fa-walking').addClass('fa-cog')}else{Store.set('follow_me',1);$('.follow-me-on-map').addClass('active');$('.map-settings-icon').removeClass('fa-cog').addClass('fa-walking');Maps.locateAndListen(!0,!1)}})},addMyMarker:function(lat,lon,erase,iconType,callNominatim){var erase=typeof erase=='undefined'?!1:erase;var iconType=typeof iconType=='undefined'?'default':iconType;var callNominatim=typeof callNominatim=='undefined'?!0:callNominatim;if(erase&&Maps.myMarker){if(Maps.myMarker.getLatLng().lat==lat&&Maps.myMarker.getLatLng().lng==lon){return}
Maps.myMap.removeLayer(Maps.myMarker)}
Maps.myMarker=L.marker([lat,lon],{icon:Maps.icons[iconType],draggable:Maps.settings.markerDraggable});Maps.myMap.addLayer(Maps.myMarker);if(Maps.settings.editing){Artpieces.map_edit(lat,lon,callNominatim);Maps.myMarker.on('dragend',function(e){var call_nominatim=e.distance>20?!0:!1;Artpieces.map_edit(e.target._latlng.lat,e.target._latlng.lng,call_nominatim)})}},addMyPosMarker:function(lat,lon){if(Maps.myPosMarker){if(Maps.myPosMarker.getLatLng().lat==lat&&Maps.myPosMarker.getLatLng().lng==lon){return}
Maps.myMap.removeLayer(Maps.myPosMarker)}
Maps.myPosMarker=L.marker([lat,lon],{icon:Maps.icons.location});Maps.myMap.addLayer(Maps.myPosMarker)},editFunctions:function(){Maps.myMap.on('click',function(e){Maps.addMyMarker(e.latlng.lat,e.latlng.lng,!0);Maps.myMap.setView([e.latlng.lat,e.latlng.lng])});if(!Maps.myMarker){Maps.addMyMarker(Maps.myMap.getCenter().lat,Maps.myMap.getCenter().lng,!1,'default',!0)}},setSize:function(redraw){if(Maps.settings.fullPage){var search_width=$('.artpiece-container').is(':visible')?$('.artpiece-container').outerWidth():0,map_height=$(window).height()-$('.header').height();$('.artpiece-container').height(map_height);$('body').css({'padding':0,'margin':0,'overflow-y':'hidden',});$('#map').width($(window).outerWidth()-search_width).height(map_height);$('#map-topnav').css({'top':$('.header').height(),'right':search_width}).removeClass('d-none')}
if(typeof redraw!='undefined'&&redraw){setTimeout(function(){Maps.myMap.invalidateSize()},375)}},locationIcon:function(){setInterval(function(e){if($('.leaflet-marker-pane img.itsme')[0]){$('.leaflet-marker-pane img.itsme').attr('src','/img/maps/kt-dot-pulse.png');setTimeout(function(){$('.leaflet-marker-pane img.itsme').attr('src','/img/maps/kt-dot.png')},150)}},2000)},artpieces_by_bounds:function(artpiece_ids){var bounds=Maps.myMap.getBounds(),building=!0;if(Store.get('map_zoom')<7&&Maps.artpieceMarkers){Html.overlay('show')}
Artpieces.load_by_bounds(bounds,function(response){Maps.artpiece_markers(response);Maps.artpiece_thumbnail_list(bounds,{limit:100});Html.overlay('hide');building=!1;if(Helper.getURLHashParameter('mulap')){$('img.artpiece-marker-'+Helper.getURLHashParameter('mulap')).click()}});Maps.myMap.on('moveend',function(e){if(Store.get('map_zoom')<7){Html.overlay('show')}
if(!building){building=!0;bounds=Maps.myMap.getBounds();Artpieces.load_by_bounds(bounds,function(response){Maps.artpiece_markers(response);Maps.artpiece_thumbnail_list(bounds,{limit:100});Html.overlay('hide');building=!1})}})},artpieces_by_ids:function(artpiece_ids){Artpieces.load_by_ids(artpiece_ids,function(response){Maps.artpiece_markers(response,!0);Maps.artpiece_thumbnail_list(!1,{limit:100})})},artpiece_markers:function(artpieces,fit_bounds){if(Maps.artpieceMarkers){var fit_bounds=typeof fit_bounds=='undefined'?!1:fit_bounds;if(fit_bounds){var fit_markers=new L.featureGroup()}
artpieces.forEach(function(elem){if(typeof Maps.markerList[elem.i]=='undefined'){if(Maps.myMap.getZoom()>=Maps.settings.markerImageFromZoom){var icon=L.icon({iconUrl:$app.s3_photos+elem.p+'_6.jpg',iconSize:[50,50],iconAnchor:[25,25],className:'img-thumbnail artpiece-marker artpiece-marker-'+elem.i})}else{var icon=L.icon({iconUrl:'/img/maps/marker-icon-2x-grey.png',shadowUrl:'/img/maps/marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],className:'artpiece-marker artpiece-marker-'+elem.i})}
marker=L.marker(new L.LatLng(parseFloat(elem.l[1]),parseFloat(elem.l[0])),{icon:icon,title:elem.t,data_title:elem.t,data_photo:elem.p,data_id:elem.i,data_condition:elem.c,data_location:elem.l2,});var condition_text='';if(elem.c>1){var cond=$sDB.artpiece_conditions[elem.c];condition_text+='<div class="font-weight-normal badge badge-lg badge-'+cond[4]+'">';condition_text+='<span class="fal fa-'+cond[5]+' mr-2"></span>';condition_text+=cond[0];condition_text+='</div>'}
var popupContent='<div class="map-popup text-center" data-id="'+elem.i+'">'+Html.link('<img src="'+$app.s3_photos+elem.p+'_5.jpg" class="img-thumbnail img-fluid">','',{'artpiece':{id:elem.i,title:elem.t}})+'<h5 class="mt-2">'+Html.link(elem.t,'',{'artpiece':{id:elem.i,title:elem.t}})+'</h5>'+condition_text+'</div>';marker.bindPopup(popupContent);Maps.markerClusterer.addLayer(marker);Maps.markerList[elem.i]=!0;if(fit_bounds){fit_markers.addLayer(marker)}}});Maps.myMap.addLayer(Maps.markerClusterer);if(fit_bounds){Maps.myMap.fitBounds(fit_markers.getBounds())}}},artpiece_thumbnail_list:function(bounds,options){if($('.artpiece-container:visible').length==0){return}
if(!bounds){bounds=Maps.myMap.getBounds()}
var options=_arr(options,{limit:200,});$('.maxInfo').remove();$('.artpiece-list .artpiece-item').remove();var counted=0;Maps.get_bound_artpieces(bounds,{limit:options.limit},function(artpiece){var a={id:artpiece.data_id,title:artpiece.data_title,photo_slug:artpiece.data_photo,lat:artpiece.lat,lon:artpiece.lon,};if(!$('.artpiece-list .artpiece-'+a.id)[0]){var s='<div class="col-6 col-md-4 mb-4 artpiece-item artpiece-'+a.id+' text-center">';s+=Html.link('<img src="'+$app.s3_photos+a.photo_slug+'_5.jpg" class="img-fluid img-thumbnail" />','#',{'class':'showOnMap','data-lat':a.lat,'data-lon':a.lon,'data-id':a.id,});s+='<div class="mt-1 text-center small font-weight-bold">'+Html.link(a.title,'',{artpiece:{id:a.id,title:a.title},icon_right:'arrow-right fal',})+'</div>';s+='</div>';$('.artpiece-list').append(s);counted++}});if(counted==options.limit){$('.artpiece-list').append('<div class="col-12 py-2 text-muted text-center maxInfo">Maximum '+options.limit+' alkotást mutatunk a térképszelvényről.</div>')}},get_bound_artpieces:function(bounds,options,callback){var options=_arr(options,{limit:200,}),artpieces=[],counted=0;Maps.myMap.eachLayer(function(layer){if(layer instanceof L.Marker&&bounds.contains(layer.getLatLng())){if(typeof(layer._markers)!=='undefined'){(layer._markers).forEach(function(marker){if(typeof marker.options.data_id!='undefined'){counted++;if(counted>options.limit){return}
if(typeof artpieces['id'+marker.options.data_id]=='undefined'){marker.options.lat=marker._latlng.lat;marker.options.lon=marker._latlng.lng;callback(marker.options)}
artpieces['id'+marker.options.data_id]=!0}})}else if(typeof(layer.options.data_title)!=='undefined'){counted++;if(counted>options.limit){return}
if(typeof artpieces['id'+layer.options.data_id]=='undefined'){layer.options.lat=layer._latlng.lat;layer.options.lon=layer._latlng.lng;callback(layer.options)}
artpieces['id'+layer.options.data_id]=!0}}else if(layer instanceof L.MarkerClusterGroup){layer.eachLayer(function(marker){if(bounds.contains(marker.getLatLng())){counted++;if(counted>options.limit){return}
if(typeof artpieces['id'+marker.options.data_id]=='undefined'){marker.options.lat=marker._latlng.lat;marker.options.lon=marker._latlng.lng;callback(marker.options)}
artpieces['id'+marker.options.data_id]=!0}})}});return},marker_progress:function(processed,total,elapsed,layersArray){if($('#leaflet-progress')[0]){if(elapsed>100){$('#leaflet-progress').removeClass('d-none').addClass('d-block');$('#leaflet-progress-bar').css({'width':Math.round(processed/total*100)+'%'});if(processed===total){$('#leaflet-progress').removeClass('d-block').addClass('d-none')}}}},};var s,Notifications={settings:{},init:function(){s=this.settings;if($app.auth&&$app.user_pause==0&&$app.user_notification_pause==0&&Store.get('notification-count')>0){this.setCount(Store.get('notification-count'))}
if($app.user_pause==1||$app.user_notification_pause==1){$('.notifications-empty').html('Kikapcsoltad az értesítéseket, '+Html.link('kezelés','/tagsag/beallitasok#ertesitesek')+'.');$('.notification-icon-container span.far').removeClass('fa-bell').addClass('fa-bell-slash')}
this.bindUIActions()},bindUIActions:function(){var that=this},setCount:function(count){Store.set('notification-count',count);if(count>0){$('.notification-count').addClass('bg-orange-dark').html(count);$('.navlink-notification-count').html(' ('+count+')')}else{$('.notification-count').removeClass('bg-orange-dark').html('&nbsp;');$('.notification-item').remove();$('.notifications-empty').show();$('.navlink-notification-count').html('')}},buildList:function(object){var that=this,start_count=0,added_count=0,shown_ids=[];if(typeof object!="undefined"&&object.length>0){$('.notifications-empty').hide();$(object).each(function(key,elem){if(!$('.notification-'+elem.id)[0]){if(typeof elem.link!='undefined'){var link=elem.link,link_class=' cursor-pointer';if(elem.link==$app.here){Notifications.read_toggle(elem.id)}}else{var link='',link_class=''}
var item='<div class="dropdown-item p-2 border-bottom notification-'+elem.id+' notification-item" id="notification-'+elem.id+'">'+'<div class="'+link_class+'" ia-href="'+link+'"'+' ia-bind="notifications.read_toggle" ia-pass="'+elem.id+'" ia-hide=".notification-'+elem.id+'" '+' ia-target=".list-notification-'+elem.id+' .readToggle .far" ia-toggleclass="fa-dot-circle fa-circle" '+'>'+'<span class="font-weight-bold">'+elem.title+'</span>&nbsp;'+'<span class="text-muted">'+elem.content+'</span>'+'</div>'+'<div class="row">'+'<div class="col-4'+link_class+'" ia-href="'+link+'">'+'<small class="text-muted text-nowrap"><span class="far fa-clock"></span> '+Helper.timeConverter(elem.created,'short',!0)+'</small>'+'</div>'+'<div class="col-8 text-right">'+'<small class="text-muted">'+'<a href="#notification-'+elem.id+'" class="mr-2" '+' ia-bind="notifications.read_toggle" ia-pass="'+elem.id+'" ia-hide=".notification-'+elem.id+'" '+' ia-target=".list-notification-'+elem.id+' .readToggle .far" ia-toggleclass="fa-dot-circle fa-circle" '+'data-toggle="tooltip" title="Értesítő olvasottá tétele">'+'<span class="far fa-lg p-1 fa-dot-circle fa-lg"></span>'+'</a>'+'</small>'+'</div>'+'</div>'+'</div>';$('.notification-list').prepend(item)}
shown_ids[elem.id]=!0});$('.notification-item').last().removeClass('border-bottom');$('.notification-item').each(function(key,elem){var id=$(this).attr('id').split('-')[1];if(typeof shown_ids[id]=='undefined'){$('#notification-'+id).remove()}})}
var new_count=typeof object!="undefined"?object.length:0;Store.set('notification-count',new_count);if($app.auth&&$app.user_pause==0&&$app.user_notification_pause==0){that.setCount(new_count)}},read_toggle:function(pass){var that=this;Http.put('api/notifications/put/'+pass,{'read_toggle':1},function(response){Users.getLatest();$('.list-notification-'+pass).toggleClass('bg-yellow-light');$('.list-notification-'+pass+' .title').toggleClass('font-weight-bold');if($('.list-notification-'+pass+' .title').hasClass('font-weight-bold')){var new_count=parseInt(Store.get('notification-count'))+1}else{var new_count=parseInt(Store.get('notification-count'))-1}
Store.set('notification-count',new_count);that.setCount(new_count)})},read_all:function(pass){var that=this;Http.post('api/notifications/read_all/',{},function(response){Users.getLatest();$('.list-notification').removeClass('bg-yellow-light');$('.list-notification .title').removeClass('font-weight-bold');$('.list-notification .readToggle span').removeClass('fa-dot-circle').addClass('fa-circle');Store.set('notification-count',0);that.setCount(0)})},};var s,Users={settings:{},init:function(){s=this.settings;this.bindUIActions();this.getLatest();clearTimeout($app.ic.latest);this.pollLatest($app.latest_interval*1000)},bindUIActions:function(){var that=this;this.follows()},getLatest:function(){var that=this;if($app.auth&&$app.user_pause==0){Http.get('api/updates',function(response){if($app.auth&&$app.user_notification_pause==0){Notifications.buildList(response.notifications,!0)}
Conversations.buildList(response.conversations,!0)})}},pollLatest:function(interval){var that=this;if($app.auth&&$app.user_pause==0){$app.ic.latest=window.setTimeout(function(){Http.get('api/updates',function(response){if($app.auth&&$app.user_notification_pause==0){Notifications.buildList(response.notifications,!0)}
Conversations.buildList(response.conversations,!0);that.pollLatest(interval)})},interval)}},tiny_settings:function(pass,vars,redirect,elem){var that=this;if(typeof vars.toggle_button!='undefined'&&vars.toggle_button!=''){var variable_name=vars.toggle_button;vars={};vars[variable_name]=$(elem).val()}
Http.put('api/users',$.extend({tiny_settings:1},vars),function(response){})},follows:function(){if(!$app.auth){return}
$('[ia-follow]').removeClass('d-none');$(document).on('click','[ia-follow]',function(e){e.preventDefault();var that=this;if($(this).attr('ia-follow')=='this'){var model=$app.model,model_id=$app.model_id}else{var model=$(this).attr('ia-follow').split(':')[0],model_id=$(this).attr('ia-follow').split(':')[1]}
if(model!=''&&(model_id>0||model_id!='')){Http.put('api/follows/toggle',{model:model,model_id:model_id,},function(response){if(response.success==1){$(that).find('.link-text').html('<span class="d-none d-md-inline">Követed</span>');$(that).find('.fa-star').removeClass('far').addClass('fas text-primary')}else{$(that).find('.link-text').html('<span class="d-none d-md-inline">Követés</span>');$(that).find('.fa-star').removeClass('fas text-primary').addClass('far')}})}});var follows=[],multi=!1,single=!1;$('[ia-follow]').each(function(){if($(this).attr('ia-follow')!='this'){follows.push([$(this).attr('ia-follow').split(':')[0],$(this).attr('ia-follow').split(':')[1]]);multi=!0}});if(!multi&&($app.model_id>0||$app.model_id!='')){follows.push([$app.model,$app.model_id]);single=!0}
if(follows.length>0){Http.post('api/follows/info',{'data':follows},function(response){if(response.length>0){if(single){$('[ia-follow]').find('.fa-star').removeClass('far').addClass('fas text-primary');$('[ia-follow]').find('.link-text').html('<span class="d-none d-md-inline">Követed</span>')}else{$(response).each(function(){$('[ia-follow="'+this[0]+':'+this[1]+'"]').find('.fa-star').removeClass('far').addClass('fas text-primary')});$('[ia-follow]').find('.link-text').html('<span class="d-none d-md-inline">Követés</span>')}}},{'silent':!0})}},logoutClear:function(){Store.clearAll();Store.set('cookie-accept',1)},};$sDB={"texts":{"kommunikacios_hiba":"<strong>V\u00e1ratlan kommunik\u00e1ci\u00f3s hiba.<\/strong> Amennyiben a hiba tart\u00f3san fenn\u00e1ll, k\u00e9rj\u00fck, jelezd az \u00fczemgazd\u00e1nak!","varatlan_hiba":"<strong>V\u00e1ratlan hiba t\u00f6rt\u00e9nt a folyamat sor\u00e1n.<\/strong> Amennyiben a hiba tart\u00f3san fenn\u00e1ll, k\u00e9rj\u00fck, jelezd az \u00fczemgazd\u00e1nak!","mentes_hiba":"<strong>Hiba t\u00f6rt\u00e9nt a ment\u00e9s sor\u00e1n.<\/strong> Amennyiben a hiba az oldal friss\u00edt\u00e9se ut\u00e1n is tart\u00f3san fenn\u00e1ll, k\u00e9rj\u00fck, jelezd az \u00fczemgazd\u00e1nak!","torles_hiba":"<strong>Hiba t\u00f6rt\u00e9nt a t\u00f6rl\u00e9s sor\u00e1n.<\/strong> Amennyiben a hiba az oldal friss\u00edt\u00e9se ut\u00e1n is tart\u00f3san fenn\u00e1ll, k\u00e9rj\u00fck, jelezd az \u00fczemgazd\u00e1nak!","sikeres_masolas":"A k\u00e9rt m\u00e1sol\u00e1s sikeresen lefutott.","sikeres_athelyezes":"A k\u00e9rt \u00e1thelyez\u00e9s sikeresen lefutott.","sikeres_torles":"A k\u00e9rt t\u00f6rl\u00e9s sikeresen lefutott.","sikeres_mentes":"Sikeresen mentett\u00fck az \u0171rlap adatait.","hibas_url":"<strong>Hib\u00e1s webc\u00edm, vagy URL azonos\u00edt\u00f3.<\/strong> A link hib\u00e1s, elavult, vagy jogosults\u00e1gi okokb\u00f3l nem el\u00e9rhet\u0151.","jogosultsagi_hiba":"<strong>Jogosults\u00e1gi hiba.<\/strong> A v\u00e9grehajtani k\u00edv\u00e1nt m\u0171velethez nem megfelel\u0151 a jogosults\u00e1god, vagy m\u00e1s egyedi hiba t\u00f6rt\u00e9nt. Amennyiben a hiba tart\u00f3san fenn\u00e1ll, k\u00e9rj\u00fck, jelezd az \u00fczemgazd\u00e1nak!","nem_publikus_mulap":"<strong>A m\u0171lap nem el\u00e9rhet\u0151.<\/strong> A m\u0171lap st\u00e1tusza jelenleg nem publikus.","nem_publikus_mulap_tagoknak":"<strong>A m\u0171lap st\u00e1tusza: {status}.<\/strong> Csak a publikus, a k\u00f6zt\u00e9rre k\u00fcld\u00f6tt \u00e9s a visszak\u00fcld\u00f6tt lapokat \u00e9rheted el. Amennyiben szerkeszt\u00e9s alatti lapot nyitn\u00e1l meg, k\u00e9rd meg a m\u0171lap l\u00e9trehoz\u00f3j\u00e1t, hogy h\u00edvjon meg szerkeszt\u00e9sre.","nem_szerkesztheto_mulap":"<strong>A m\u0171lap st\u00e1tusza: {status}.<\/strong> Csak a publikus \u00e9s a k\u00f6zt\u00e9rre k\u00fcld\u00f6tt m\u0171lapokat nyithatod meg szerkeszt\u00e9sre.","jelentkezz_be":"<strong>Bel\u00e9p\u00e9s sz\u00fcks\u00e9ges.<\/strong> A k\u00e9rt oldal megtekint\u00e9s\u00e9hez be kell jelentkezned.","gyorskuldes":"Ctrl + Enter megnyom\u00e1s\u00e1ra is lefut a k\u00fcld\u00e9s.","szoveg_formazas":"El\u00e9rhet\u0151 form\u00e1z\u00e1s: <strong>*f\u00e9lk\u00f6v\u00e9r*<\/strong>.","nincs_talalat":"Nincs tal\u00e1lat a megadott felt\u00e9telekkel.","nem_mentett_modositasok":"Nem mentett m\u00f3dos\u00edt\u00e1sokat \u00e9szlelt\u00fcnk. Biztosan elhagyod ezt az oldalt?","torolt_tag_neve":"<span title=\"A tag t\u00f6r\u00f6lte mag\u00e1t kor\u00e1bban, \u00edgy m\u00e1r nem tudunk semmit r\u00f3la.\" data-toggle=\"tooltip\">T\u00f6r\u00f6lt tag<\/span>","foszerk_ikon":"<span class=\"far fa-glasses-alt mr-2\" title=\"Ez a funkci\u00f3 csak f\u0151szerkeszt\u0151knek, tan\u00e1csad\u00f3knak \u00e9s adminoknak \u00e9rhet\u0151 el\" data-toggle=\"title\"><\/span>","nincs_elem":"Nincs ilyen elem..."},"user_roles":{"665":"f\u0151szerkeszt\u0151 \u00e9s alkat\u00f3t\u00e1bor kezel\u0151","585":"f\u0151szerkeszt\u0151 \u00e9s telep\u00fcl\u00e9st\u00e1r kezel\u0151","99":"f\u0151szerkeszt\u0151i tan\u00e1csad\u00f3","148":"akkor \u00e9s most & Facebook-felel\u0151s","772":"gy\u0171jtem\u00e9ny kezel\u0151","1":"\u00fczemgazda"},"cookie_descriptions":{"KT-latogato":"Az ebben t\u00e1rolt adattal azonos\u00edt t\u00e9ged a K\u00f6zt\u00e9rk\u00e9p saj\u00e1t nyilv\u00e1nos webstatisztik\u00e1ja.","KT-belepvetarto":"Ha bejelentkezel \u00e9s pip\u00e1lod, hogy jegyezze meg a bel\u00e9p\u00e9sedet a b\u00f6ng\u00e9sz\u0151, akkor ennek seg\u00edts\u00e9g\u00e9vel tudjuk, hogy te vagy te.","KT-munkamenet":"Ez azonos\u00edtja az aktu\u00e1lis munkamenetedet, ami seg\u00edt abban, hogyha egyik oldalr\u00f3l a m\u00e1sikra kattintasz, vagy \u00e9pp egy \u0171rlapot mentesz, akkor is tudja a szerver, hogy te vagy az, aki az el\u0151bb megnyomta a gombot."},"limits":{"artpieces":{"weekly_max":5,"top_photo_min":8,"top_photo_max":24},"photos":{"min_size":1000,"archive_min_size":400,"min_count":5,"min_count_na":1,"max_upload_total":50},"descriptions":{"min_hun":225,"min_eng":100},"edits":{"inactive_after_months":6,"wait_days":5},"headitors":{"superb_revote":"-4 years"},"games":{"hug_container_distance":1500,"hug_distance":50,"hug_days":14},"posts":{"intro_max_length":350,"text_min_length":100}},"photo_quality":70,"photo_sizes":{"1":1200,"2":800,"3":500,"4":500,"5":250,"6":150,"7":75,"8":16},"artpiece_conditions":{"1":["Megl\u00e9v\u0151",1,1,1,"success","check"],"2":["Elpusztult",2,0,0,"warning","empty-set"],"3":["Tudsz r\u00f3la?",3,0,0,"warning","question-square"],"4":["Vesz\u00e9lyben",4,1,1,"danger","exclamation-square"],"10":["\u00c1thelyezve innen",5,0,0,"info","truck-loading"],"5":["Lebontott",6,0,0,"info","arrow-to-bottom"],"6":["\u00c1tmenetileg nincs a hely\u00e9n",7,1,0,"warning","retweet-alt"],"7":["Ellopt\u00e1k, elt\u0171nt",8,1,0,"danger","user-secret"],"8":["Megrong\u00e1l\u00f3dott",9,0,1,"danger","monument fa-rotate-90"],"9":["Megrong\u00e1lt\u00e1k",10,1,1,"danger","user-ninja"]},"artpiece_statuses":{"1":["Szerkeszt\u00e9s alatt","warning"],"2":["K\u00f6zt\u00e9rre k\u00fcldve","success"],"3":["Visszak\u00fcld\u00f6tt","danger"],"4":["Visszavett","secondary"],"5":["Publikus","primary"],"6":["Elvetett","danger"]},"edit_statuses":{"1":["Szerkeszt\u00e9s alatt"],"2":["V\u00e1rakoz\u00f3"],"3":["\u00dajranyitott"],"4":["Visszavont"],"5":["Beemelt"],"6":["Elvetett"],"7":["Szerkeszt\u00e9ssel fel\u00fcl\u00edrt"]},"hidden_edit_fields":["id","hug_id","artpiece_id","prev_data","status_id","user_id","manage_user_id","receiver_user_id","created","modified","approved","edit_type_id","before_shared"],"artpiece_fields":{"id":"AZ","status_id":"St\u00e1tusz","user_id":"Tag","created":"L\u00e9trehoz\u00e1s","modified":"M\u00f3dos\u00edt\u00e1s","approved":"Elfogad\u00e1s","address":"Utca, hsz.","photo_id":"Bor\u00edt\u00f3 AZ","photo_slug":"Bor\u00edt\u00f3 k\u00e9p","place_description":"Hely le\u00edr\u00e1sa","title":"C\u00edm","title_alternatives":"Alternat\u00edv, helyi c\u00edm","title_en":"Angol c\u00edm","text":"Le\u00edr\u00e1s","text_en":"Angol le\u00edr\u00e1s","source":"Forr\u00e1s","links":"Linkek","parameters":"Param\u00e9terek","descriptions":"Le\u00edr\u00e1sok","unveil_date":"Avat\u00e1si d\u00e1tum","place_id":"Telep\u00fcl\u00e9s","country_id":"Orsz\u00e1g","county_id":"Megye","district_id":"Ker\u00fclet","lat":"Lat.","lon":"Lon.","lng":"Lon.","manage_user_id":"Kezel\u0151","artpiece_condition_id":"\u00c1llapot","artpiece_location_id":"Elhelyezked\u00e9s","not_public_type_id":"K\u00f6z\u00f6ss\u00e9gi t\u00e9r t\u00edpusa","hun_related":"Magyar vonatkoz\u00e1s\u00fa","not_artistic":"Nincs m\u0171v\u00e9szi elem","dates":"D\u00e1tumok","photolist":"Fot\u00f3k adatai","photos":"Fot\u00f3 sorrend v\u00e1ltoz\u00e1sa","top_photo_count":"Kiemelt k\u00e9pek sz\u00e1ma","original_unveil_date":"Eredeti avat\u00e1si d\u00e1tum","original_unveil_date_unknown":"Eredeti avat\u00e1si d\u00e1tum ismeretlen","temporary":"\u00c1tmeneti fel\u00e1ll\u00edt\u00e1s","dismantling_date":"Elbont\u00e1s id\u0151pontja","anniversary":"\u00c9vfordul\u00f3s","local_importance":"Helyi jelent\u0151s\u00e9g","national_heritage":"Nyilv\u00e1ntartott m\u0171eml\u00e9k","copy":"M\u00e1solat","reconstruction":"Rekonstrukci\u00f3","connected_artpieces":"Kapcsol\u00f3d\u00f3 m\u0171lapok","connected_sets":"Kapcsolt gy\u0171jtem\u00e9nyek"},"photo_fields":{"rank":"Sorsz\u00e1m","top":"Kiemelt","text":"Le\u00edr\u00e1s","source":"Forr\u00e1s","other":"Adal\u00e9k","other_place":"Nem a helysz\u00ednr\u0151l","joy":"\u00c9lm\u00e9nyk\u00e9p","artist":"Alkot\u00f3 a k\u00e9pen","artist_id":"Alkot\u00f3 a k\u00e9pen","sign_artist_id":"Alkot\u00f3","unveil":"Avat\u00e1st l\u00e1tunk","sign":"Szign\u00f3 a k\u00e9pen","archive":"Arch\u00edv fot\u00f3","cover":"Bor\u00edt\u00f3k\u00e9p","year":"\u00c9vsz\u00e1m","license_type_id":"K\u00e9p felhaszn\u00e1lhat\u00f3s\u00e1ga"},"parameter_groups":{"1":["T\u00edpus","list-alt"],"2":["St\u00edlus","pencil-ruler"],"3":["\u00c1br\u00e1zolt form\u00e1k","dice-d4"],"4":["Anyag","cube"],"5":["Vall\u00e1si kapcsol\u00f3d\u00e1s","place-of-worship"],"6":["T\u00f6rt\u00e9nelmi kapcsol\u00f3d\u00e1s","monument"],"7":["M\u0171eml\u00e9k jelleg","landmark"]},"artist_professions":{"1":["Szobr\u00e1sz",1,1],"2":["K\u0151farag\u00f3",1,1],"3":["\u00c9p\u00edt\u00e9sz",1,0],"4":["Tervez\u0151",1,1],"5":["Kivitelez\u0151",1,0],"6":["Fest\u0151m\u0171v\u00e9sz",1,1],"7":["C\u00edmerfest\u0151",0,1],"8":["Keramikus",1,1],"9":["K\u00e9pz\u0151m\u0171v\u00e9sz",1,1],"10":["Grafikus",0,1],"11":["D\u00edsz\u00edt\u0151szobr\u00e1sz",0,1],"12":["Bronzm\u0171v\u00e9sz",0,1],"13":["Mozaikk\u00e9sz\u00edt\u0151",1,1],"14":["\u00d6tv\u00f6sm\u0171v\u00e9sz",1,1],"15":["Iparm\u0171v\u00e9sz",1,1],"16":["\u00dcvegm\u0171v\u00e9sz",1,1],"17":["D\u00edszm\u0171kov\u00e1cs",1,1],"18":["Fafarag\u00f3",1,1],"19":["Aranym\u0171ves",0,1],"20":["Textilm\u0171v\u00e9sz",1,1],"21":["N\u00e9pm\u0171v\u00e9sz",0,1],"22":["Egy\u00e9b",0,1],"23":["Bronz\u00f6nt\u0151",1,1],"24":["\u00c9p\u00edt\u00e9sz",0,1],"25":["Restaur\u00e1tor",1,1],"26":["Porcel\u00e1nm\u0171v\u00e9sz",0,1]},"before_names":{"1":"ifj.","2":"id.","3":"Dr.","4":"Prof.","5":"DLA","6":"legifj."},"not_public_types":{"1":["Templombels\u0151","place-of-worship"],"2":["Temet\u0151, s\u00edrkert","tombstone-alt"],"3":["M\u00fazeum ter\u00fclete","university"],"4":["Oktat\u00e1si int\u00e9zm\u00e9ny ter\u00fclete","school"],"5":["Egy\u00e9b int\u00e9zm\u00e9ny ter\u00fclete","building"],"6":["Egy\u00e9b kert, park vagy udvar","trees"]},"artpiece_type_groups":{"1":"\u00c1tfog\u00f3 besorol\u00e1sok","2":"Alapvet\u0151 t\u00edpusok","3":"Mur\u00e1lia t\u00edpusok","4":"V\u00edzzel kapcsolatos t\u00edpusok","5":"Egy\u00e9b t\u00edpusok"},"artpiece_form_groups":{"1":"","2":"Alakos (figur\u00e1lis)"},"artpiece_connection_types":["Kapcsol\u00f3d\u00f3","P\u00e9ld\u00e1ny","El\u0151zm\u00e9ny","Ut\u00f3d"],"artpiece_flagtypes":{"1":["Publik\u00e1l\u00e1s"],"2":["Kit\u00fcntet\u00e9s"],"3":["Duplik\u00e1ci\u00f3"],"4":["\u00c1tad\u00e1s"],"5":["Nyitott k\u00e9rd\u00e9s"],"6":["Sz\u00e9tszedhet\u0151"],"7":["Fot\u00f3\u00e9hes"],"8":["Elvekbe \u00fctk\u00f6z\u0151"]},"forum_topics":{"6":["F\u0151szerkSzoba",1,"glasses-alt"],"4":["Besz\u00e9lj\u00fck meg",0,"comments"],"16":["Felt\u00f6lt\u00e9si \u00f6tletek",0,"lightbulb"],"9":["Sajt\u00f3figyel\u0151 \u00e9s aj\u00e1nl\u00f3",0,"newspaper"],"7":["Tudsz r\u00f3la? Keress\u00fck!",0,"question"],"8":["P\u00f3l\u00f3k \u00e9s rendel\u00e9s",0,"tshirt"]},"month_names":{"1":"Janu\u00e1r","2":"Febru\u00e1r","3":"M\u00e1rcius","4":"\u00c1prilis","5":"M\u00e1jus","6":"J\u00fanius","7":"J\u00falius","8":"Augusztus","9":"Szeptember","10":"Okt\u00f3ber","11":"November","12":"December"},"day_names":{"1":"H\u00e9tf\u0151","2":"Kedd","3":"Szerda","4":"Cs\u00fct\u00f6rt\u00f6k","5":"P\u00e9ntek","6":"Szombat","7":"Vas\u00e1rnap"},"date_types":{"unveil":"Avat\u00e1s","erection":"Fel\u00e1ll\u00edt\u00e1s","created":"K\u00e9sz\u00edt\u00e9s","dismantle":"Elbont\u00e1s"},"numbers":{"1":"egy","2":"kett\u0151","3":"h\u00e1rom","4":"n\u00e9gy","5":"\u00f6t","6":"hat","7":"h\u00e9t","8":"nyolc","9":"kilenc","10":"t\u00edz","11":"tizenegy","12":"tizenkett\u0151","13":"tizenh\u00e1rom","14":"tizenn\u00e9gy","15":"tizen\u00f6t","16":"tizenhat","17":"tizenh\u00e9t","18":"tizennyolc","19":"tizenkilenc","20":"h\u00fasz"},"set_types":{"1":"K\u00f6z\u00f6s","2":"Tagi","3":"M\u00falt Kincse"},"post_categories":{"1":["G\u00e9ph\u00e1z",1,"gephaz"],"2":["Alkot\u00f3k",0,"alkotok"],"3":["Helyek",0,"helyek"],"4":["M\u0171lapok",0,"mulapok"],"5":["Aj\u00e1nl\u00f3",0,"ajanlo"],"6":["Interj\u00fa",0,"interju"],"7":["Kutat\u00e1s",0,"kutatas"],"8":["Szubjekt\u00edv",0,"szubjektiv"],"9":["P\u00e1ly\u00e1zat",0,"palyazat"],"10":["Heti sz\u00fcret",1,"heti-szuret"],"11":["Seg\u00e9dlet",1,"segedlet"]},"user_scores":{"settings":{"min_points":1,"max_points":5,"headitor_points":10},"values":{"artpiece":15,"photo":1,"description":4,"edit":3}},"artpiece_vote_types":{"publish":[1,"Publik\u00e1l\u00e1s",0,15],"publish_pause":[2,"Publik\u00e1l\u00e1s sz\u00fcneteltet\u00e9se",1,!1],"praise":[3,"Sz\u00e9p m\u0171lap!",0,!1],"superb":[4,"P\u00e9ld\u00e1s m\u0171lap!",1,2],"question":[5,"Nyitott k\u00e9rd\u00e9s",1,!1],"edit_accept":[6,"Szerkeszt\u00e9s elfogad\u00e1s",0,10]},"event_types":{"1":["K\u00f6zt\u00e9rre k\u00fcld\u00e9s","artpiece",0,1],"2":["K\u00f6zt\u00e9rr\u0151l visszav\u00e9tel","artpiece",0,1],"3":["Visszak\u00fcld\u00e9s","artpiece",0,1],"4":["Saj\u00e1t publik\u00e1l\u00e1s","artpiece",1,1],"5":["K\u00f6z\u00f6ss\u00e9gi publik\u00e1l\u00e1s","artpiece",1,1],"6":["Fot\u00f3 felt\u00f6lt\u00e9s","artpiece",1,0],"7":["\u00c9rint\u00e9s","artpiece",1,0],"8":["T\u00e9rkapszula felt\u00f6r\u00e9se","artpiece",1,0],"9":["P\u00e9ld\u00e1s m\u0171lap megszavaz\u00e1sa","artpiece",1,1],"10":["Sz\u00e9p munka! jel\u00f6l\u00e9s","artpiece",1,0],"11":["M\u0171lap \u00e1tad\u00e1sa","artpiece",1,1],"12":["Szerkeszt\u00e9s j\u00f3v\u00e1hagy\u00e1s","edit",1,1],"13":["Szerkeszt\u00e9s megszavaz\u00e1sa","edit",1,1],"14":["Szerkeszt\u00e9s elutas\u00edt\u00e1sa","edit",0,1],"15":["Szerkeszt\u00e9s visszavon\u00e1sa","edit",0,1],"16":["Szerkeszt\u00e9s \u00fajranyit\u00e1sa","edit",0,1],"17":["Szerkeszt\u00e9s vissza\u00e1ll\u00edt\u00e1sa","edit",0,1],"18":["\u00daj tag regisztr\u00e1ci\u00f3ja","user",1,1],"19":["Tag saj\u00e1t publik\u00e1l\u00f3v\u00e1 v\u00e1lt","user",1,1],"20":["Heti kiemelt szerkeszt\u0151","user",1,1],"21":["Tag m\u00e9rf\u00f6ldk\u0151","user",1,1],"22":["\u00daj blogbejegyz\u00e9s","post",1,0],"23":["G\u00e9ph\u00e1z blogbejegyz\u00e9s","post",1,1],"24":["\u00daj k\u00f6nyv a k\u00f6nyvt\u00e9ren","book",1,0],"25":["\u00daj mappa publik\u00e1l\u00e1sa","folder",1,0],"26":["\u00daj napt\u00e1resem\u00e9ny","calendar",1,0],"27":["K\u00f6zt\u00e9rG\u00e9p mondja","robot",1,1],"28":["Fot\u00f3 felt\u00f6lt\u00e9s","artist",1,0],"29":["Visszanyit\u00e1s","artpiece",0,1]},"notification_types":{"artpieces":["M\u0171lapok","Saj\u00e1t m\u0171lapjaidhoz \u00e9rkez\u0151 hozz\u00e1sz\u00f3l\u00e1sok, szerkeszt\u00e9sek, fot\u00f3k, dics\u00e9retek, st\u00e1tuszv\u00e1ltoz\u00e1sok \u00e9s egy\u00e9b esem\u00e9nyek, valamint m\u0171lap szerkeszt\u00e9si megh\u00edv\u00e1sok."],"edits":["Szerkeszt\u00e9s","Saj\u00e1t szerkeszt\u00e9seddel kapcsolatos hozz\u00e1sz\u00f3l\u00e1sok \u00e9s esem\u00e9nyek."],"comments":["V\u00e1laszok","Hozz\u00e1sz\u00f3l\u00e1saidra adott v\u00e1laszok b\u00e1rhol."],"things":["Saj\u00e1t dolgaim","Saj\u00e1t mapp\u00e1idat, gy\u0171jtem\u00e9nyeidet, k\u00f6nyveidet, posztjaidat \u00e9rint\u0151 esem\u00e9nyek."],"games":["J\u00e1t\u00e9k","Saj\u00e1t m\u0171lapjaid \u00e9rint\u00e9se, t\u00e9rkapszula felt\u00f6r\u00e9se \u00e9s m\u00e1s j\u00e1t\u00e9kos \u00e9rtes\u00edt\u00e9sek."],"others":["Egy\u00e9b","Figyelt f\u00f3rumok hozz\u00e1sz\u00f3l\u00e1sai \u00e9s egy\u00e9b t\u00e9ged \u00e9rint\u0151 \u00e9rtes\u00edt\u00e9sek."]},"model_parameters":{"artpieces":["m\u0171lap","m\u0171lapok","\/"],"artpiece_edits":["szerkeszt\u00e9s","szerkeszt\u00e9sek"],"artists":["alkot\u00f3","alkot\u00f3k","\/alkotok\/megtekintes\/"],"places":["hely","helyek","\/helyek\/megtekintes\/"],"users":["profil","profilok","\/kozosseg\/profil\/"],"folders":["mappa","mapp\u00e1k","\/mappak\/megtekintes\/"],"books":["k\u00f6nyv","k\u00f6nyvek","\/digitar\/konyv\/"],"posts":["blogposzt","blogposztok","\/blogok\/megtekintes\/"],"pages":["oldal","oldalak","\/oldal\/"],"forum_topics":["f\u00f3rum t\u00e9ma","f\u00f3rum t\u00e9m\u00e1k","\/kozter\/forum-tema\/"],"sets":["gy\u0171jtemeny","gy\u0171jtem\u00e9nyek","\/gyujtemenyek\/megtekintes\/"]},"license_types":{"1":"Nevezd meg! 4.0 Nemzetk\u00f6zi","2":"Nevezd meg! - \u00cdgy add tov\u00e1bb! 4.0 Nemzetk\u00f6zi","3":"Nevezd meg! - Ne v\u00e1ltoztasd! 4.0 Nemzetk\u00f6zi","4":"Nevezd meg! - Ne add el! 4.0 Nemzetk\u00f6zi","5":"Nevezd meg! - Ne add el! - \u00cdgy add tov\u00e1bb! 4.0 Nemzetk\u00f6zi","6":"Nevezd meg! - Ne add el! - Ne v\u00e1ltoztasd! 4.0 Nemzetk\u00f6zi","7":"Nincs enged\u00e9ly"},"license_transmissions":{"1":{"parents":[2,3,4,5,6,7],"children":[]},"2":{"parents":[5,7],"children":[1]},"3":{"parents":[6,7],"children":[1]},"4":{"parents":[5,6,7],"children":[1]},"5":{"parents":[7],"children":[1,2,4]},"6":{"parents":[7],"children":[1,3,4]},"7":{"parents":[],"children":[1,2,3,4,5,6]}},"license_infos":{"1":[["fab fa-creative-commons","fab fa-creative-commons-by"],"https:\/\/creativecommons.org\/licenses\/by\/4.0\/deed.hu"],"2":[["fab fa-creative-commons","fab fa-creative-commons-by","fab fa-creative-commons-sa"],"https:\/\/creativecommons.org\/licenses\/by-sa\/4.0\/deed.hu"],"3":[["fab fa-creative-commons","fab fa-creative-commons-by","fab fa-creative-commons-nd"],"https:\/\/creativecommons.org\/licenses\/by-nd\/4.0\/deed.hu"],"4":[["fab fa-creative-commons","fab fa-creative-commons-by","fab fa-nc"],"https:\/\/creativecommons.org\/licenses\/by-nc\/4.0\/deed.hu"],"5":[["fab fa-creative-commons","fab fa-creative-commons-by","fab fa-nc","creative-commons-sa"],"https:\/\/creativecommons.org\/licenses\/by-nc-sa\/4.0\/deed.hu"],"6":[["fab fa-creative-commons","fab fa-creative-commons-by","fab fa-nc","creative-commons-nd"],"https:\/\/creativecommons.org\/licenses\/by-nc-nd\/4.0\/deed.hu"],"7":[["fas fa-ban"],""]},"similar_excludes":[" a "," az "," \u00e9s ","egy ","k\u00e9t "," and "," or "," the "," in ","-h\u00e1z"," for "," to "," is "," at "," with ","I.","II.","III.","V.","VI.","VIII.","IX.","X.","gr\u00f3f","Gr\u00f3f","eml\u00e9km\u0171ve","-eml\u00e9km\u0171","domborm\u0171","-eml\u00e9kt\u00e1bla","szent","-szobor"," szobor"," szobra","egykori"],"districts":{"1":["I. ker\u00fclet",25],"2":["II. ker\u00fclet",90],"3":["III. ker\u00fclet",131],"4":["IV. ker\u00fclet",101],"5":["V. ker\u00fclet",26],"6":["VI. ker\u00fclet",38],"7":["VII. ker\u00fclet",53],"8":["VIII. ker\u00fclet",76],"9":["IX. ker\u00fclet",59],"10":["X. ker\u00fclet",78],"11":["XI. ker\u00fclet",146],"12":["XII. ker\u00fclet",58],"13":["XIII. ker\u00fclet",120],"14":["XIV. ker\u00fclet",124],"15":["XV. ker\u00fclet",80],"16":["XVI. ker\u00fclet",74],"17":["XVII. ker\u00fclet",88],"18":["XVIII. ker\u00fclet",102],"19":["XIX. ker\u00fclet",60],"20":["XX. ker\u00fclet",66],"21":["XXI. ker\u00fclet",76],"22":["XXII. ker\u00fclet",55],"23":["XXIII. ker\u00fclet",23],"24":["Margitsziget",0]},"counties":{"1":["Budapest",1756],"2":["Pest megye",1234],"3":["Gy\u0151r-Moson-Sopron megye",455],"4":["Vas megye",253],"5":["Zala megye",275],"6":["Veszpr\u00e9m megye",344],"7":["Kom\u00e1rom-Esztergom megye",297],"8":["Fej\u00e9r megye",418],"9":["N\u00f3gr\u00e1d megye",193],"10":["Heves megye",299],"11":["Borsod-Aba\u00faj-Zempl\u00e9n megye",660],"12":["J\u00e1sz-Nagykun-Szolnok megye",376],"13":["Szabolcs-Szatm\u00e1r-Bereg megye",563],"14":["Hajd\u00fa-Bihar megye",534],"15":["Somogy megye",309],"16":["Tolna megye",223],"17":["Baranya megye",363],"18":["B\u00e1cs-Kiskun megye",511],"19":["Csongr\u00e1d megye",404],"20":["B\u00e9k\u00e9s megye",347]},"countries":{"1":["Afghanistan","Afghanistan","af",0],"2":["Aland Islands","Aland Islands","ax",1],"3":["Albania","Alb\u00e1nia","al",0],"4":["Algeria","Algeria","dz",1],"5":["American Samoa","American Samoa","as",1],"6":["Andorra","Andorra","ad",0],"7":["Angola","Angola","ao",1],"8":["Anguilla","Anguilla","ai",1],"9":["Antarctica","Antarctica","aq",1],"10":["Antigua And Barbuda","Antigua And Barbuda","ag",1],"11":["Argentina","Argentina","ar",1],"12":["Armenia","Armenia","am",1],"13":["Aruba","Aruba","aw",1],"14":["Australia","Australia","au",1],"15":["Austria","Ausztria","at",1],"16":["Azerbaijan","Azerbaijan","az",1],"17":["Bahamas","Bahamas","bs",1],"18":["Bahrain","Bahrain","bh",0],"19":["Bangladesh","Bangladesh","bd",1],"20":["Barbados","Barbados","bb",1],"21":["Belarus","Belarus","by",0],"22":["Belgium","Belgium","be",0],"23":["Belize","Belize","bz",1],"24":["Benin","Benin","bj",1],"25":["Bermuda","Bermuda","bm",1],"26":["Bhutan","Bhutan","bt",1],"27":["Bolivia, Plurinational State Of","Bolivia, Plurinational State Of","bo",1],"28":["Bonaire, Sint Eustatius And Saba","Bonaire, Sint Eustatius And Saba","bq",1],"29":["Bosnia And Herzegovina","Bosznia-hercegovina","ba",0],"30":["Botswana","Botswana","bw",1],"31":["Bouvet Island","Bouvet Island","bv",1],"32":["Brazil","Brazil","br",1],"33":["British Indian Ocean Territory","British Indian Ocean Territory","io",1],"34":["Brunei Darussalam","Brunei Darussalam","bn",1],"35":["Bulgaria","Bulg\u00e1ria","bg",0],"36":["Burkina Faso","Burkina Faso","bf",0],"37":["Burundi","Burundi","bi",1],"38":["Cambodia","Cambodia","kh",0],"39":["Cameroon","Cameroon","cm",0],"40":["Canada","Kanada","ca",1],"41":["Cape Verde","Cape Verde","cv",1],"42":["Cayman Islands","Cayman Islands","ky",1],"43":["Central African Republic","Central African Republic","cf",1],"44":["Chad","Chad","td",1],"45":["Chile","Chile","cl",1],"46":["China","K\u00edna","cn",1],"47":["Christmas Island","Christmas Island","cx",1],"48":["Cocos (keeling) Islands","Cocos (keeling) Islands","cc",1],"49":["Colombia","Colombia","co",1],"50":["Comoros","Comoros","km",1],"51":["Congo","Congo","cg",1],"52":["Congo, The Democratic Republic Of The","Congo, The Democratic Republic Of The","cd",0],"53":["Cook Islands","Cook Islands","ck",1],"54":["Costa Rica","Costa Rica","cr",0],"55":["Cote D'ivoire","Cote D'ivoire","ci",1],"56":["Croatia","Horv\u00e1torsz\u00e1g","hr",1],"57":["Cuba","Cuba","cu",1],"58":["Curazao","Curazao","cw",1],"59":["Cyprus","Cyprus","cy",1],"60":["Czech Republic","Cseh K\u00f6zt\u00e1rsas\u00e1g","cz",1],"61":["Denmark","D\u00e1nia","dk",1],"62":["Djibouti","Djibouti","dj",1],"63":["Dominica","Dominica","dm",1],"64":["Dominican Republic","Dominican Republic","do",1],"65":["Ecuador","Ecuador","ec",1],"66":["Egypt","Egyiptom","eg",1],"67":["El Salvador","El Salvador","sv",1],"68":["Equatorial Guinea","Equatorial Guinea","gq",1],"69":["Eritrea","Eritrea","er",1],"70":["Estonia","\u00c9sztorsz\u00e1g","ee",0],"71":["Ethiopia","Ethiopia","et",0],"72":["Falkland Islands (malvinas)","Falkland Islands (malvinas)","fk",1],"73":["Faroe Islands","Faroe Islands","fo",1],"74":["Fiji","Fiji","fj",1],"75":["Finland","Finnorsz\u00e1g","fi",1],"76":["France","Franciaorsz\u00e1g","fr",0],"77":["French Guiana","French Guiana","gf",1],"78":["French Polynesia","French Polynesia","pf",1],"79":["French Southern Territories","French Southern Territories","tf",1],"80":["Gabon","Gabon","ga",1],"81":["Gambia","Gambia","gm",0],"82":["Georgia","Georgia","ge",0],"83":["Germany","N\u00e9metorsz\u00e1g","de",1],"84":["Ghana","Ghana","gh",1],"85":["Gibraltar","Gibraltar","gi",1],"86":["Greece","G\u00f6r\u00f6gorsz\u00e1g","gr",0],"87":["Greenland","Greenland","gl",1],"88":["Grenada","Grenada","gd",1],"89":["Guadeloupe","Guadeloupe","gp",1],"90":["Guam","Guam","gu",1],"91":["Guatemala","Guatemala","gt",1],"92":["Guernsey","Guernsey","gg",1],"93":["Guinea","Guinea","gn",1],"94":["Guinea-bissau","Guinea-bissau","gw",1],"95":["Guyana","Guyana","gy",1],"96":["Haiti","Haiti","ht",1],"97":["Heard Island And Mcdonald Islands","Heard Island And Mcdonald Islands","hm",1],"98":["Holy See (vatican City State)","Holy See (vatican City State)","va",0],"99":["Honduras","Honduras","hn",1],"100":["Hong Kong","Hong Kong","hk",1],"101":["Hungary","Magyarorsz\u00e1g","hu",1],"102":["Iceland","Izland","is",0],"103":["India","India","in",1],"104":["Indonesia","Indonesia","id",0],"105":["Iran, Islamic Republic Of","Ir\u00e1n","ir",0],"106":["Iraq","Irak","iq",0],"107":["Ireland","\u00cdrorsz\u00e1g","ie",1],"108":["Isle Of Man","Isle Of Man","im",1],"109":["Israel","Izrael","il",1],"110":["Italy","Olaszorsz\u00e1g","it",0],"111":["Jamaica","Jamaica","jm",1],"112":["Japan","Jap\u00e1n","jp",1],"113":["Jersey","Jersey","je",1],"114":["Jordan","Jordan","jo",0],"115":["Kazakhstan","Kazakhstan","kz",0],"116":["Kenya","Kenya","ke",1],"117":["Kiribati","Kiribati","ki",1],"118":["Korea, Democratic People's Republic Of","Korea, Democratic People's Republic Of","kp",1],"119":["Korea, Republic Of","Korea, Republic Of","kr",0],"120":["Kuwait","Kuwait","kw",1],"121":["Kyrgyzstan","Kyrgyzstan","kg",0],"122":["Lao People's Democratic Republic","Lao People's Democratic Republic","la",0],"123":["Latvia","Latvia","lv",0],"124":["Lebanon","Lebanon","lb",0],"125":["Lesotho","Lesotho","ls",1],"126":["Liberia","Liberia","lr",1],"127":["Libya","Libya","ly",0],"128":["Liechtenstein","Liechtenstein","li",1],"129":["Lithuania","Litv\u00e1nia","lt",0],"130":["Luxembourg","Luxembourg","lu",0],"131":["Macao","Macao","mo",1],"132":["Macedonia, The Former Yugoslav Republic Of","Maced\u00f3nia","mk",1],"133":["Madagascar","Madagascar","mg",0],"134":["Malawi","Malawi","mw",1],"135":["Malaysia","Malaysia","my",1],"136":["Maldives","Maldives","mv",1],"137":["Mali","Mali","ml",0],"138":["Malta","M\u00e1lta","mt",1],"139":["Marshall Islands","Marshall Islands","mh",1],"140":["Martinique","Martinique","mq",1],"141":["Mauritania","Mauritania","mr",1],"142":["Mauritius","Mauritius","mu",1],"143":["Mayotte","Mayotte","yt",1],"144":["Mexico","Mexico","mx",1],"145":["Micronesia, Federated States Of","Micronesia, Federated States Of","fm",1],"146":["Moldova, Republic Of","Moldova","md",1],"147":["Monaco","Monaco","mc",1],"148":["Mongolia","Mongolia","mn",0],"149":["Montenegro","Montenegro","me",0],"150":["Montserrat","Montserrat","ms",1],"151":["Morocco","Marokk\u00f3","ma",0],"152":["Mozambique","Mozambique","mz",0],"153":["Myanmar","Myanmar","mm",1],"154":["Namibia","Namibia","na",0],"155":["Nauru","Nauru","nr",1],"156":["Nepal","Nepal","np",0],"157":["Netherlands","Hollandia","nl",1],"158":["New Caledonia","New Caledonia","nc",1],"159":["New Zealand","\u00daj-z\u00e9land","nz",1],"160":["Nicaragua","Nicaragua","ni",1],"161":["Niger","Niger","ne",1],"162":["Nigeria","Nigeria","ng",1],"163":["Niue","Niue","nu",1],"164":["Norfolk Island","Norfolk Island","nf",1],"165":["Northern Mariana Islands","Northern Mariana Islands","mp",1],"166":["Norway","Norv\u00e9gia","no",1],"167":["Oman","Oman","om",0],"168":["Pakistan","Pakiszt\u00e1n","pk",1],"169":["Palau","Palau","pw",1],"170":["Palestinian Territory, Occupied","Palestinian Territory, Occupied","ps",1],"171":["Panama","Panama","pa",1],"172":["Papua New Guinea","Papua New Guinea","pg",1],"173":["Paraguay","Paraguay","py",1],"174":["Peru","Peru","pe",1],"175":["Philippines","Philippines","ph",0],"176":["Pitcairn","Pitcairn","pn",1],"177":["Poland","Lengyelorsz\u00e1g","pl",1],"178":["Portugal","Portug\u00e1lia","pt",1],"179":["Puerto Rico","Puerto Rico","pr",1],"180":["Qatar","Qatar","qa",0],"181":["Reunion","Reunion","re",1],"182":["Romania","Rom\u00e1nia","ro",0],"183":["Russian Federation","Oroszorsz\u00e1g","ru",1],"184":["Rwanda","Rwanda","rw",1],"185":["Saint Barthelemy","Saint Barthelemy","bl",1],"186":["Saint Helena, Ascension And Tristan Da Cunha","Saint Helena, Ascension And Tristan Da Cunha","sh",1],"187":["Saint Kitts And Nevis","Saint Kitts And Nevis","kn",1],"188":["Saint Lucia","Saint Lucia","lc",1],"189":["Saint Martin (french Part)","Saint Martin (french Part)","mf",1],"190":["Saint Pierre And Miquelon","Saint Pierre And Miquelon","pm",1],"191":["Saint Vincent And The Grenadines","Saint Vincent And The Grenadines","vc",1],"192":["Samoa","Samoa","ws",1],"193":["San Marino","San Marino","sm",1],"194":["Sao Tome And Principe","Sao Tome And Principe","st",1],"195":["Saudi Arabia","Saudi Arabia","sa",0],"196":["Senegal","Senegal","sn",0],"197":["Serbia","Szerbia","rs",1],"198":["Seychelles","Seychelles","sc",1],"199":["Sierra Leone","Sierra Leone","sl",1],"200":["Singapore","Szingap\u00far","sg",1],"201":["Sint Maarten (dutch Part)","Sint Maarten (dutch Part)","sx",1],"202":["Slovakia","Szlov\u00e1kia","sk",1],"203":["Slovenia","Szlov\u00e9nia","si",0],"204":["Solomon Islands","Solomon Islands","sb",1],"205":["Somalia","Somalia","so",1],"206":["South Africa","South Africa","za",0],"207":["South Georgia And The South Sandwich Islands","South Georgia And The South Sandwich Islands","gs",1],"208":["South Sudan","South Sudan","ss",1],"209":["Spain","Spanyolorsz\u00e1g","es",1],"210":["Sri Lanka","Sri Lanka","lk",0],"211":["Sudan","Sudan","sd",0],"212":["Suriname","Suriname","sr",1],"213":["Svalbard And Jan Mayen","Svalbard And Jan Mayen","sj",1],"214":["Swaziland","Swaziland","sz",1],"215":["Sweden","Sv\u00e9dorsz\u00e1g","se",1],"216":["Switzerland","Sv\u00e1jc","ch",1],"217":["Syrian Arab Republic","Syrian Arab Republic","sy",1],"218":["Taiwan, Province Of China","Taiwan, Province Of China","tw",1],"219":["Tajikistan","Tajikistan","tj",0],"220":["Tanzania, United Republic Of","Tanzania, United Republic Of","tz",1],"221":["Thailand","Thaif\u00f6ld","th",1],"222":["Timor-leste","Timor-leste","tl",1],"223":["Togo","Togo","tg",1],"224":["Tokelau","Tokelau","tk",1],"225":["Tonga","Tonga","to",1],"226":["Trinidad And Tobago","Trinidad And Tobago","tt",1],"227":["Tunisia","Tun\u00e9zia","tn",1],"228":["Turkey","T\u00f6r\u00f6korsz\u00e1g","tr",1],"229":["Turkmenistan","Turkmenistan","tm",0],"230":["Turks And Caicos Islands","Turks And Caicos Islands","tc",1],"231":["Tuvalu","Tuvalu","tv",1],"232":["Uganda","Uganda","ug",1],"233":["Ukraine","Ukrajna","ua",0],"234":["United Arab Emirates","Egyes\u00fclt Arab Emir\u00e1tusok","ae",0],"235":["United Kingdom","Egyes\u00fclt Kir\u00e1lys\u00e1g","gb",1],"236":["United States","Amerikai Egyes\u00fclt \u00c1llamok","us",1],"237":["United States Minor Outlying Islands","United States Minor Outlying Islands","um",1],"238":["Uruguay","Uruguay","uy",1],"239":["Uzbekistan","Uzbekistan","uz",0],"240":["Vanuatu","Vanuatu","vu",1],"241":["Venezuela, Bolivarian Republic Of","Venezuela, Bolivarian Republic Of","ve",1],"242":["Viet Nam","Viet Nam","vn",1],"243":["Virgin Islands, British","Virgin Islands, British","vg",1],"244":["Virgin Islands, U.S.","Virgin Islands, U.S.","vi",1],"245":["Wallis And Futuna","Wallis And Futuna","wf",1],"246":["Western Sahara","Western Sahara","eh",1],"247":["Yemen","Yemen","ye",1],"248":["Zambia","Zambia","zm",0],"249":["Zimbabwe","Zimbabwe","zw",1],"250":["Vatican","Vatik\u00e1n","va",1]},"ww_parameter_types":{"1":["Helyek","place_id"],"2":["Orsz\u00e1gok","country_id"],"3":["Megy\u00e9k","county_id"],"4":["Forr\u00e1sok","sources"],"5":["Ker\u00fcletek","district_id"],"6":["Eml\u00e9km\u0171 t\u00edpus","type_id"],"7":["Kapcsol\u00f3d\u00f3 eml\u00e9km\u0171vek","connected_monuments"],"8":["T\u00e9m\u00e1k","topics"],"9":["Kapcsol\u00f3d\u00f3 hadseregek","connected_corps"],"10":["Alkot\u00f3k","artists,second_artists,creator_artists"],"11":["Alap\u00edt\u00f3k","founders"],"12":["Nemzets\u00e9gek","nationalities"],"13":["Jelk\u00e9pek","symbols"],"14":["Kapcsol\u00f3d\u00f3 \u00e9p\u00fcletek","connected_buildings"],"15":["Kapcsol\u00f3d\u00f3 esem\u00e9nyek","connected_events"],"16":["\u00c1llapotv\u00e1ltoz\u00e1sok","states"],"17":["Fenntart\u00f3k","maintainers"],"18":["Katonai egys\u00e9gek","corps"],"19":["Avat\u00f3k","unveilers"]}};window.onload=function(){App.init();Basefunctions.init();Alerts.init();Aria.init();Autocomplete.init();Charts.init();Forms.init();Helper.init();Html.init();Http.init();Layout.init();Modals.init();Showroom.init();Store.init();Webstat.init();Appbase.init();Artpieces.init();Comments.init();Conversations.init();Document.init();Domupdates.init();Folders.init();Games.init();Maps.init();Notifications.init();Users.init()}